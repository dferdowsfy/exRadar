var Rp=m=>{throw TypeError(m)};var zu=(m,t,i)=>t.has(m)||Rp("Cannot "+i);var Zt=(m,t,i)=>(zu(m,t,"read from private field"),i?i.call(m):t.get(m)),Ri=(m,t,i)=>t.has(m)?Rp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(m):t.set(m,i),Ve=(m,t,i,s)=>(zu(m,t,"write to private field"),s?s.call(m,i):t.set(m,i),i),ki=(m,t,i)=>(zu(m,t,"access private method"),i);var kp=(m,t,i,s)=>({set _(r){Ve(m,t,r,i)},get _(){return Zt(m,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();var Iu={exports:{}},nr={};var Op;function Db(){if(Op)return nr;Op=1;var m=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var u in r)u!=="key"&&(l[u]=r[u])}else l=r;return r=l.ref,{$$typeof:m,type:s,key:c,ref:r!==void 0?r:null,props:l}}return nr.Fragment=t,nr.jsx=i,nr.jsxs=i,nr}var Lp;function Rb(){return Lp||(Lp=1,Iu.exports=Db()),Iu.exports}var _=Rb(),Pu={exports:{}},bt={};var Np;function kb(){if(Np)return bt;Np=1;var m=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function E(R,H,K){this.props=R,this.context=H,this.refs=T,this.updater=K||w}E.prototype.isReactComponent={},E.prototype.setState=function(R,H){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,H,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function D(){}D.prototype=E.prototype;function C(R,H,K){this.props=R,this.context=H,this.refs=T,this.updater=K||w}var I=C.prototype=new D;I.constructor=C,S(I,E.prototype),I.isPureReactComponent=!0;var N=Array.isArray;function z(){}var P={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function Q(R,H,K){var et=K.ref;return{$$typeof:m,type:R,key:H,ref:et!==void 0?et:null,props:K}}function nt(R,H){return Q(R.type,H,R.props)}function Z(R){return typeof R=="object"&&R!==null&&R.$$typeof===m}function ft(R){var H={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(K){return H[K]})}var Et=/\/+/g;function ut(R,H){return typeof R=="object"&&R!==null&&R.key!=null?ft(""+R.key):H.toString(36)}function Dt(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(z,z):(R.status="pending",R.then(function(H){R.status==="pending"&&(R.status="fulfilled",R.value=H)},function(H){R.status==="pending"&&(R.status="rejected",R.reason=H)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function L(R,H,K,et,ht){var gt=typeof R;(gt==="undefined"||gt==="boolean")&&(R=null);var O=!1;if(R===null)O=!0;else switch(gt){case"bigint":case"string":case"number":O=!0;break;case"object":switch(R.$$typeof){case m:case t:O=!0;break;case p:return O=R._init,L(O(R._payload),H,K,et,ht)}}if(O)return ht=ht(R),O=et===""?"."+ut(R,0):et,N(ht)?(K="",O!=null&&(K=O.replace(Et,"$&/")+"/"),L(ht,H,K,"",function(vt){return vt})):ht!=null&&(Z(ht)&&(ht=nt(ht,K+(ht.key==null||R&&R.key===ht.key?"":(""+ht.key).replace(Et,"$&/")+"/")+O)),H.push(ht)),1;O=0;var it=et===""?".":et+":";if(N(R))for(var J=0;J<R.length;J++)et=R[J],gt=it+ut(et,J),O+=L(et,H,K,gt,ht);else if(J=A(R),typeof J=="function")for(R=J.call(R),J=0;!(et=R.next()).done;)et=et.value,gt=it+ut(et,J++),O+=L(et,H,K,gt,ht);else if(gt==="object"){if(typeof R.then=="function")return L(Dt(R),H,K,et,ht);throw H=String(R),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return O}function Y(R,H,K){if(R==null)return R;var et=[],ht=0;return L(R,et,"","",function(gt){return H.call(K,gt,ht++)}),et}function tt(R){if(R._status===-1){var H=R._result;H=H(),H.then(function(K){(R._status===0||R._status===-1)&&(R._status=1,R._result=K)},function(K){(R._status===0||R._status===-1)&&(R._status=2,R._result=K)}),R._status===-1&&(R._status=0,R._result=H)}if(R._status===1)return R._result.default;throw R._result}var pt=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},St={map:Y,forEach:function(R,H,K){Y(R,function(){H.apply(this,arguments)},K)},count:function(R){var H=0;return Y(R,function(){H++}),H},toArray:function(R){return Y(R,function(H){return H})||[]},only:function(R){if(!Z(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return bt.Activity=y,bt.Children=St,bt.Component=E,bt.Fragment=i,bt.Profiler=r,bt.PureComponent=C,bt.StrictMode=s,bt.Suspense=h,bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,bt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return P.H.useMemoCache(R)}},bt.cache=function(R){return function(){return R.apply(null,arguments)}},bt.cacheSignal=function(){return null},bt.cloneElement=function(R,H,K){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var et=S({},R.props),ht=R.key;if(H!=null)for(gt in H.key!==void 0&&(ht=""+H.key),H)!V.call(H,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&H.ref===void 0||(et[gt]=H[gt]);var gt=arguments.length-2;if(gt===1)et.children=K;else if(1<gt){for(var O=Array(gt),it=0;it<gt;it++)O[it]=arguments[it+2];et.children=O}return Q(R.type,ht,et)},bt.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},bt.createElement=function(R,H,K){var et,ht={},gt=null;if(H!=null)for(et in H.key!==void 0&&(gt=""+H.key),H)V.call(H,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(ht[et]=H[et]);var O=arguments.length-2;if(O===1)ht.children=K;else if(1<O){for(var it=Array(O),J=0;J<O;J++)it[J]=arguments[J+2];ht.children=it}if(R&&R.defaultProps)for(et in O=R.defaultProps,O)ht[et]===void 0&&(ht[et]=O[et]);return Q(R,gt,ht)},bt.createRef=function(){return{current:null}},bt.forwardRef=function(R){return{$$typeof:u,render:R}},bt.isValidElement=Z,bt.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:tt}},bt.memo=function(R,H){return{$$typeof:f,type:R,compare:H===void 0?null:H}},bt.startTransition=function(R){var H=P.T,K={};P.T=K;try{var et=R(),ht=P.S;ht!==null&&ht(K,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(z,pt)}catch(gt){pt(gt)}finally{H!==null&&K.types!==null&&(H.types=K.types),P.T=H}},bt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},bt.use=function(R){return P.H.use(R)},bt.useActionState=function(R,H,K){return P.H.useActionState(R,H,K)},bt.useCallback=function(R,H){return P.H.useCallback(R,H)},bt.useContext=function(R){return P.H.useContext(R)},bt.useDebugValue=function(){},bt.useDeferredValue=function(R,H){return P.H.useDeferredValue(R,H)},bt.useEffect=function(R,H){return P.H.useEffect(R,H)},bt.useEffectEvent=function(R){return P.H.useEffectEvent(R)},bt.useId=function(){return P.H.useId()},bt.useImperativeHandle=function(R,H,K){return P.H.useImperativeHandle(R,H,K)},bt.useInsertionEffect=function(R,H){return P.H.useInsertionEffect(R,H)},bt.useLayoutEffect=function(R,H){return P.H.useLayoutEffect(R,H)},bt.useMemo=function(R,H){return P.H.useMemo(R,H)},bt.useOptimistic=function(R,H){return P.H.useOptimistic(R,H)},bt.useReducer=function(R,H,K){return P.H.useReducer(R,H,K)},bt.useRef=function(R){return P.H.useRef(R)},bt.useState=function(R){return P.H.useState(R)},bt.useSyncExternalStore=function(R,H,K){return P.H.useSyncExternalStore(R,H,K)},bt.useTransition=function(){return P.H.useTransition()},bt.version="19.2.4",bt}var Bp;function mh(){return Bp||(Bp=1,Pu.exports=kb()),Pu.exports}var te=mh(),Fu={exports:{}},sr={},ju={exports:{}},Uu={};var zp;function Ob(){return zp||(zp=1,(function(m){function t(L,Y){var tt=L.length;L.push(Y);t:for(;0<tt;){var pt=tt-1>>>1,St=L[pt];if(0<r(St,Y))L[pt]=Y,L[tt]=St,tt=pt;else break t}}function i(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var Y=L[0],tt=L.pop();if(tt!==Y){L[0]=tt;t:for(var pt=0,St=L.length,R=St>>>1;pt<R;){var H=2*(pt+1)-1,K=L[H],et=H+1,ht=L[et];if(0>r(K,tt))et<St&&0>r(ht,K)?(L[pt]=ht,L[et]=tt,pt=et):(L[pt]=K,L[H]=tt,pt=H);else if(et<St&&0>r(ht,tt))L[pt]=ht,L[et]=tt,pt=et;else break t}}return Y}function r(L,Y){var tt=L.sortIndex-Y.sortIndex;return tt!==0?tt:L.id-Y.id}if(m.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;m.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();m.unstable_now=function(){return c.now()-u}}var h=[],f=[],p=1,y=null,b=3,A=!1,w=!1,S=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function I(L){for(var Y=i(f);Y!==null;){if(Y.callback===null)s(f);else if(Y.startTime<=L)s(f),Y.sortIndex=Y.expirationTime,t(h,Y);else break;Y=i(f)}}function N(L){if(S=!1,I(L),!w)if(i(h)!==null)w=!0,z||(z=!0,ft());else{var Y=i(f);Y!==null&&Dt(N,Y.startTime-L)}}var z=!1,P=-1,V=5,Q=-1;function nt(){return T?!0:!(m.unstable_now()-Q<V)}function Z(){if(T=!1,z){var L=m.unstable_now();Q=L;var Y=!0;try{t:{w=!1,S&&(S=!1,D(P),P=-1),A=!0;var tt=b;try{e:{for(I(L),y=i(h);y!==null&&!(y.expirationTime>L&&nt());){var pt=y.callback;if(typeof pt=="function"){y.callback=null,b=y.priorityLevel;var St=pt(y.expirationTime<=L);if(L=m.unstable_now(),typeof St=="function"){y.callback=St,I(L),Y=!0;break e}y===i(h)&&s(h),I(L)}else s(h);y=i(h)}if(y!==null)Y=!0;else{var R=i(f);R!==null&&Dt(N,R.startTime-L),Y=!1}}break t}finally{y=null,b=tt,A=!1}Y=void 0}}finally{Y?ft():z=!1}}}var ft;if(typeof C=="function")ft=function(){C(Z)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,ut=Et.port2;Et.port1.onmessage=Z,ft=function(){ut.postMessage(null)}}else ft=function(){E(Z,0)};function Dt(L,Y){P=E(function(){L(m.unstable_now())},Y)}m.unstable_IdlePriority=5,m.unstable_ImmediatePriority=1,m.unstable_LowPriority=4,m.unstable_NormalPriority=3,m.unstable_Profiling=null,m.unstable_UserBlockingPriority=2,m.unstable_cancelCallback=function(L){L.callback=null},m.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<L?Math.floor(1e3/L):5},m.unstable_getCurrentPriorityLevel=function(){return b},m.unstable_next=function(L){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var tt=b;b=Y;try{return L()}finally{b=tt}},m.unstable_requestPaint=function(){T=!0},m.unstable_runWithPriority=function(L,Y){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var tt=b;b=L;try{return Y()}finally{b=tt}},m.unstable_scheduleCallback=function(L,Y,tt){var pt=m.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?pt+tt:pt):tt=pt,L){case 1:var St=-1;break;case 2:St=250;break;case 5:St=1073741823;break;case 4:St=1e4;break;default:St=5e3}return St=tt+St,L={id:p++,callback:Y,priorityLevel:L,startTime:tt,expirationTime:St,sortIndex:-1},tt>pt?(L.sortIndex=tt,t(f,L),i(h)===null&&L===i(f)&&(S?(D(P),P=-1):S=!0,Dt(N,tt-pt))):(L.sortIndex=St,t(h,L),w||A||(w=!0,z||(z=!0,ft()))),L},m.unstable_shouldYield=nt,m.unstable_wrapCallback=function(L){var Y=b;return function(){var tt=b;b=Y;try{return L.apply(this,arguments)}finally{b=tt}}}})(Uu)),Uu}var Ip;function Lb(){return Ip||(Ip=1,ju.exports=Ob()),ju.exports}var Hu={exports:{}},ke={};var Pp;function Nb(){if(Pp)return ke;Pp=1;var m=mh();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(h,f,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:f,implementation:p}}var c=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ke.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ke.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(h,f,null,p)},ke.flushSync=function(h){var f=c.T,p=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=f,s.p=p,s.d.f()}},ke.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(h,f))},ke.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},ke.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?s.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):p==="script"&&s.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ke.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);s.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(h)},ke.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,y=u(p,f.crossOrigin);s.d.L(h,p,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ke.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);s.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(h)},ke.requestFormReset=function(h){s.d.r(h)},ke.unstable_batchedUpdates=function(h,f){return h(f)},ke.useFormState=function(h,f,p){return c.H.useFormState(h,f,p)},ke.useFormStatus=function(){return c.H.useHostTransitionStatus()},ke.version="19.2.4",ke}var Fp;function Bb(){if(Fp)return Hu.exports;Fp=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(t){console.error(t)}}return m(),Hu.exports=Nb(),Hu.exports}var jp;function zb(){if(jp)return sr;jp=1;var m=Lb(),t=mh(),i=Bb();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(s(188))}function f(e){var n=e.alternate;if(!n){if(n=l(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,o=n;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(o=d.return,o!==null){a=o;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return h(d),e;if(g===o)return h(d),n;g=g.sibling}throw Error(s(188))}if(a.return!==o.return)a=d,o=g;else{for(var v=!1,x=d.child;x;){if(x===a){v=!0,a=d,o=g;break}if(x===o){v=!0,o=d,a=g;break}x=x.sibling}if(!v){for(x=g.child;x;){if(x===a){v=!0,a=g,o=d;break}if(x===o){v=!0,o=g,a=d;break}x=x.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function p(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=p(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),nt=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ft(e){return e===null||typeof e!="object"?null:(e=Z&&e[Z]||e["@@iterator"],typeof e=="function"?e:null)}var Et=Symbol.for("react.client.reference");function ut(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Et?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case E:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case z:return"SuspenseList";case Q:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case C:return e.displayName||"Context";case D:return(e._context.displayName||"Context")+".Consumer";case I:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return n=e.displayName||null,n!==null?n:ut(e.type)||"Memo";case V:n=e._payload,e=e._init;try{return ut(e(n))}catch{}}return null}var Dt=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},pt=[],St=-1;function R(e){return{current:e}}function H(e){0>St||(e.current=pt[St],pt[St]=null,St--)}function K(e,n){St++,pt[St]=e.current,e.current=n}var et=R(null),ht=R(null),gt=R(null),O=R(null);function it(e,n){switch(K(gt,n),K(ht,e),K(et,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Jg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Jg(n),e=tp(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(et),K(et,e)}function J(){H(et),H(ht),H(gt)}function vt(e){e.memoizedState!==null&&K(O,e);var n=et.current,a=tp(n,e.type);n!==a&&(K(ht,e),K(et,a))}function $t(e){ht.current===e&&(H(et),H(ht)),O.current===e&&(H(O),Ja._currentValue=tt)}var re,Ei;function vi(e){if(re===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);re=n&&n[1]||"",Ei=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+re+e+Ei}var ls=!1;function cs(e,n){if(!e||ls)return"";ls=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var U=G}Reflect.construct(e,[],W)}else{try{W.call()}catch(G){U=G}e.call(W.prototype)}}else{try{throw Error()}catch(G){U=G}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&U&&typeof G.stack=="string")return[G.stack,U.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),v=g[0],x=g[1];if(v&&x){var M=v.split(`
`),j=x.split(`
`);for(d=o=0;o<M.length&&!M[o].includes("DetermineComponentFrameRoot");)o++;for(;d<j.length&&!j[d].includes("DetermineComponentFrameRoot");)d++;if(o===M.length||d===j.length)for(o=M.length-1,d=j.length-1;1<=o&&0<=d&&M[o]!==j[d];)d--;for(;1<=o&&0<=d;o--,d--)if(M[o]!==j[d]){if(o!==1||d!==1)do if(o--,d--,0>d||M[o]!==j[d]){var q=`
`+M[o].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=o&&0<=d);break}}}finally{ls=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?vi(a):""}function Tr(e,n){switch(e.tag){case 26:case 27:case 5:return vi(e.type);case 16:return vi("Lazy");case 13:return e.child!==n&&n!==null?vi("Suspense Fallback"):vi("Suspense");case 19:return vi("SuspenseList");case 0:case 15:return cs(e.type,!1);case 11:return cs(e.type.render,!1);case 1:return cs(e.type,!0);case 31:return vi("Activity");default:return""}}function ca(e){try{var n="",a=null;do n+=Tr(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Nn=Object.prototype.hasOwnProperty,us=m.unstable_scheduleCallback,ua=m.unstable_cancelCallback,Oe=m.unstable_shouldYield,Ti=m.unstable_requestPaint,Le=m.unstable_now,Sl=m.unstable_getCurrentPriorityLevel,ha=m.unstable_ImmediatePriority,_r=m.unstable_UserBlockingPriority,hs=m.unstable_NormalPriority,wl=m.unstable_LowPriority,Cr=m.unstable_IdlePriority,xl=m.log,Oh=m.unstable_setDisableYieldValue,Bn=null,qe=null;function an(e){if(typeof xl=="function"&&Oh(e),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Bn,e)}catch{}}var $e=Math.clz32?Math.clz32:py,fy=Math.log,gy=Math.LN2;function py(e){return e>>>=0,e===0?32:31-(fy(e)/gy|0)|0}var Mr=256,Dr=262144,Rr=4194304;function zn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function kr(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var d=0,g=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var x=o&134217727;return x!==0?(o=x&~g,o!==0?d=zn(o):(v&=x,v!==0?d=zn(v):a||(a=x&~e,a!==0&&(d=zn(a))))):(x=o&~g,x!==0?d=zn(x):v!==0?d=zn(v):a||(a=o&~e,a!==0&&(d=zn(a)))),d===0?0:n!==0&&n!==d&&(n&g)===0&&(g=d&-d,a=n&-n,g>=a||g===32&&(a&4194048)!==0)?n:d}function da(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function my(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lh(){var e=Rr;return Rr<<=1,(Rr&62914560)===0&&(Rr=4194304),e}function El(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function fa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function yy(e,n,a,o,d,g){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var x=e.entanglements,M=e.expirationTimes,j=e.hiddenUpdates;for(a=v&~a;0<a;){var q=31-$e(a),W=1<<q;x[q]=0,M[q]=-1;var U=j[q];if(U!==null)for(j[q]=null,q=0;q<U.length;q++){var G=U[q];G!==null&&(G.lane&=-536870913)}a&=~W}o!==0&&Nh(e,o,0),g!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=g&~(v&~n))}function Nh(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-$e(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Bh(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-$e(a),d=1<<o;d&n|e[o]&n&&(e[o]|=n),a&=~d}}function zh(e,n){var a=n&-n;return a=(a&42)!==0?1:Tl(a),(a&(e.suspendedLanes|n))!==0?0:a}function Tl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _l(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ih(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:xp(e.type))}function Ph(e,n){var a=Y.p;try{return Y.p=e,n()}finally{Y.p=a}}var rn=Math.random().toString(36).slice(2),xe="__reactFiber$"+rn,Ie="__reactProps$"+rn,ds="__reactContainer$"+rn,Cl="__reactEvents$"+rn,by="__reactListeners$"+rn,vy="__reactHandles$"+rn,Fh="__reactResources$"+rn,ga="__reactMarker$"+rn;function Ml(e){delete e[xe],delete e[Ie],delete e[Cl],delete e[by],delete e[vy]}function fs(e){var n=e[xe];if(n)return n;for(var a=e.parentNode;a;){if(n=a[ds]||a[xe]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=op(e);e!==null;){if(a=e[xe])return a;e=op(e)}return n}e=a,a=e.parentNode}return null}function gs(e){if(e=e[xe]||e[ds]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function pa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function ps(e){var n=e[Fh];return n||(n=e[Fh]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ve(e){e[ga]=!0}var jh=new Set,Uh={};function In(e,n){ms(e,n),ms(e+"Capture",n)}function ms(e,n){for(Uh[e]=n,e=0;e<n.length;e++)jh.add(n[e])}var Ay=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hh={},Gh={};function Sy(e){return Nn.call(Gh,e)?!0:Nn.call(Hh,e)?!1:Ay.test(e)?Gh[e]=!0:(Hh[e]=!0,!1)}function Or(e,n,a){if(Sy(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Lr(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Ii(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function ai(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vh(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function wy(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,g=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(v){a=""+v,g.call(this,v)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Dl(e){if(!e._valueTracker){var n=Vh(e)?"checked":"value";e._valueTracker=wy(e,n,""+e[n])}}function Yh(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=Vh(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function Nr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var xy=/[\n"\\]/g;function ri(e){return e.replace(xy,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Rl(e,n,a,o,d,g,v,x){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+ai(n)):e.value!==""+ai(n)&&(e.value=""+ai(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?kl(e,v,ai(n)):a!=null?kl(e,v,ai(a)):o!=null&&e.removeAttribute("value"),d==null&&g!=null&&(e.defaultChecked=!!g),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+ai(x):e.removeAttribute("name")}function Xh(e,n,a,o,d,g,v,x){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),n!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||n!=null)){Dl(e);return}a=a!=null?""+ai(a):"",n=n!=null?""+ai(n):a,x||n===e.value||(e.value=n),e.defaultValue=n}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=x?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Dl(e)}function kl(e,n,a){n==="number"&&Nr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ys(e,n,a,o){if(e=e.options,n){n={};for(var d=0;d<a.length;d++)n["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=n.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&o&&(e[a].defaultSelected=!0)}else{for(a=""+ai(a),n=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function qh(e,n,a){if(n!=null&&(n=""+ai(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+ai(a):""}function $h(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(Dt(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=ai(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Dl(e)}function bs(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Ey=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wh(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||Ey.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Kh(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in n)o=n[d],n.hasOwnProperty(d)&&a[d]!==o&&Wh(e,d,o)}else for(var g in n)n.hasOwnProperty(g)&&Wh(e,g,n[g])}function Ol(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ty=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_y=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Br(e){return _y.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pi(){}var Ll=null;function Nl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vs=null,As=null;function Qh(e){var n=gs(e);if(n&&(e=n.stateNode)){var a=e[Ie]||null;t:switch(e=n.stateNode,n.type){case"input":if(Rl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ri(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var d=o[Ie]||null;if(!d)throw Error(s(90));Rl(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&Yh(o)}break t;case"textarea":qh(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&ys(e,!!a.multiple,n,!1)}}}var Bl=!1;function Zh(e,n,a){if(Bl)return e(n,a);Bl=!0;try{var o=e(n);return o}finally{if(Bl=!1,(vs!==null||As!==null)&&(xo(),vs&&(n=vs,e=As,As=vs=null,Qh(n),e)))for(n=0;n<e.length;n++)Qh(e[n])}}function ma(e,n){var a=e.stateNode;if(a===null)return null;var o=a[Ie]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zl=!1;if(Fi)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){zl=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{zl=!1}var on=null,Il=null,zr=null;function Jh(){if(zr)return zr;var e,n=Il,a=n.length,o,d="value"in on?on.value:on.textContent,g=d.length;for(e=0;e<a&&n[e]===d[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===d[g-o];o++);return zr=d.slice(e,1<o?1-o:void 0)}function Ir(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Pr(){return!0}function td(){return!1}function Pe(e){function n(a,o,d,g,v){this._reactName=a,this._targetInst=d,this.type=o,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(a=e[x],this[x]=a?a(g):g[x]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Pr:td,this.isPropagationStopped=td,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Pr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Pr)},persist:function(){},isPersistent:Pr}),n}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fr=Pe(Pn),ba=y({},Pn,{view:0,detail:0}),Cy=Pe(ba),Pl,Fl,va,jr=y({},ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ul,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==va&&(va&&e.type==="mousemove"?(Pl=e.screenX-va.screenX,Fl=e.screenY-va.screenY):Fl=Pl=0,va=e),Pl)},movementY:function(e){return"movementY"in e?e.movementY:Fl}}),ed=Pe(jr),My=y({},jr,{dataTransfer:0}),Dy=Pe(My),Ry=y({},ba,{relatedTarget:0}),jl=Pe(Ry),ky=y({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),Oy=Pe(ky),Ly=y({},Pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ny=Pe(Ly),By=y({},Pn,{data:0}),id=Pe(By),zy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Py={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fy(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Py[e])?!!n[e]:!1}function Ul(){return Fy}var jy=y({},ba,{key:function(e){if(e.key){var n=zy[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ir(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Iy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ul,charCode:function(e){return e.type==="keypress"?Ir(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ir(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Uy=Pe(jy),Hy=y({},jr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nd=Pe(Hy),Gy=y({},ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ul}),Vy=Pe(Gy),Yy=y({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xy=Pe(Yy),qy=y({},jr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$y=Pe(qy),Wy=y({},Pn,{newState:0,oldState:0}),Ky=Pe(Wy),Qy=[9,13,27,32],Hl=Fi&&"CompositionEvent"in window,Aa=null;Fi&&"documentMode"in document&&(Aa=document.documentMode);var Zy=Fi&&"TextEvent"in window&&!Aa,sd=Fi&&(!Hl||Aa&&8<Aa&&11>=Aa),ad=" ",rd=!1;function od(e,n){switch(e){case"keyup":return Qy.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ld(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ss=!1;function Jy(e,n){switch(e){case"compositionend":return ld(n);case"keypress":return n.which!==32?null:(rd=!0,ad);case"textInput":return e=n.data,e===ad&&rd?null:e;default:return null}}function t0(e,n){if(Ss)return e==="compositionend"||!Hl&&od(e,n)?(e=Jh(),zr=Il=on=null,Ss=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return sd&&n.locale!=="ko"?null:n.data;default:return null}}var e0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!e0[e.type]:n==="textarea"}function ud(e,n,a,o){vs?As?As.push(o):As=[o]:vs=o,n=Ro(n,"onChange"),0<n.length&&(a=new Fr("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var Sa=null,wa=null;function i0(e){qg(e,0)}function Ur(e){var n=pa(e);if(Yh(n))return e}function hd(e,n){if(e==="change")return n}var dd=!1;if(Fi){var Gl;if(Fi){var Vl="oninput"in document;if(!Vl){var fd=document.createElement("div");fd.setAttribute("oninput","return;"),Vl=typeof fd.oninput=="function"}Gl=Vl}else Gl=!1;dd=Gl&&(!document.documentMode||9<document.documentMode)}function gd(){Sa&&(Sa.detachEvent("onpropertychange",pd),wa=Sa=null)}function pd(e){if(e.propertyName==="value"&&Ur(wa)){var n=[];ud(n,wa,e,Nl(e)),Zh(i0,n)}}function n0(e,n,a){e==="focusin"?(gd(),Sa=n,wa=a,Sa.attachEvent("onpropertychange",pd)):e==="focusout"&&gd()}function s0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ur(wa)}function a0(e,n){if(e==="click")return Ur(n)}function r0(e,n){if(e==="input"||e==="change")return Ur(n)}function o0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var We=typeof Object.is=="function"?Object.is:o0;function xa(e,n){if(We(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var d=a[o];if(!Nn.call(n,d)||!We(e[d],n[d]))return!1}return!0}function md(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yd(e,n){var a=md(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=md(a)}}function bd(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?bd(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function vd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Nr(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=Nr(e.document)}return n}function Yl(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var l0=Fi&&"documentMode"in document&&11>=document.documentMode,ws=null,Xl=null,Ea=null,ql=!1;function Ad(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ql||ws==null||ws!==Nr(o)||(o=ws,"selectionStart"in o&&Yl(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ea&&xa(Ea,o)||(Ea=o,o=Ro(Xl,"onSelect"),0<o.length&&(n=new Fr("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=ws)))}function Fn(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var xs={animationend:Fn("Animation","AnimationEnd"),animationiteration:Fn("Animation","AnimationIteration"),animationstart:Fn("Animation","AnimationStart"),transitionrun:Fn("Transition","TransitionRun"),transitionstart:Fn("Transition","TransitionStart"),transitioncancel:Fn("Transition","TransitionCancel"),transitionend:Fn("Transition","TransitionEnd")},$l={},Sd={};Fi&&(Sd=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function jn(e){if($l[e])return $l[e];if(!xs[e])return e;var n=xs[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Sd)return $l[e]=n[a];return e}var wd=jn("animationend"),xd=jn("animationiteration"),Ed=jn("animationstart"),c0=jn("transitionrun"),u0=jn("transitionstart"),h0=jn("transitioncancel"),Td=jn("transitionend"),_d=new Map,Wl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wl.push("scrollEnd");function Ai(e,n){_d.set(e,n),In(n,[e])}var Hr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},oi=[],Es=0,Kl=0;function Gr(){for(var e=Es,n=Kl=Es=0;n<e;){var a=oi[n];oi[n++]=null;var o=oi[n];oi[n++]=null;var d=oi[n];oi[n++]=null;var g=oi[n];if(oi[n++]=null,o!==null&&d!==null){var v=o.pending;v===null?d.next=d:(d.next=v.next,v.next=d),o.pending=d}g!==0&&Cd(a,d,g)}}function Vr(e,n,a,o){oi[Es++]=e,oi[Es++]=n,oi[Es++]=a,oi[Es++]=o,Kl|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Ql(e,n,a,o){return Vr(e,n,a,o),Yr(e)}function Un(e,n){return Vr(e,null,null,n),Yr(e)}function Cd(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var d=!1,g=e.return;g!==null;)g.childLanes|=a,o=g.alternate,o!==null&&(o.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(d=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,d&&n!==null&&(d=31-$e(a),e=g.hiddenUpdates,o=e[d],o===null?e[d]=[n]:o.push(n),n.lane=a|536870912),g):null}function Yr(e){if(50<Xa)throw Xa=0,ru=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ts={};function d0(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ke(e,n,a,o){return new d0(e,n,a,o)}function Zl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ji(e,n){var a=e.alternate;return a===null?(a=Ke(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Md(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Xr(e,n,a,o,d,g){var v=0;if(o=e,typeof e=="function")Zl(e)&&(v=1);else if(typeof e=="string")v=yb(e,a,et.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Q:return e=Ke(31,a,n,d),e.elementType=Q,e.lanes=g,e;case S:return Hn(a.children,d,g,n);case T:v=8,d|=24;break;case E:return e=Ke(12,a,n,d|2),e.elementType=E,e.lanes=g,e;case N:return e=Ke(13,a,n,d),e.elementType=N,e.lanes=g,e;case z:return e=Ke(19,a,n,d),e.elementType=z,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case C:v=10;break t;case D:v=9;break t;case I:v=11;break t;case P:v=14;break t;case V:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=Ke(v,a,n,d),n.elementType=e,n.type=o,n.lanes=g,n}function Hn(e,n,a,o){return e=Ke(7,e,o,n),e.lanes=a,e}function Jl(e,n,a){return e=Ke(6,e,null,n),e.lanes=a,e}function Dd(e){var n=Ke(18,null,null,0);return n.stateNode=e,n}function tc(e,n,a){return n=Ke(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Rd=new WeakMap;function li(e,n){if(typeof e=="object"&&e!==null){var a=Rd.get(e);return a!==void 0?a:(n={value:e,source:n,stack:ca(n)},Rd.set(e,n),n)}return{value:e,source:n,stack:ca(n)}}var _s=[],Cs=0,qr=null,Ta=0,ci=[],ui=0,ln=null,_i=1,Ci="";function Ui(e,n){_s[Cs++]=Ta,_s[Cs++]=qr,qr=e,Ta=n}function kd(e,n,a){ci[ui++]=_i,ci[ui++]=Ci,ci[ui++]=ln,ln=e;var o=_i;e=Ci;var d=32-$e(o)-1;o&=~(1<<d),a+=1;var g=32-$e(n)+d;if(30<g){var v=d-d%5;g=(o&(1<<v)-1).toString(32),o>>=v,d-=v,_i=1<<32-$e(n)+d|a<<d|o,Ci=g+e}else _i=1<<g|a<<d|o,Ci=e}function ec(e){e.return!==null&&(Ui(e,1),kd(e,1,0))}function ic(e){for(;e===qr;)qr=_s[--Cs],_s[Cs]=null,Ta=_s[--Cs],_s[Cs]=null;for(;e===ln;)ln=ci[--ui],ci[ui]=null,Ci=ci[--ui],ci[ui]=null,_i=ci[--ui],ci[ui]=null}function Od(e,n){ci[ui++]=_i,ci[ui++]=Ci,ci[ui++]=ln,_i=n.id,Ci=n.overflow,ln=e}var Ee=null,Wt=null,Rt=!1,cn=null,hi=!1,nc=Error(s(519));function un(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _a(li(n,e)),nc}function Ld(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[xe]=e,n[Ie]=o,a){case"dialog":_t("cancel",n),_t("close",n);break;case"iframe":case"object":case"embed":_t("load",n);break;case"video":case"audio":for(a=0;a<$a.length;a++)_t($a[a],n);break;case"source":_t("error",n);break;case"img":case"image":case"link":_t("error",n),_t("load",n);break;case"details":_t("toggle",n);break;case"input":_t("invalid",n),Xh(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":_t("invalid",n);break;case"textarea":_t("invalid",n),$h(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||Qg(n.textContent,a)?(o.popover!=null&&(_t("beforetoggle",n),_t("toggle",n)),o.onScroll!=null&&_t("scroll",n),o.onScrollEnd!=null&&_t("scrollend",n),o.onClick!=null&&(n.onclick=Pi),n=!0):n=!1,n||un(e,!0)}function Nd(e){for(Ee=e.return;Ee;)switch(Ee.tag){case 5:case 31:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:Ee=Ee.return}}function Ms(e){if(e!==Ee)return!1;if(!Rt)return Nd(e),Rt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Su(e.type,e.memoizedProps)),a=!a),a&&Wt&&un(e),Nd(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Wt=rp(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Wt=rp(e)}else n===27?(n=Wt,En(e.type)?(e=_u,_u=null,Wt=e):Wt=n):Wt=Ee?fi(e.stateNode.nextSibling):null;return!0}function Gn(){Wt=Ee=null,Rt=!1}function sc(){var e=cn;return e!==null&&(He===null?He=e:He.push.apply(He,e),cn=null),e}function _a(e){cn===null?cn=[e]:cn.push(e)}var ac=R(null),Vn=null,Hi=null;function hn(e,n,a){K(ac,n._currentValue),n._currentValue=a}function Gi(e){e._currentValue=ac.current,H(ac)}function rc(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function oc(e,n,a,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var g=d.dependencies;if(g!==null){var v=d.child;g=g.firstContext;t:for(;g!==null;){var x=g;g=d;for(var M=0;M<n.length;M++)if(x.context===n[M]){g.lanes|=a,x=g.alternate,x!==null&&(x.lanes|=a),rc(g.return,a,e),o||(v=null);break t}g=x.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(s(341));v.lanes|=a,g=v.alternate,g!==null&&(g.lanes|=a),rc(v,a,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Ds(e,n,a,o){e=null;for(var d=n,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var x=d.type;We(d.pendingProps.value,v.value)||(e!==null?e.push(x):e=[x])}}else if(d===O.current){if(v=d.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Ja):e=[Ja])}d=d.return}e!==null&&oc(n,e,a,o),n.flags|=262144}function $r(e){for(e=e.firstContext;e!==null;){if(!We(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Yn(e){Vn=e,Hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Te(e){return Bd(Vn,e)}function Wr(e,n){return Vn===null&&Yn(e),Bd(e,n)}function Bd(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Hi===null){if(e===null)throw Error(s(308));Hi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Hi=Hi.next=n;return a}var f0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},g0=m.unstable_scheduleCallback,p0=m.unstable_NormalPriority,ue={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lc(){return{controller:new f0,data:new Map,refCount:0}}function Ca(e){e.refCount--,e.refCount===0&&g0(p0,function(){e.controller.abort()})}var Ma=null,cc=0,Rs=0,ks=null;function m0(e,n){if(Ma===null){var a=Ma=[];cc=0,Rs=du(),ks={status:"pending",value:void 0,then:function(o){a.push(o)}}}return cc++,n.then(zd,zd),n}function zd(){if(--cc===0&&Ma!==null){ks!==null&&(ks.status="fulfilled");var e=Ma;Ma=null,Rs=0,ks=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function y0(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var d=0;d<a.length;d++)(0,a[d])(n)},function(d){for(o.status="rejected",o.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),o}var Id=L.S;L.S=function(e,n){Sg=Le(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&m0(e,n),Id!==null&&Id(e,n)};var Xn=R(null);function uc(){var e=Xn.current;return e!==null?e:qt.pooledCache}function Kr(e,n){n===null?K(Xn,Xn.current):K(Xn,n.pool)}function Pd(){var e=uc();return e===null?null:{parent:ue._currentValue,pool:e}}var Os=Error(s(460)),hc=Error(s(474)),Qr=Error(s(542)),Zr={then:function(){}};function Fd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function jd(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Pi,Pi),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Hd(e),e;default:if(typeof n.status=="string")n.then(Pi,Pi);else{if(e=qt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=o}},function(o){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Hd(e),e}throw $n=n,Os}}function qn(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?($n=a,Os):a}}var $n=null;function Ud(){if($n===null)throw Error(s(459));var e=$n;return $n=null,e}function Hd(e){if(e===Os||e===Qr)throw Error(s(483))}var Ls=null,Da=0;function Jr(e){var n=Da;return Da+=1,Ls===null&&(Ls=[]),jd(Ls,e,n)}function Ra(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function to(e,n){throw n.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Gd(e){function n(B,k){if(e){var F=B.deletions;F===null?(B.deletions=[k],B.flags|=16):F.push(k)}}function a(B,k){if(!e)return null;for(;k!==null;)n(B,k),k=k.sibling;return null}function o(B){for(var k=new Map;B!==null;)B.key!==null?k.set(B.key,B):k.set(B.index,B),B=B.sibling;return k}function d(B,k){return B=ji(B,k),B.index=0,B.sibling=null,B}function g(B,k,F){return B.index=F,e?(F=B.alternate,F!==null?(F=F.index,F<k?(B.flags|=67108866,k):F):(B.flags|=67108866,k)):(B.flags|=1048576,k)}function v(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function x(B,k,F,$){return k===null||k.tag!==6?(k=Jl(F,B.mode,$),k.return=B,k):(k=d(k,F),k.return=B,k)}function M(B,k,F,$){var lt=F.type;return lt===S?q(B,k,F.props.children,$,F.key):k!==null&&(k.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===V&&qn(lt)===k.type)?(k=d(k,F.props),Ra(k,F),k.return=B,k):(k=Xr(F.type,F.key,F.props,null,B.mode,$),Ra(k,F),k.return=B,k)}function j(B,k,F,$){return k===null||k.tag!==4||k.stateNode.containerInfo!==F.containerInfo||k.stateNode.implementation!==F.implementation?(k=tc(F,B.mode,$),k.return=B,k):(k=d(k,F.children||[]),k.return=B,k)}function q(B,k,F,$,lt){return k===null||k.tag!==7?(k=Hn(F,B.mode,$,lt),k.return=B,k):(k=d(k,F),k.return=B,k)}function W(B,k,F){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Jl(""+k,B.mode,F),k.return=B,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case A:return F=Xr(k.type,k.key,k.props,null,B.mode,F),Ra(F,k),F.return=B,F;case w:return k=tc(k,B.mode,F),k.return=B,k;case V:return k=qn(k),W(B,k,F)}if(Dt(k)||ft(k))return k=Hn(k,B.mode,F,null),k.return=B,k;if(typeof k.then=="function")return W(B,Jr(k),F);if(k.$$typeof===C)return W(B,Wr(B,k),F);to(B,k)}return null}function U(B,k,F,$){var lt=k!==null?k.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return lt!==null?null:x(B,k,""+F,$);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===lt?M(B,k,F,$):null;case w:return F.key===lt?j(B,k,F,$):null;case V:return F=qn(F),U(B,k,F,$)}if(Dt(F)||ft(F))return lt!==null?null:q(B,k,F,$,null);if(typeof F.then=="function")return U(B,k,Jr(F),$);if(F.$$typeof===C)return U(B,k,Wr(B,F),$);to(B,F)}return null}function G(B,k,F,$,lt){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return B=B.get(F)||null,x(k,B,""+$,lt);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return B=B.get($.key===null?F:$.key)||null,M(k,B,$,lt);case w:return B=B.get($.key===null?F:$.key)||null,j(k,B,$,lt);case V:return $=qn($),G(B,k,F,$,lt)}if(Dt($)||ft($))return B=B.get(F)||null,q(k,B,$,lt,null);if(typeof $.then=="function")return G(B,k,F,Jr($),lt);if($.$$typeof===C)return G(B,k,F,Wr(k,$),lt);to(k,$)}return null}function rt(B,k,F,$){for(var lt=null,Lt=null,ot=k,xt=k=0,Mt=null;ot!==null&&xt<F.length;xt++){ot.index>xt?(Mt=ot,ot=null):Mt=ot.sibling;var Nt=U(B,ot,F[xt],$);if(Nt===null){ot===null&&(ot=Mt);break}e&&ot&&Nt.alternate===null&&n(B,ot),k=g(Nt,k,xt),Lt===null?lt=Nt:Lt.sibling=Nt,Lt=Nt,ot=Mt}if(xt===F.length)return a(B,ot),Rt&&Ui(B,xt),lt;if(ot===null){for(;xt<F.length;xt++)ot=W(B,F[xt],$),ot!==null&&(k=g(ot,k,xt),Lt===null?lt=ot:Lt.sibling=ot,Lt=ot);return Rt&&Ui(B,xt),lt}for(ot=o(ot);xt<F.length;xt++)Mt=G(ot,B,xt,F[xt],$),Mt!==null&&(e&&Mt.alternate!==null&&ot.delete(Mt.key===null?xt:Mt.key),k=g(Mt,k,xt),Lt===null?lt=Mt:Lt.sibling=Mt,Lt=Mt);return e&&ot.forEach(function(Dn){return n(B,Dn)}),Rt&&Ui(B,xt),lt}function dt(B,k,F,$){if(F==null)throw Error(s(151));for(var lt=null,Lt=null,ot=k,xt=k=0,Mt=null,Nt=F.next();ot!==null&&!Nt.done;xt++,Nt=F.next()){ot.index>xt?(Mt=ot,ot=null):Mt=ot.sibling;var Dn=U(B,ot,Nt.value,$);if(Dn===null){ot===null&&(ot=Mt);break}e&&ot&&Dn.alternate===null&&n(B,ot),k=g(Dn,k,xt),Lt===null?lt=Dn:Lt.sibling=Dn,Lt=Dn,ot=Mt}if(Nt.done)return a(B,ot),Rt&&Ui(B,xt),lt;if(ot===null){for(;!Nt.done;xt++,Nt=F.next())Nt=W(B,Nt.value,$),Nt!==null&&(k=g(Nt,k,xt),Lt===null?lt=Nt:Lt.sibling=Nt,Lt=Nt);return Rt&&Ui(B,xt),lt}for(ot=o(ot);!Nt.done;xt++,Nt=F.next())Nt=G(ot,B,xt,Nt.value,$),Nt!==null&&(e&&Nt.alternate!==null&&ot.delete(Nt.key===null?xt:Nt.key),k=g(Nt,k,xt),Lt===null?lt=Nt:Lt.sibling=Nt,Lt=Nt);return e&&ot.forEach(function(Mb){return n(B,Mb)}),Rt&&Ui(B,xt),lt}function Yt(B,k,F,$){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:t:{for(var lt=F.key;k!==null;){if(k.key===lt){if(lt=F.type,lt===S){if(k.tag===7){a(B,k.sibling),$=d(k,F.props.children),$.return=B,B=$;break t}}else if(k.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===V&&qn(lt)===k.type){a(B,k.sibling),$=d(k,F.props),Ra($,F),$.return=B,B=$;break t}a(B,k);break}else n(B,k);k=k.sibling}F.type===S?($=Hn(F.props.children,B.mode,$,F.key),$.return=B,B=$):($=Xr(F.type,F.key,F.props,null,B.mode,$),Ra($,F),$.return=B,B=$)}return v(B);case w:t:{for(lt=F.key;k!==null;){if(k.key===lt)if(k.tag===4&&k.stateNode.containerInfo===F.containerInfo&&k.stateNode.implementation===F.implementation){a(B,k.sibling),$=d(k,F.children||[]),$.return=B,B=$;break t}else{a(B,k);break}else n(B,k);k=k.sibling}$=tc(F,B.mode,$),$.return=B,B=$}return v(B);case V:return F=qn(F),Yt(B,k,F,$)}if(Dt(F))return rt(B,k,F,$);if(ft(F)){if(lt=ft(F),typeof lt!="function")throw Error(s(150));return F=lt.call(F),dt(B,k,F,$)}if(typeof F.then=="function")return Yt(B,k,Jr(F),$);if(F.$$typeof===C)return Yt(B,k,Wr(B,F),$);to(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,k!==null&&k.tag===6?(a(B,k.sibling),$=d(k,F),$.return=B,B=$):(a(B,k),$=Jl(F,B.mode,$),$.return=B,B=$),v(B)):a(B,k)}return function(B,k,F,$){try{Da=0;var lt=Yt(B,k,F,$);return Ls=null,lt}catch(ot){if(ot===Os||ot===Qr)throw ot;var Lt=Ke(29,ot,null,B.mode);return Lt.lanes=$,Lt.return=B,Lt}}}var Wn=Gd(!0),Vd=Gd(!1),dn=!1;function dc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function fn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function gn(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Bt&2)!==0){var d=o.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),o.pending=n,n=Yr(e),Cd(e,null,a),n}return Vr(e,o,n,a),Yr(e)}function ka(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Bh(e,a)}}function gc(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?d=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?d=g=n:g=g.next=n}else d=g=n;a={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var pc=!1;function Oa(){if(pc){var e=ks;if(e!==null)throw e}}function La(e,n,a,o){pc=!1;var d=e.updateQueue;dn=!1;var g=d.firstBaseUpdate,v=d.lastBaseUpdate,x=d.shared.pending;if(x!==null){d.shared.pending=null;var M=x,j=M.next;M.next=null,v===null?g=j:v.next=j,v=M;var q=e.alternate;q!==null&&(q=q.updateQueue,x=q.lastBaseUpdate,x!==v&&(x===null?q.firstBaseUpdate=j:x.next=j,q.lastBaseUpdate=M))}if(g!==null){var W=d.baseState;v=0,q=j=M=null,x=g;do{var U=x.lane&-536870913,G=U!==x.lane;if(G?(Ct&U)===U:(o&U)===U){U!==0&&U===Rs&&(pc=!0),q!==null&&(q=q.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});t:{var rt=e,dt=x;U=n;var Yt=a;switch(dt.tag){case 1:if(rt=dt.payload,typeof rt=="function"){W=rt.call(Yt,W,U);break t}W=rt;break t;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=dt.payload,U=typeof rt=="function"?rt.call(Yt,W,U):rt,U==null)break t;W=y({},W,U);break t;case 2:dn=!0}}U=x.callback,U!==null&&(e.flags|=64,G&&(e.flags|=8192),G=d.callbacks,G===null?d.callbacks=[U]:G.push(U))}else G={lane:U,tag:x.tag,payload:x.payload,callback:x.callback,next:null},q===null?(j=q=G,M=W):q=q.next=G,v|=U;if(x=x.next,x===null){if(x=d.shared.pending,x===null)break;G=x,x=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);q===null&&(M=W),d.baseState=M,d.firstBaseUpdate=j,d.lastBaseUpdate=q,g===null&&(d.shared.lanes=0),vn|=v,e.lanes=v,e.memoizedState=W}}function Yd(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Xd(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Yd(a[e],n)}var Ns=R(null),eo=R(0);function qd(e,n){e=Zi,K(eo,e),K(Ns,n),Zi=e|n.baseLanes}function mc(){K(eo,Zi),K(Ns,Ns.current)}function yc(){Zi=eo.current,H(Ns),H(eo)}var Qe=R(null),di=null;function pn(e){var n=e.alternate;K(oe,oe.current&1),K(Qe,e),di===null&&(n===null||Ns.current!==null||n.memoizedState!==null)&&(di=e)}function bc(e){K(oe,oe.current),K(Qe,e),di===null&&(di=e)}function $d(e){e.tag===22?(K(oe,oe.current),K(Qe,e),di===null&&(di=e)):mn()}function mn(){K(oe,oe.current),K(Qe,Qe.current)}function Ze(e){H(Qe),di===e&&(di=null),H(oe)}var oe=R(0);function io(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Eu(a)||Tu(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Vi=0,wt=null,Gt=null,he=null,no=!1,Bs=!1,Kn=!1,so=0,Na=0,zs=null,b0=0;function ne(){throw Error(s(321))}function vc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!We(e[a],n[a]))return!1;return!0}function Ac(e,n,a,o,d,g){return Vi=g,wt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,L.H=e===null||e.memoizedState===null?Of:Bc,Kn=!1,g=a(o,d),Kn=!1,Bs&&(g=Kd(n,a,o,d)),Wd(e),g}function Wd(e){L.H=Ia;var n=Gt!==null&&Gt.next!==null;if(Vi=0,he=Gt=wt=null,no=!1,Na=0,zs=null,n)throw Error(s(300));e===null||de||(e=e.dependencies,e!==null&&$r(e)&&(de=!0))}function Kd(e,n,a,o){wt=e;var d=0;do{if(Bs&&(zs=null),Na=0,Bs=!1,25<=d)throw Error(s(301));if(d+=1,he=Gt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}L.H=Lf,g=n(a,o)}while(Bs);return g}function v0(){var e=L.H,n=e.useState()[0];return n=typeof n.then=="function"?Ba(n):n,e=e.useState()[0],(Gt!==null?Gt.memoizedState:null)!==e&&(wt.flags|=1024),n}function Sc(){var e=so!==0;return so=0,e}function wc(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function xc(e){if(no){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}no=!1}Vi=0,he=Gt=wt=null,Bs=!1,Na=so=0,zs=null}function Ne(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?wt.memoizedState=he=e:he=he.next=e,he}function le(){if(Gt===null){var e=wt.alternate;e=e!==null?e.memoizedState:null}else e=Gt.next;var n=he===null?wt.memoizedState:he.next;if(n!==null)he=n,Gt=e;else{if(e===null)throw wt.alternate===null?Error(s(467)):Error(s(310));Gt=e,e={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},he===null?wt.memoizedState=he=e:he=he.next=e}return he}function ao(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ba(e){var n=Na;return Na+=1,zs===null&&(zs=[]),e=jd(zs,e,n),n=wt,(he===null?n.memoizedState:he.next)===null&&(n=n.alternate,L.H=n===null||n.memoizedState===null?Of:Bc),e}function ro(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ba(e);if(e.$$typeof===C)return Te(e)}throw Error(s(438,String(e)))}function Ec(e){var n=null,a=wt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=wt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=ao(),wt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=nt;return n.index++,a}function Yi(e,n){return typeof n=="function"?n(e):n}function oo(e){var n=le();return Tc(n,Gt,e)}function Tc(e,n,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var d=e.baseQueue,g=o.pending;if(g!==null){if(d!==null){var v=d.next;d.next=g.next,g.next=v}n.baseQueue=d=g,o.pending=null}if(g=e.baseState,d===null)e.memoizedState=g;else{n=d.next;var x=v=null,M=null,j=n,q=!1;do{var W=j.lane&-536870913;if(W!==j.lane?(Ct&W)===W:(Vi&W)===W){var U=j.revertLane;if(U===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),W===Rs&&(q=!0);else if((Vi&U)===U){j=j.next,U===Rs&&(q=!0);continue}else W={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},M===null?(x=M=W,v=g):M=M.next=W,wt.lanes|=U,vn|=U;W=j.action,Kn&&a(g,W),g=j.hasEagerState?j.eagerState:a(g,W)}else U={lane:W,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},M===null?(x=M=U,v=g):M=M.next=U,wt.lanes|=W,vn|=W;j=j.next}while(j!==null&&j!==n);if(M===null?v=g:M.next=x,!We(g,e.memoizedState)&&(de=!0,q&&(a=ks,a!==null)))throw a;e.memoizedState=g,e.baseState=v,e.baseQueue=M,o.lastRenderedState=g}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function _c(e){var n=le(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,d=a.pending,g=n.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do g=e(g,v.action),v=v.next;while(v!==d);We(g,n.memoizedState)||(de=!0),n.memoizedState=g,n.baseQueue===null&&(n.baseState=g),a.lastRenderedState=g}return[g,o]}function Qd(e,n,a){var o=wt,d=le(),g=Rt;if(g){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!We((Gt||d).memoizedState,a);if(v&&(d.memoizedState=a,de=!0),d=d.queue,Dc(tf.bind(null,o,d,e),[e]),d.getSnapshot!==n||v||he!==null&&he.memoizedState.tag&1){if(o.flags|=2048,Is(9,{destroy:void 0},Jd.bind(null,o,d,a,n),null),qt===null)throw Error(s(349));g||(Vi&127)!==0||Zd(o,n,a)}return a}function Zd(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=wt.updateQueue,n===null?(n=ao(),wt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Jd(e,n,a,o){n.value=a,n.getSnapshot=o,ef(n)&&nf(e)}function tf(e,n,a){return a(function(){ef(n)&&nf(e)})}function ef(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!We(e,a)}catch{return!0}}function nf(e){var n=Un(e,2);n!==null&&Ge(n,e,2)}function Cc(e){var n=Ne();if(typeof e=="function"){var a=e;if(e=a(),Kn){an(!0);try{a()}finally{an(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:e},n}function sf(e,n,a,o){return e.baseState=a,Tc(e,Gt,typeof o=="function"?o:Yi)}function A0(e,n,a,o,d){if(uo(e))throw Error(s(485));if(e=n.action,e!==null){var g={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){g.listeners.push(v)}};L.T!==null?a(!0):g.isTransition=!1,o(g),a=n.pending,a===null?(g.next=n.pending=g,af(n,g)):(g.next=a.next,n.pending=a.next=g)}}function af(e,n){var a=n.action,o=n.payload,d=e.state;if(n.isTransition){var g=L.T,v={};L.T=v;try{var x=a(d,o),M=L.S;M!==null&&M(v,x),rf(e,n,x)}catch(j){Mc(e,n,j)}finally{g!==null&&v.types!==null&&(g.types=v.types),L.T=g}}else try{g=a(d,o),rf(e,n,g)}catch(j){Mc(e,n,j)}}function rf(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){of(e,n,o)},function(o){return Mc(e,n,o)}):of(e,n,a)}function of(e,n,a){n.status="fulfilled",n.value=a,lf(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,af(e,a)))}function Mc(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,lf(n),n=n.next;while(n!==o)}e.action=null}function lf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function cf(e,n){return n}function uf(e,n){if(Rt){var a=qt.formState;if(a!==null){t:{var o=wt;if(Rt){if(Wt){e:{for(var d=Wt,g=hi;d.nodeType!==8;){if(!g){d=null;break e}if(d=fi(d.nextSibling),d===null){d=null;break e}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Wt=fi(d.nextSibling),o=d.data==="F!";break t}}un(o)}o=!1}o&&(n=a[0])}}return a=Ne(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cf,lastRenderedState:n},a.queue=o,a=Df.bind(null,wt,o),o.dispatch=a,o=Cc(!1),g=Nc.bind(null,wt,!1,o.queue),o=Ne(),d={state:n,dispatch:null,action:e,pending:null},o.queue=d,a=A0.bind(null,wt,d,g,a),d.dispatch=a,o.memoizedState=e,[n,a,!1]}function hf(e){var n=le();return df(n,Gt,e)}function df(e,n,a){if(n=Tc(e,n,cf)[0],e=oo(Yi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Ba(n)}catch(v){throw v===Os?Qr:v}else o=n;n=le();var d=n.queue,g=d.dispatch;return a!==n.memoizedState&&(wt.flags|=2048,Is(9,{destroy:void 0},S0.bind(null,d,a),null)),[o,g,e]}function S0(e,n){e.action=n}function ff(e){var n=le(),a=Gt;if(a!==null)return df(n,a,e);le(),n=n.memoizedState,a=le();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function Is(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=wt.updateQueue,n===null&&(n=ao(),wt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function gf(){return le().memoizedState}function lo(e,n,a,o){var d=Ne();wt.flags|=e,d.memoizedState=Is(1|n,{destroy:void 0},a,o===void 0?null:o)}function co(e,n,a,o){var d=le();o=o===void 0?null:o;var g=d.memoizedState.inst;Gt!==null&&o!==null&&vc(o,Gt.memoizedState.deps)?d.memoizedState=Is(n,g,a,o):(wt.flags|=e,d.memoizedState=Is(1|n,g,a,o))}function pf(e,n){lo(8390656,8,e,n)}function Dc(e,n){co(2048,8,e,n)}function w0(e){wt.flags|=4;var n=wt.updateQueue;if(n===null)n=ao(),wt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function mf(e){var n=le().memoizedState;return w0({ref:n,nextImpl:e}),function(){if((Bt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function yf(e,n){return co(4,2,e,n)}function bf(e,n){return co(4,4,e,n)}function vf(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Af(e,n,a){a=a!=null?a.concat([e]):null,co(4,4,vf.bind(null,n,e),a)}function Rc(){}function Sf(e,n){var a=le();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&vc(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function wf(e,n){var a=le();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&vc(n,o[1]))return o[0];if(o=e(),Kn){an(!0);try{e()}finally{an(!1)}}return a.memoizedState=[o,n],o}function kc(e,n,a){return a===void 0||(Vi&1073741824)!==0&&(Ct&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=xg(),wt.lanes|=e,vn|=e,a)}function xf(e,n,a,o){return We(a,n)?a:Ns.current!==null?(e=kc(e,a,o),We(e,n)||(de=!0),e):(Vi&42)===0||(Vi&1073741824)!==0&&(Ct&261930)===0?(de=!0,e.memoizedState=a):(e=xg(),wt.lanes|=e,vn|=e,n)}function Ef(e,n,a,o,d){var g=Y.p;Y.p=g!==0&&8>g?g:8;var v=L.T,x={};L.T=x,Nc(e,!1,n,a);try{var M=d(),j=L.S;if(j!==null&&j(x,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var q=y0(M,o);za(e,n,q,ei(e))}else za(e,n,o,ei(e))}catch(W){za(e,n,{then:function(){},status:"rejected",reason:W},ei())}finally{Y.p=g,v!==null&&x.types!==null&&(v.types=x.types),L.T=v}}function x0(){}function Oc(e,n,a,o){if(e.tag!==5)throw Error(s(476));var d=Tf(e).queue;Ef(e,d,n,tt,a===null?x0:function(){return _f(e),a(o)})}function Tf(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:tt},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function _f(e){var n=Tf(e);n.next===null&&(n=e.alternate.memoizedState),za(e,n.next.queue,{},ei())}function Lc(){return Te(Ja)}function Cf(){return le().memoizedState}function Mf(){return le().memoizedState}function E0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=ei();e=fn(a);var o=gn(n,e,a);o!==null&&(Ge(o,n,a),ka(o,n,a)),n={cache:lc()},e.payload=n;return}n=n.return}}function T0(e,n,a){var o=ei();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},uo(e)?Rf(n,a):(a=Ql(e,n,a,o),a!==null&&(Ge(a,e,o),kf(a,n,o)))}function Df(e,n,a){var o=ei();za(e,n,a,o)}function za(e,n,a,o){var d={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(uo(e))Rf(n,d);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=n.lastRenderedReducer,g!==null))try{var v=n.lastRenderedState,x=g(v,a);if(d.hasEagerState=!0,d.eagerState=x,We(x,v))return Vr(e,n,d,0),qt===null&&Gr(),!1}catch{}if(a=Ql(e,n,d,o),a!==null)return Ge(a,e,o),kf(a,n,o),!0}return!1}function Nc(e,n,a,o){if(o={lane:2,revertLane:du(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},uo(e)){if(n)throw Error(s(479))}else n=Ql(e,a,o,2),n!==null&&Ge(n,e,2)}function uo(e){var n=e.alternate;return e===wt||n!==null&&n===wt}function Rf(e,n){Bs=no=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function kf(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Bh(e,a)}}var Ia={readContext:Te,use:ro,useCallback:ne,useContext:ne,useEffect:ne,useImperativeHandle:ne,useLayoutEffect:ne,useInsertionEffect:ne,useMemo:ne,useReducer:ne,useRef:ne,useState:ne,useDebugValue:ne,useDeferredValue:ne,useTransition:ne,useSyncExternalStore:ne,useId:ne,useHostTransitionStatus:ne,useFormState:ne,useActionState:ne,useOptimistic:ne,useMemoCache:ne,useCacheRefresh:ne};Ia.useEffectEvent=ne;var Of={readContext:Te,use:ro,useCallback:function(e,n){return Ne().memoizedState=[e,n===void 0?null:n],e},useContext:Te,useEffect:pf,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,lo(4194308,4,vf.bind(null,n,e),a)},useLayoutEffect:function(e,n){return lo(4194308,4,e,n)},useInsertionEffect:function(e,n){lo(4,2,e,n)},useMemo:function(e,n){var a=Ne();n=n===void 0?null:n;var o=e();if(Kn){an(!0);try{e()}finally{an(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=Ne();if(a!==void 0){var d=a(n);if(Kn){an(!0);try{a(n)}finally{an(!1)}}}else d=n;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=T0.bind(null,wt,e),[o.memoizedState,e]},useRef:function(e){var n=Ne();return e={current:e},n.memoizedState=e},useState:function(e){e=Cc(e);var n=e.queue,a=Df.bind(null,wt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Rc,useDeferredValue:function(e,n){var a=Ne();return kc(a,e,n)},useTransition:function(){var e=Cc(!1);return e=Ef.bind(null,wt,e.queue,!0,!1),Ne().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=wt,d=Ne();if(Rt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),qt===null)throw Error(s(349));(Ct&127)!==0||Zd(o,n,a)}d.memoizedState=a;var g={value:a,getSnapshot:n};return d.queue=g,pf(tf.bind(null,o,g,e),[e]),o.flags|=2048,Is(9,{destroy:void 0},Jd.bind(null,o,g,a,n),null),a},useId:function(){var e=Ne(),n=qt.identifierPrefix;if(Rt){var a=Ci,o=_i;a=(o&~(1<<32-$e(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=so++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=b0++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Lc,useFormState:uf,useActionState:uf,useOptimistic:function(e){var n=Ne();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Nc.bind(null,wt,!0,a),a.dispatch=n,[e,n]},useMemoCache:Ec,useCacheRefresh:function(){return Ne().memoizedState=E0.bind(null,wt)},useEffectEvent:function(e){var n=Ne(),a={impl:e};return n.memoizedState=a,function(){if((Bt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Bc={readContext:Te,use:ro,useCallback:Sf,useContext:Te,useEffect:Dc,useImperativeHandle:Af,useInsertionEffect:yf,useLayoutEffect:bf,useMemo:wf,useReducer:oo,useRef:gf,useState:function(){return oo(Yi)},useDebugValue:Rc,useDeferredValue:function(e,n){var a=le();return xf(a,Gt.memoizedState,e,n)},useTransition:function(){var e=oo(Yi)[0],n=le().memoizedState;return[typeof e=="boolean"?e:Ba(e),n]},useSyncExternalStore:Qd,useId:Cf,useHostTransitionStatus:Lc,useFormState:hf,useActionState:hf,useOptimistic:function(e,n){var a=le();return sf(a,Gt,e,n)},useMemoCache:Ec,useCacheRefresh:Mf};Bc.useEffectEvent=mf;var Lf={readContext:Te,use:ro,useCallback:Sf,useContext:Te,useEffect:Dc,useImperativeHandle:Af,useInsertionEffect:yf,useLayoutEffect:bf,useMemo:wf,useReducer:_c,useRef:gf,useState:function(){return _c(Yi)},useDebugValue:Rc,useDeferredValue:function(e,n){var a=le();return Gt===null?kc(a,e,n):xf(a,Gt.memoizedState,e,n)},useTransition:function(){var e=_c(Yi)[0],n=le().memoizedState;return[typeof e=="boolean"?e:Ba(e),n]},useSyncExternalStore:Qd,useId:Cf,useHostTransitionStatus:Lc,useFormState:ff,useActionState:ff,useOptimistic:function(e,n){var a=le();return Gt!==null?sf(a,Gt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ec,useCacheRefresh:Mf};Lf.useEffectEvent=mf;function zc(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:y({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Ic={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=ei(),d=fn(o);d.payload=n,a!=null&&(d.callback=a),n=gn(e,d,o),n!==null&&(Ge(n,e,o),ka(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=ei(),d=fn(o);d.tag=1,d.payload=n,a!=null&&(d.callback=a),n=gn(e,d,o),n!==null&&(Ge(n,e,o),ka(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=ei(),o=fn(a);o.tag=2,n!=null&&(o.callback=n),n=gn(e,o,a),n!==null&&(Ge(n,e,a),ka(n,e,a))}};function Nf(e,n,a,o,d,g,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,g,v):n.prototype&&n.prototype.isPureReactComponent?!xa(a,o)||!xa(d,g):!0}function Bf(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Ic.enqueueReplaceState(n,n.state,null)}function Qn(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=y({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function zf(e){Hr(e)}function If(e){console.error(e)}function Pf(e){Hr(e)}function ho(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Ff(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Pc(e,n,a){return a=fn(a),a.tag=3,a.payload={element:null},a.callback=function(){ho(e,n)},a}function jf(e){return e=fn(e),e.tag=3,e}function Uf(e,n,a,o){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;e.payload=function(){return d(g)},e.callback=function(){Ff(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Ff(n,a,o),typeof d!="function"&&(An===null?An=new Set([this]):An.add(this));var x=o.stack;this.componentDidCatch(o.value,{componentStack:x!==null?x:""})})}function _0(e,n,a,o,d){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Ds(n,a,d,!0),a=Qe.current,a!==null){switch(a.tag){case 31:case 13:return di===null?Eo():a.alternate===null&&se===0&&(se=3),a.flags&=-257,a.flags|=65536,a.lanes=d,o===Zr?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),cu(e,o,d)),!1;case 22:return a.flags|=65536,o===Zr?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),cu(e,o,d)),!1}throw Error(s(435,a.tag))}return cu(e,o,d),Eo(),!1}if(Rt)return n=Qe.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,o!==nc&&(e=Error(s(422),{cause:o}),_a(li(e,a)))):(o!==nc&&(n=Error(s(423),{cause:o}),_a(li(n,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=li(o,a),d=Pc(e.stateNode,o,d),gc(e,d),se!==4&&(se=2)),!1;var g=Error(s(520),{cause:o});if(g=li(g,a),Ya===null?Ya=[g]:Ya.push(g),se!==4&&(se=2),n===null)return!0;o=li(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Pc(a.stateNode,o,e),gc(a,e),!1;case 1:if(n=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(An===null||!An.has(g))))return a.flags|=65536,d&=-d,a.lanes|=d,d=jf(d),Uf(d,e,a,o),gc(a,d),!1}a=a.return}while(a!==null);return!1}var Fc=Error(s(461)),de=!1;function _e(e,n,a,o){n.child=e===null?Vd(n,null,a,o):Wn(n,e.child,a,o)}function Hf(e,n,a,o,d){a=a.render;var g=n.ref;if("ref"in o){var v={};for(var x in o)x!=="ref"&&(v[x]=o[x])}else v=o;return Yn(n),o=Ac(e,n,a,v,g,d),x=Sc(),e!==null&&!de?(wc(e,n,d),Xi(e,n,d)):(Rt&&x&&ec(n),n.flags|=1,_e(e,n,o,d),n.child)}function Gf(e,n,a,o,d){if(e===null){var g=a.type;return typeof g=="function"&&!Zl(g)&&g.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=g,Vf(e,n,g,o,d)):(e=Xr(a.type,null,o,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(g=e.child,!qc(e,d)){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:xa,a(v,o)&&e.ref===n.ref)return Xi(e,n,d)}return n.flags|=1,e=ji(g,o),e.ref=n.ref,e.return=n,n.child=e}function Vf(e,n,a,o,d){if(e!==null){var g=e.memoizedProps;if(xa(g,o)&&e.ref===n.ref)if(de=!1,n.pendingProps=o=g,qc(e,d))(e.flags&131072)!==0&&(de=!0);else return n.lanes=e.lanes,Xi(e,n,d)}return jc(e,n,a,o,d)}function Yf(e,n,a,o){var d=o.children,g=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,e!==null){for(o=n.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~g}else o=0,n.child=null;return Xf(e,n,g,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Kr(n,g!==null?g.cachePool:null),g!==null?qd(n,g):mc(),$d(n);else return o=n.lanes=536870912,Xf(e,n,g!==null?g.baseLanes|a:a,a,o)}else g!==null?(Kr(n,g.cachePool),qd(n,g),mn(),n.memoizedState=null):(e!==null&&Kr(n,null),mc(),mn());return _e(e,n,d,a),n.child}function Pa(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Xf(e,n,a,o,d){var g=uc();return g=g===null?null:{parent:ue._currentValue,pool:g},n.memoizedState={baseLanes:a,cachePool:g},e!==null&&Kr(n,null),mc(),$d(n),e!==null&&Ds(e,n,o,!0),n.childLanes=d,null}function fo(e,n){return n=po({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function qf(e,n,a){return Wn(n,e.child,null,a),e=fo(n,n.pendingProps),e.flags|=2,Ze(n),n.memoizedState=null,e}function C0(e,n,a){var o=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Rt){if(o.mode==="hidden")return e=fo(n,o),n.lanes=536870912,Pa(null,e);if(bc(n),(e=Wt)?(e=ap(e,hi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ln!==null?{id:_i,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=Dd(e),a.return=n,n.child=a,Ee=n,Wt=null)):e=null,e===null)throw un(n);return n.lanes=536870912,null}return fo(n,o)}var g=e.memoizedState;if(g!==null){var v=g.dehydrated;if(bc(n),d)if(n.flags&256)n.flags&=-257,n=qf(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(de||Ds(e,n,a,!1),d=(a&e.childLanes)!==0,de||d){if(o=qt,o!==null&&(v=zh(o,a),v!==0&&v!==g.retryLane))throw g.retryLane=v,Un(e,v),Ge(o,e,v),Fc;Eo(),n=qf(e,n,a)}else e=g.treeContext,Wt=fi(v.nextSibling),Ee=n,Rt=!0,cn=null,hi=!1,e!==null&&Od(n,e),n=fo(n,o),n.flags|=4096;return n}return e=ji(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function go(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function jc(e,n,a,o,d){return Yn(n),a=Ac(e,n,a,o,void 0,d),o=Sc(),e!==null&&!de?(wc(e,n,d),Xi(e,n,d)):(Rt&&o&&ec(n),n.flags|=1,_e(e,n,a,d),n.child)}function $f(e,n,a,o,d,g){return Yn(n),n.updateQueue=null,a=Kd(n,o,a,d),Wd(e),o=Sc(),e!==null&&!de?(wc(e,n,g),Xi(e,n,g)):(Rt&&o&&ec(n),n.flags|=1,_e(e,n,a,g),n.child)}function Wf(e,n,a,o,d){if(Yn(n),n.stateNode===null){var g=Ts,v=a.contextType;typeof v=="object"&&v!==null&&(g=Te(v)),g=new a(o,g),n.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ic,n.stateNode=g,g._reactInternals=n,g=n.stateNode,g.props=o,g.state=n.memoizedState,g.refs={},dc(n),v=a.contextType,g.context=typeof v=="object"&&v!==null?Te(v):Ts,g.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(zc(n,a,v,o),g.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(v=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),v!==g.state&&Ic.enqueueReplaceState(g,g.state,null),La(n,o,g,d),Oa(),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){g=n.stateNode;var x=n.memoizedProps,M=Qn(a,x);g.props=M;var j=g.context,q=a.contextType;v=Ts,typeof q=="object"&&q!==null&&(v=Te(q));var W=a.getDerivedStateFromProps;q=typeof W=="function"||typeof g.getSnapshotBeforeUpdate=="function",x=n.pendingProps!==x,q||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x||j!==v)&&Bf(n,g,o,v),dn=!1;var U=n.memoizedState;g.state=U,La(n,o,g,d),Oa(),j=n.memoizedState,x||U!==j||dn?(typeof W=="function"&&(zc(n,a,W,o),j=n.memoizedState),(M=dn||Nf(n,a,M,o,U,j,v))?(q||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(n.flags|=4194308)):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=j),g.props=o,g.state=j,g.context=v,o=M):(typeof g.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{g=n.stateNode,fc(e,n),v=n.memoizedProps,q=Qn(a,v),g.props=q,W=n.pendingProps,U=g.context,j=a.contextType,M=Ts,typeof j=="object"&&j!==null&&(M=Te(j)),x=a.getDerivedStateFromProps,(j=typeof x=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==W||U!==M)&&Bf(n,g,o,M),dn=!1,U=n.memoizedState,g.state=U,La(n,o,g,d),Oa();var G=n.memoizedState;v!==W||U!==G||dn||e!==null&&e.dependencies!==null&&$r(e.dependencies)?(typeof x=="function"&&(zc(n,a,x,o),G=n.memoizedState),(q=dn||Nf(n,a,q,o,U,G,M)||e!==null&&e.dependencies!==null&&$r(e.dependencies))?(j||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,G,M),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,G,M)),typeof g.componentDidUpdate=="function"&&(n.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=G),g.props=o,g.state=G,g.context=M,o=q):(typeof g.componentDidUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&U===e.memoizedState||(n.flags|=1024),o=!1)}return g=o,go(e,n),o=(n.flags&128)!==0,g||o?(g=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:g.render(),n.flags|=1,e!==null&&o?(n.child=Wn(n,e.child,null,d),n.child=Wn(n,null,a,d)):_e(e,n,a,d),n.memoizedState=g.state,e=n.child):e=Xi(e,n,d),e}function Kf(e,n,a,o){return Gn(),n.flags|=256,_e(e,n,a,o),n.child}var Uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hc(e){return{baseLanes:e,cachePool:Pd()}}function Gc(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=ti),e}function Qf(e,n,a){var o=n.pendingProps,d=!1,g=(n.flags&128)!==0,v;if((v=g)||(v=e!==null&&e.memoizedState===null?!1:(oe.current&2)!==0),v&&(d=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Rt){if(d?pn(n):mn(),(e=Wt)?(e=ap(e,hi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:ln!==null?{id:_i,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=Dd(e),a.return=n,n.child=a,Ee=n,Wt=null)):e=null,e===null)throw un(n);return Tu(e)?n.lanes=32:n.lanes=536870912,null}var x=o.children;return o=o.fallback,d?(mn(),d=n.mode,x=po({mode:"hidden",children:x},d),o=Hn(o,d,a,null),x.return=n,o.return=n,x.sibling=o,n.child=x,o=n.child,o.memoizedState=Hc(a),o.childLanes=Gc(e,v,a),n.memoizedState=Uc,Pa(null,o)):(pn(n),Vc(n,x))}var M=e.memoizedState;if(M!==null&&(x=M.dehydrated,x!==null)){if(g)n.flags&256?(pn(n),n.flags&=-257,n=Yc(e,n,a)):n.memoizedState!==null?(mn(),n.child=e.child,n.flags|=128,n=null):(mn(),x=o.fallback,d=n.mode,o=po({mode:"visible",children:o.children},d),x=Hn(x,d,a,null),x.flags|=2,o.return=n,x.return=n,o.sibling=x,n.child=o,Wn(n,e.child,null,a),o=n.child,o.memoizedState=Hc(a),o.childLanes=Gc(e,v,a),n.memoizedState=Uc,n=Pa(null,o));else if(pn(n),Tu(x)){if(v=x.nextSibling&&x.nextSibling.dataset,v)var j=v.dgst;v=j,o=Error(s(419)),o.stack="",o.digest=v,_a({value:o,source:null,stack:null}),n=Yc(e,n,a)}else if(de||Ds(e,n,a,!1),v=(a&e.childLanes)!==0,de||v){if(v=qt,v!==null&&(o=zh(v,a),o!==0&&o!==M.retryLane))throw M.retryLane=o,Un(e,o),Ge(v,e,o),Fc;Eu(x)||Eo(),n=Yc(e,n,a)}else Eu(x)?(n.flags|=192,n.child=e.child,n=null):(e=M.treeContext,Wt=fi(x.nextSibling),Ee=n,Rt=!0,cn=null,hi=!1,e!==null&&Od(n,e),n=Vc(n,o.children),n.flags|=4096);return n}return d?(mn(),x=o.fallback,d=n.mode,M=e.child,j=M.sibling,o=ji(M,{mode:"hidden",children:o.children}),o.subtreeFlags=M.subtreeFlags&65011712,j!==null?x=ji(j,x):(x=Hn(x,d,a,null),x.flags|=2),x.return=n,o.return=n,o.sibling=x,n.child=o,Pa(null,o),o=n.child,x=e.child.memoizedState,x===null?x=Hc(a):(d=x.cachePool,d!==null?(M=ue._currentValue,d=d.parent!==M?{parent:M,pool:M}:d):d=Pd(),x={baseLanes:x.baseLanes|a,cachePool:d}),o.memoizedState=x,o.childLanes=Gc(e,v,a),n.memoizedState=Uc,Pa(e.child,o)):(pn(n),a=e.child,e=a.sibling,a=ji(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Vc(e,n){return n=po({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function po(e,n){return e=Ke(22,e,null,n),e.lanes=0,e}function Yc(e,n,a){return Wn(n,e.child,null,a),e=Vc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Zf(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),rc(e.return,n,a)}function Xc(e,n,a,o,d,g){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:d,treeForkCount:g}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=a,v.tailMode=d,v.treeForkCount=g)}function Jf(e,n,a){var o=n.pendingProps,d=o.revealOrder,g=o.tail;o=o.children;var v=oe.current,x=(v&2)!==0;if(x?(v=v&1|2,n.flags|=128):v&=1,K(oe,v),_e(e,n,o,a),o=Rt?Ta:0,!x&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zf(e,a,n);else if(e.tag===19)Zf(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=n.child,d=null;a!==null;)e=a.alternate,e!==null&&io(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=n.child,n.child=null):(d=a.sibling,a.sibling=null),Xc(n,!1,d,a,g,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&io(e)===null){n.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}Xc(n,!0,a,null,g,o);break;case"together":Xc(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Xi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),vn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(Ds(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=ji(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=ji(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function qc(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&$r(e)))}function M0(e,n,a){switch(n.tag){case 3:it(n,n.stateNode.containerInfo),hn(n,ue,e.memoizedState.cache),Gn();break;case 27:case 5:vt(n);break;case 4:it(n,n.stateNode.containerInfo);break;case 10:hn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,bc(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(pn(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Qf(e,n,a):(pn(n),e=Xi(e,n,a),e!==null?e.sibling:null);pn(n);break;case 19:var d=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Ds(e,n,a,!1),o=(a&n.childLanes)!==0),d){if(o)return Jf(e,n,a);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),K(oe,oe.current),o)break;return null;case 22:return n.lanes=0,Yf(e,n,a,n.pendingProps);case 24:hn(n,ue,e.memoizedState.cache)}return Xi(e,n,a)}function tg(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)de=!0;else{if(!qc(e,a)&&(n.flags&128)===0)return de=!1,M0(e,n,a);de=(e.flags&131072)!==0}else de=!1,Rt&&(n.flags&1048576)!==0&&kd(n,Ta,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=qn(n.elementType),n.type=e,typeof e=="function")Zl(e)?(o=Qn(e,o),n.tag=1,n=Wf(null,n,e,o,a)):(n.tag=0,n=jc(null,n,e,o,a));else{if(e!=null){var d=e.$$typeof;if(d===I){n.tag=11,n=Hf(null,n,e,o,a);break t}else if(d===P){n.tag=14,n=Gf(null,n,e,o,a);break t}}throw n=ut(e)||e,Error(s(306,n,""))}}return n;case 0:return jc(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,d=Qn(o,n.pendingProps),Wf(e,n,o,d,a);case 3:t:{if(it(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var g=n.memoizedState;d=g.element,fc(e,n),La(n,o,null,a);var v=n.memoizedState;if(o=v.cache,hn(n,ue,o),o!==g.cache&&oc(n,[ue],a,!0),Oa(),o=v.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=g,n.memoizedState=g,n.flags&256){n=Kf(e,n,o,a);break t}else if(o!==d){d=li(Error(s(424)),n),_a(d),n=Kf(e,n,o,a);break t}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Wt=fi(e.firstChild),Ee=n,Rt=!0,cn=null,hi=!0,a=Vd(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Gn(),o===d){n=Xi(e,n,a);break t}_e(e,n,o,a)}n=n.child}return n;case 26:return go(e,n),e===null?(a=hp(n.type,null,n.pendingProps,null))?n.memoizedState=a:Rt||(a=n.type,e=n.pendingProps,o=ko(gt.current).createElement(a),o[xe]=n,o[Ie]=e,Ce(o,a,e),ve(o),n.stateNode=o):n.memoizedState=hp(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return vt(n),e===null&&Rt&&(o=n.stateNode=lp(n.type,n.pendingProps,gt.current),Ee=n,hi=!0,d=Wt,En(n.type)?(_u=d,Wt=fi(o.firstChild)):Wt=d),_e(e,n,n.pendingProps.children,a),go(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Rt&&((d=o=Wt)&&(o=sb(o,n.type,n.pendingProps,hi),o!==null?(n.stateNode=o,Ee=n,Wt=fi(o.firstChild),hi=!1,d=!0):d=!1),d||un(n)),vt(n),d=n.type,g=n.pendingProps,v=e!==null?e.memoizedProps:null,o=g.children,Su(d,g)?o=null:v!==null&&Su(d,v)&&(n.flags|=32),n.memoizedState!==null&&(d=Ac(e,n,v0,null,null,a),Ja._currentValue=d),go(e,n),_e(e,n,o,a),n.child;case 6:return e===null&&Rt&&((e=a=Wt)&&(a=ab(a,n.pendingProps,hi),a!==null?(n.stateNode=a,Ee=n,Wt=null,e=!0):e=!1),e||un(n)),null;case 13:return Qf(e,n,a);case 4:return it(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Wn(n,null,o,a):_e(e,n,o,a),n.child;case 11:return Hf(e,n,n.type,n.pendingProps,a);case 7:return _e(e,n,n.pendingProps,a),n.child;case 8:return _e(e,n,n.pendingProps.children,a),n.child;case 12:return _e(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,hn(n,n.type,o.value),_e(e,n,o.children,a),n.child;case 9:return d=n.type._context,o=n.pendingProps.children,Yn(n),d=Te(d),o=o(d),n.flags|=1,_e(e,n,o,a),n.child;case 14:return Gf(e,n,n.type,n.pendingProps,a);case 15:return Vf(e,n,n.type,n.pendingProps,a);case 19:return Jf(e,n,a);case 31:return C0(e,n,a);case 22:return Yf(e,n,a,n.pendingProps);case 24:return Yn(n),o=Te(ue),e===null?(d=uc(),d===null&&(d=qt,g=lc(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=a),d=g),n.memoizedState={parent:o,cache:d},dc(n),hn(n,ue,d)):((e.lanes&a)!==0&&(fc(e,n),La(n,null,null,a),Oa()),d=e.memoizedState,g=n.memoizedState,d.parent!==o?(d={parent:o,cache:o},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),hn(n,ue,o)):(o=g.cache,hn(n,ue,o),o!==d.cache&&oc(n,[ue],a,!0))),_e(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function qi(e){e.flags|=4}function $c(e,n,a,o,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Cg())e.flags|=8192;else throw $n=Zr,hc}else e.flags&=-16777217}function eg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!mp(n))if(Cg())e.flags|=8192;else throw $n=Zr,hc}function mo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Lh():536870912,e.lanes|=n,Us|=n)}function Fa(e,n){if(!Rt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Kt(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function D0(e,n,a){var o=n.pendingProps;switch(ic(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(n),null;case 1:return Kt(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Gi(ue),J(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ms(n)?qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,sc())),Kt(n),null;case 26:var d=n.type,g=n.memoizedState;return e===null?(qi(n),g!==null?(Kt(n),eg(n,g)):(Kt(n),$c(n,d,null,o,a))):g?g!==e.memoizedState?(qi(n),Kt(n),eg(n,g)):(Kt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&qi(n),Kt(n),$c(n,d,e,o,a)),null;case 27:if($t(n),a=gt.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Kt(n),null}e=et.current,Ms(n)?Ld(n):(e=lp(d,o,a),n.stateNode=e,qi(n))}return Kt(n),null;case 5:if($t(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Kt(n),null}if(g=et.current,Ms(n))Ld(n);else{var v=ko(gt.current);switch(g){case 1:g=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:g=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":g=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":g=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":g=v.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?v.createElement(d,{is:o.is}):v.createElement(d)}}g[xe]=n,g[Ie]=o;t:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)g.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break t;for(;v.sibling===null;){if(v.return===null||v.return===n)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=g;t:switch(Ce(g,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&qi(n)}}return Kt(n),$c(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=gt.current,Ms(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,d=Ee,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[xe]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Qg(e.nodeValue,a)),e||un(n,!0)}else e=ko(e).createTextNode(o),e[xe]=n,n.stateNode=e}return Kt(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=Ms(n),a!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[xe]=n}else Gn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Kt(n),e=!1}else a=sc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Ze(n),n):(Ze(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Kt(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Ms(n),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[xe]=n}else Gn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Kt(n),d=!1}else d=sc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Ze(n),n):(Ze(n),null)}return Ze(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==d&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),mo(n,n.updateQueue),Kt(n),null);case 4:return J(),e===null&&mu(n.stateNode.containerInfo),Kt(n),null;case 10:return Gi(n.type),Kt(n),null;case 19:if(H(oe),o=n.memoizedState,o===null)return Kt(n),null;if(d=(n.flags&128)!==0,g=o.rendering,g===null)if(d)Fa(o,!1);else{if(se!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(g=io(e),g!==null){for(n.flags|=128,Fa(o,!1),e=g.updateQueue,n.updateQueue=e,mo(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Md(a,e),a=a.sibling;return K(oe,oe.current&1|2),Rt&&Ui(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&Le()>So&&(n.flags|=128,d=!0,Fa(o,!1),n.lanes=4194304)}else{if(!d)if(e=io(g),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,mo(n,e),Fa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Rt)return Kt(n),null}else 2*Le()-o.renderingStartTime>So&&a!==536870912&&(n.flags|=128,d=!0,Fa(o,!1),n.lanes=4194304);o.isBackwards?(g.sibling=n.child,n.child=g):(e=o.last,e!==null?e.sibling=g:n.child=g,o.last=g)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Le(),e.sibling=null,a=oe.current,K(oe,d?a&1|2:a&1),Rt&&Ui(n,o.treeForkCount),e):(Kt(n),null);case 22:case 23:return Ze(n),yc(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(Kt(n),n.subtreeFlags&6&&(n.flags|=8192)):Kt(n),a=n.updateQueue,a!==null&&mo(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&H(Xn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Gi(ue),Kt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function R0(e,n){switch(ic(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Gi(ue),J(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return $t(n),null;case 31:if(n.memoizedState!==null){if(Ze(n),n.alternate===null)throw Error(s(340));Gn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Ze(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Gn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return H(oe),null;case 4:return J(),null;case 10:return Gi(n.type),null;case 22:case 23:return Ze(n),yc(),e!==null&&H(Xn),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Gi(ue),null;case 25:return null;default:return null}}function ig(e,n){switch(ic(n),n.tag){case 3:Gi(ue),J();break;case 26:case 27:case 5:$t(n);break;case 4:J();break;case 31:n.memoizedState!==null&&Ze(n);break;case 13:Ze(n);break;case 19:H(oe);break;case 10:Gi(n.type);break;case 22:case 23:Ze(n),yc(),e!==null&&H(Xn);break;case 24:Gi(ue)}}function ja(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var d=o.next;a=d;do{if((a.tag&e)===e){o=void 0;var g=a.create,v=a.inst;o=g(),v.destroy=o}a=a.next}while(a!==d)}}catch(x){Ht(n,n.return,x)}}function yn(e,n,a){try{var o=n.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var g=d.next;o=g;do{if((o.tag&e)===e){var v=o.inst,x=v.destroy;if(x!==void 0){v.destroy=void 0,d=n;var M=a,j=x;try{j()}catch(q){Ht(d,M,q)}}}o=o.next}while(o!==g)}}catch(q){Ht(n,n.return,q)}}function ng(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Xd(n,a)}catch(o){Ht(e,e.return,o)}}}function sg(e,n,a){a.props=Qn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Ht(e,n,o)}}function Ua(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(d){Ht(e,n,d)}}function Mi(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(d){Ht(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Ht(e,n,d)}else a.current=null}function ag(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(d){Ht(e,e.return,d)}}function Wc(e,n,a){try{var o=e.stateNode;Z0(o,e.type,a,n),o[Ie]=n}catch(d){Ht(e,e.return,d)}}function rg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&En(e.type)||e.tag===4}function Kc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||rg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&En(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qc(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Pi));else if(o!==4&&(o===27&&En(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Qc(e,n,a),e=e.sibling;e!==null;)Qc(e,n,a),e=e.sibling}function yo(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&En(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(yo(e,n,a),e=e.sibling;e!==null;)yo(e,n,a),e=e.sibling}function og(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);Ce(n,o,a),n[xe]=e,n[Ie]=a}catch(g){Ht(e,e.return,g)}}var $i=!1,fe=!1,Zc=!1,lg=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function k0(e,n){if(e=e.containerInfo,vu=Po,e=vd(e),Yl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var d=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break t}var v=0,x=-1,M=-1,j=0,q=0,W=e,U=null;e:for(;;){for(var G;W!==a||d!==0&&W.nodeType!==3||(x=v+d),W!==g||o!==0&&W.nodeType!==3||(M=v+o),W.nodeType===3&&(v+=W.nodeValue.length),(G=W.firstChild)!==null;)U=W,W=G;for(;;){if(W===e)break e;if(U===a&&++j===d&&(x=v),U===g&&++q===o&&(M=v),(G=W.nextSibling)!==null)break;W=U,U=W.parentNode}W=G}a=x===-1||M===-1?null:{start:x,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Au={focusedElem:e,selectionRange:a},Po=!1,Ae=n;Ae!==null;)if(n=Ae,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Ae=e;else for(;Ae!==null;){switch(n=Ae,g=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=n,d=g.memoizedProps,g=g.memoizedState,o=a.stateNode;try{var rt=Qn(a.type,d);e=o.getSnapshotBeforeUpdate(rt,g),o.__reactInternalSnapshotBeforeUpdate=e}catch(dt){Ht(a,a.return,dt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)xu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Ae=e;break}Ae=n.return}}function cg(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ki(e,a),o&4&&ja(5,a);break;case 1:if(Ki(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Ht(a,a.return,v)}else{var d=Qn(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ht(a,a.return,v)}}o&64&&ng(a),o&512&&Ua(a,a.return);break;case 3:if(Ki(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Xd(e,n)}catch(v){Ht(a,a.return,v)}}break;case 27:n===null&&o&4&&og(a);case 26:case 5:Ki(e,a),n===null&&o&4&&ag(a),o&512&&Ua(a,a.return);break;case 12:Ki(e,a);break;case 31:Ki(e,a),o&4&&dg(e,a);break;case 13:Ki(e,a),o&4&&fg(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=j0.bind(null,a),rb(e,a))));break;case 22:if(o=a.memoizedState!==null||$i,!o){n=n!==null&&n.memoizedState!==null||fe,d=$i;var g=fe;$i=o,(fe=n)&&!g?Qi(e,a,(a.subtreeFlags&8772)!==0):Ki(e,a),$i=d,fe=g}break;case 30:break;default:Ki(e,a)}}function ug(e){var n=e.alternate;n!==null&&(e.alternate=null,ug(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ml(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qt=null,Fe=!1;function Wi(e,n,a){for(a=a.child;a!==null;)hg(e,n,a),a=a.sibling}function hg(e,n,a){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Bn,a)}catch{}switch(a.tag){case 26:fe||Mi(a,n),Wi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fe||Mi(a,n);var o=Qt,d=Fe;En(a.type)&&(Qt=a.stateNode,Fe=!1),Wi(e,n,a),Ka(a.stateNode),Qt=o,Fe=d;break;case 5:fe||Mi(a,n);case 6:if(o=Qt,d=Fe,Qt=null,Wi(e,n,a),Qt=o,Fe=d,Qt!==null)if(Fe)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(a.stateNode)}catch(g){Ht(a,n,g)}else try{Qt.removeChild(a.stateNode)}catch(g){Ht(a,n,g)}break;case 18:Qt!==null&&(Fe?(e=Qt,np(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ws(e)):np(Qt,a.stateNode));break;case 4:o=Qt,d=Fe,Qt=a.stateNode.containerInfo,Fe=!0,Wi(e,n,a),Qt=o,Fe=d;break;case 0:case 11:case 14:case 15:yn(2,a,n),fe||yn(4,a,n),Wi(e,n,a);break;case 1:fe||(Mi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&sg(a,n,o)),Wi(e,n,a);break;case 21:Wi(e,n,a);break;case 22:fe=(o=fe)||a.memoizedState!==null,Wi(e,n,a),fe=o;break;default:Wi(e,n,a)}}function dg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ws(e)}catch(a){Ht(n,n.return,a)}}}function fg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ws(e)}catch(a){Ht(n,n.return,a)}}function O0(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new lg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new lg),n;default:throw Error(s(435,e.tag))}}function bo(e,n){var a=O0(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var d=U0.bind(null,e,o);o.then(d,d)}})}function je(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var d=a[o],g=e,v=n,x=v;t:for(;x!==null;){switch(x.tag){case 27:if(En(x.type)){Qt=x.stateNode,Fe=!1;break t}break;case 5:Qt=x.stateNode,Fe=!1;break t;case 3:case 4:Qt=x.stateNode.containerInfo,Fe=!0;break t}x=x.return}if(Qt===null)throw Error(s(160));hg(g,v,d),Qt=null,Fe=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)gg(n,e),n=n.sibling}var Si=null;function gg(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:je(n,e),Ue(e),o&4&&(yn(3,e,e.return),ja(3,e),yn(5,e,e.return));break;case 1:je(n,e),Ue(e),o&512&&(fe||a===null||Mi(a,a.return)),o&64&&$i&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var d=Si;if(je(n,e),Ue(e),o&512&&(fe||a===null||Mi(a,a.return)),o&4){var g=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,d=d.ownerDocument||d;e:switch(o){case"title":g=d.getElementsByTagName("title")[0],(!g||g[ga]||g[xe]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(o),d.head.insertBefore(g,d.querySelector("head > title"))),Ce(g,o,a),g[xe]=e,ve(g),o=g;break t;case"link":var v=gp("link","href",d).get(o+(a.href||""));if(v){for(var x=0;x<v.length;x++)if(g=v[x],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(x,1);break e}}g=d.createElement(o),Ce(g,o,a),d.head.appendChild(g);break;case"meta":if(v=gp("meta","content",d).get(o+(a.content||""))){for(x=0;x<v.length;x++)if(g=v[x],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(x,1);break e}}g=d.createElement(o),Ce(g,o,a),d.head.appendChild(g);break;default:throw Error(s(468,o))}g[xe]=e,ve(g),o=g}e.stateNode=o}else pp(d,e.type,e.stateNode);else e.stateNode=fp(d,o,e.memoizedProps);else g!==o?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,o===null?pp(d,e.type,e.stateNode):fp(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Wc(e,e.memoizedProps,a.memoizedProps)}break;case 27:je(n,e),Ue(e),o&512&&(fe||a===null||Mi(a,a.return)),a!==null&&o&4&&Wc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(je(n,e),Ue(e),o&512&&(fe||a===null||Mi(a,a.return)),e.flags&32){d=e.stateNode;try{bs(d,"")}catch(rt){Ht(e,e.return,rt)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,Wc(e,d,a!==null?a.memoizedProps:d)),o&1024&&(Zc=!0);break;case 6:if(je(n,e),Ue(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(rt){Ht(e,e.return,rt)}}break;case 3:if(No=null,d=Si,Si=Oo(n.containerInfo),je(n,e),Si=d,Ue(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Ws(n.containerInfo)}catch(rt){Ht(e,e.return,rt)}Zc&&(Zc=!1,pg(e));break;case 4:o=Si,Si=Oo(e.stateNode.containerInfo),je(n,e),Ue(e),Si=o;break;case 12:je(n,e),Ue(e);break;case 31:je(n,e),Ue(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,bo(e,o)));break;case 13:je(n,e),Ue(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ao=Le()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,bo(e,o)));break;case 22:d=e.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,j=$i,q=fe;if($i=j||d,fe=q||M,je(n,e),fe=q,$i=j,Ue(e),o&8192)t:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(a===null||M||$i||fe||Zn(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){M=a=n;try{if(g=M.stateNode,d)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{x=M.stateNode;var W=M.memoizedProps.style,U=W!=null&&W.hasOwnProperty("display")?W.display:null;x.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(rt){Ht(M,M.return,rt)}}}else if(n.tag===6){if(a===null){M=n;try{M.stateNode.nodeValue=d?"":M.memoizedProps}catch(rt){Ht(M,M.return,rt)}}}else if(n.tag===18){if(a===null){M=n;try{var G=M.stateNode;d?sp(G,!0):sp(M.stateNode,!1)}catch(rt){Ht(M,M.return,rt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,bo(e,a))));break;case 19:je(n,e),Ue(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,bo(e,o)));break;case 30:break;case 21:break;default:je(n,e),Ue(e)}}function Ue(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(rg(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,g=Kc(e);yo(e,g,d);break;case 5:var v=a.stateNode;a.flags&32&&(bs(v,""),a.flags&=-33);var x=Kc(e);yo(e,x,v);break;case 3:case 4:var M=a.stateNode.containerInfo,j=Kc(e);Qc(e,j,M);break;default:throw Error(s(161))}}catch(q){Ht(e,e.return,q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function pg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;pg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ki(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)cg(e,n.alternate,n),n=n.sibling}function Zn(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:yn(4,n,n.return),Zn(n);break;case 1:Mi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&sg(n,n.return,a),Zn(n);break;case 27:Ka(n.stateNode);case 26:case 5:Mi(n,n.return),Zn(n);break;case 22:n.memoizedState===null&&Zn(n);break;case 30:Zn(n);break;default:Zn(n)}e=e.sibling}}function Qi(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,d=e,g=n,v=g.flags;switch(g.tag){case 0:case 11:case 15:Qi(d,g,a),ja(4,g);break;case 1:if(Qi(d,g,a),o=g,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(j){Ht(o,o.return,j)}if(o=g,d=o.updateQueue,d!==null){var x=o.stateNode;try{var M=d.shared.hiddenCallbacks;if(M!==null)for(d.shared.hiddenCallbacks=null,d=0;d<M.length;d++)Yd(M[d],x)}catch(j){Ht(o,o.return,j)}}a&&v&64&&ng(g),Ua(g,g.return);break;case 27:og(g);case 26:case 5:Qi(d,g,a),a&&o===null&&v&4&&ag(g),Ua(g,g.return);break;case 12:Qi(d,g,a);break;case 31:Qi(d,g,a),a&&v&4&&dg(d,g);break;case 13:Qi(d,g,a),a&&v&4&&fg(d,g);break;case 22:g.memoizedState===null&&Qi(d,g,a),Ua(g,g.return);break;case 30:break;default:Qi(d,g,a)}n=n.sibling}}function Jc(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ca(a))}function tu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ca(e))}function wi(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)mg(e,n,a,o),n=n.sibling}function mg(e,n,a,o){var d=n.flags;switch(n.tag){case 0:case 11:case 15:wi(e,n,a,o),d&2048&&ja(9,n);break;case 1:wi(e,n,a,o);break;case 3:wi(e,n,a,o),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ca(e)));break;case 12:if(d&2048){wi(e,n,a,o),e=n.stateNode;try{var g=n.memoizedProps,v=g.id,x=g.onPostCommit;typeof x=="function"&&x(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){Ht(n,n.return,M)}}else wi(e,n,a,o);break;case 31:wi(e,n,a,o);break;case 13:wi(e,n,a,o);break;case 23:break;case 22:g=n.stateNode,v=n.alternate,n.memoizedState!==null?g._visibility&2?wi(e,n,a,o):Ha(e,n):g._visibility&2?wi(e,n,a,o):(g._visibility|=2,Ps(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),d&2048&&Jc(v,n);break;case 24:wi(e,n,a,o),d&2048&&tu(n.alternate,n);break;default:wi(e,n,a,o)}}function Ps(e,n,a,o,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var g=e,v=n,x=a,M=o,j=v.flags;switch(v.tag){case 0:case 11:case 15:Ps(g,v,x,M,d),ja(8,v);break;case 23:break;case 22:var q=v.stateNode;v.memoizedState!==null?q._visibility&2?Ps(g,v,x,M,d):Ha(g,v):(q._visibility|=2,Ps(g,v,x,M,d)),d&&j&2048&&Jc(v.alternate,v);break;case 24:Ps(g,v,x,M,d),d&&j&2048&&tu(v.alternate,v);break;default:Ps(g,v,x,M,d)}n=n.sibling}}function Ha(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,d=o.flags;switch(o.tag){case 22:Ha(a,o),d&2048&&Jc(o.alternate,o);break;case 24:Ha(a,o),d&2048&&tu(o.alternate,o);break;default:Ha(a,o)}n=n.sibling}}var Ga=8192;function Fs(e,n,a){if(e.subtreeFlags&Ga)for(e=e.child;e!==null;)yg(e,n,a),e=e.sibling}function yg(e,n,a){switch(e.tag){case 26:Fs(e,n,a),e.flags&Ga&&e.memoizedState!==null&&bb(a,Si,e.memoizedState,e.memoizedProps);break;case 5:Fs(e,n,a);break;case 3:case 4:var o=Si;Si=Oo(e.stateNode.containerInfo),Fs(e,n,a),Si=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Ga,Ga=16777216,Fs(e,n,a),Ga=o):Fs(e,n,a));break;default:Fs(e,n,a)}}function bg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Va(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Ae=o,Ag(o,e)}bg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vg(e),e=e.sibling}function vg(e){switch(e.tag){case 0:case 11:case 15:Va(e),e.flags&2048&&yn(9,e,e.return);break;case 3:Va(e);break;case 12:Va(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,vo(e)):Va(e);break;default:Va(e)}}function vo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Ae=o,Ag(o,e)}bg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:yn(8,n,n.return),vo(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,vo(n));break;default:vo(n)}e=e.sibling}}function Ag(e,n){for(;Ae!==null;){var a=Ae;switch(a.tag){case 0:case 11:case 15:yn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ca(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ae=o;else t:for(a=e;Ae!==null;){o=Ae;var d=o.sibling,g=o.return;if(ug(o),o===a){Ae=null;break t}if(d!==null){d.return=g,Ae=d;break t}Ae=g}}}var L0={getCacheForType:function(e){var n=Te(ue),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Te(ue).controller.signal}},N0=typeof WeakMap=="function"?WeakMap:Map,Bt=0,qt=null,Tt=null,Ct=0,Ut=0,Je=null,bn=!1,js=!1,eu=!1,Zi=0,se=0,vn=0,Jn=0,iu=0,ti=0,Us=0,Ya=null,He=null,nu=!1,Ao=0,Sg=0,So=1/0,wo=null,An=null,me=0,Sn=null,Hs=null,Ji=0,su=0,au=null,wg=null,Xa=0,ru=null;function ei(){return(Bt&2)!==0&&Ct!==0?Ct&-Ct:L.T!==null?du():Ih()}function xg(){if(ti===0)if((Ct&536870912)===0||Rt){var e=Dr;Dr<<=1,(Dr&3932160)===0&&(Dr=262144),ti=e}else ti=536870912;return e=Qe.current,e!==null&&(e.flags|=32),ti}function Ge(e,n,a){(e===qt&&(Ut===2||Ut===9)||e.cancelPendingCommit!==null)&&(Gs(e,0),wn(e,Ct,ti,!1)),fa(e,a),((Bt&2)===0||e!==qt)&&(e===qt&&((Bt&2)===0&&(Jn|=a),se===4&&wn(e,Ct,ti,!1)),Di(e))}function Eg(e,n,a){if((Bt&6)!==0)throw Error(s(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||da(e,n),d=o?I0(e,n):lu(e,n,!0),g=o;do{if(d===0){js&&!o&&wn(e,n,0,!1);break}else{if(a=e.current.alternate,g&&!B0(a)){d=lu(e,n,!1),g=!1;continue}if(d===2){if(g=n,e.errorRecoveryDisabledLanes&g)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var x=e;d=Ya;var M=x.current.memoizedState.isDehydrated;if(M&&(Gs(x,v).flags|=256),v=lu(x,v,!1),v!==2){if(eu&&!M){x.errorRecoveryDisabledLanes|=g,Jn|=g,d=4;break t}g=He,He=d,g!==null&&(He===null?He=g:He.push.apply(He,g))}d=v}if(g=!1,d!==2)continue}}if(d===1){Gs(e,0),wn(e,n,0,!0);break}t:{switch(o=e,g=d,g){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:wn(o,n,ti,!bn);break t;case 2:He=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(d=Ao+300-Le(),10<d)){if(wn(o,n,ti,!bn),kr(o,0,!0)!==0)break t;Ji=n,o.timeoutHandle=ep(Tg.bind(null,o,a,He,wo,nu,n,ti,Jn,Us,bn,g,"Throttled",-0,0),d);break t}Tg(o,a,He,wo,nu,n,ti,Jn,Us,bn,g,null,-0,0)}}break}while(!0);Di(e)}function Tg(e,n,a,o,d,g,v,x,M,j,q,W,U,G){if(e.timeoutHandle=-1,W=n.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pi},yg(n,g,W);var rt=(g&62914560)===g?Ao-Le():(g&4194048)===g?Sg-Le():0;if(rt=vb(W,rt),rt!==null){Ji=g,e.cancelPendingCommit=rt(Lg.bind(null,e,n,g,a,o,d,v,x,M,q,W,null,U,G)),wn(e,g,v,!j);return}}Lg(e,n,g,a,o,d,v,x,M)}function B0(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var d=a[o],g=d.getSnapshot;d=d.value;try{if(!We(g(),d))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function wn(e,n,a,o){n&=~iu,n&=~Jn,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var d=n;0<d;){var g=31-$e(d),v=1<<g;o[g]=-1,d&=~v}a!==0&&Nh(e,a,n)}function xo(){return(Bt&6)===0?(qa(0),!1):!0}function ou(){if(Tt!==null){if(Ut===0)var e=Tt.return;else e=Tt,Hi=Vn=null,xc(e),Ls=null,Da=0,e=Tt;for(;e!==null;)ig(e.alternate,e),e=e.return;Tt=null}}function Gs(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,eb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ji=0,ou(),qt=e,Tt=a=ji(e.current,null),Ct=n,Ut=0,Je=null,bn=!1,js=da(e,n),eu=!1,Us=ti=iu=Jn=vn=se=0,He=Ya=null,nu=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var d=31-$e(o),g=1<<d;n|=e[d],o&=~g}return Zi=n,Gr(),a}function _g(e,n){wt=null,L.H=Ia,n===Os||n===Qr?(n=Ud(),Ut=3):n===hc?(n=Ud(),Ut=4):Ut=n===Fc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Je=n,Tt===null&&(se=1,ho(e,li(n,e.current)))}function Cg(){var e=Qe.current;return e===null?!0:(Ct&4194048)===Ct?di===null:(Ct&62914560)===Ct||(Ct&536870912)!==0?e===di:!1}function Mg(){var e=L.H;return L.H=Ia,e===null?Ia:e}function Dg(){var e=L.A;return L.A=L0,e}function Eo(){se=4,bn||(Ct&4194048)!==Ct&&Qe.current!==null||(js=!0),(vn&134217727)===0&&(Jn&134217727)===0||qt===null||wn(qt,Ct,ti,!1)}function lu(e,n,a){var o=Bt;Bt|=2;var d=Mg(),g=Dg();(qt!==e||Ct!==n)&&(wo=null,Gs(e,n)),n=!1;var v=se;t:do try{if(Ut!==0&&Tt!==null){var x=Tt,M=Je;switch(Ut){case 8:ou(),v=6;break t;case 3:case 2:case 9:case 6:Qe.current===null&&(n=!0);var j=Ut;if(Ut=0,Je=null,Vs(e,x,M,j),a&&js){v=0;break t}break;default:j=Ut,Ut=0,Je=null,Vs(e,x,M,j)}}z0(),v=se;break}catch(q){_g(e,q)}while(!0);return n&&e.shellSuspendCounter++,Hi=Vn=null,Bt=o,L.H=d,L.A=g,Tt===null&&(qt=null,Ct=0,Gr()),v}function z0(){for(;Tt!==null;)Rg(Tt)}function I0(e,n){var a=Bt;Bt|=2;var o=Mg(),d=Dg();qt!==e||Ct!==n?(wo=null,So=Le()+500,Gs(e,n)):js=da(e,n);t:do try{if(Ut!==0&&Tt!==null){n=Tt;var g=Je;e:switch(Ut){case 1:Ut=0,Je=null,Vs(e,n,g,1);break;case 2:case 9:if(Fd(g)){Ut=0,Je=null,kg(n);break}n=function(){Ut!==2&&Ut!==9||qt!==e||(Ut=7),Di(e)},g.then(n,n);break t;case 3:Ut=7;break t;case 4:Ut=5;break t;case 7:Fd(g)?(Ut=0,Je=null,kg(n)):(Ut=0,Je=null,Vs(e,n,g,7));break;case 5:var v=null;switch(Tt.tag){case 26:v=Tt.memoizedState;case 5:case 27:var x=Tt;if(v?mp(v):x.stateNode.complete){Ut=0,Je=null;var M=x.sibling;if(M!==null)Tt=M;else{var j=x.return;j!==null?(Tt=j,To(j)):Tt=null}break e}}Ut=0,Je=null,Vs(e,n,g,5);break;case 6:Ut=0,Je=null,Vs(e,n,g,6);break;case 8:ou(),se=6;break t;default:throw Error(s(462))}}P0();break}catch(q){_g(e,q)}while(!0);return Hi=Vn=null,L.H=o,L.A=d,Bt=a,Tt!==null?0:(qt=null,Ct=0,Gr(),se)}function P0(){for(;Tt!==null&&!Oe();)Rg(Tt)}function Rg(e){var n=tg(e.alternate,e,Zi);e.memoizedProps=e.pendingProps,n===null?To(e):Tt=n}function kg(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=$f(a,n,n.pendingProps,n.type,void 0,Ct);break;case 11:n=$f(a,n,n.pendingProps,n.type.render,n.ref,Ct);break;case 5:xc(n);default:ig(a,n),n=Tt=Md(n,Zi),n=tg(a,n,Zi)}e.memoizedProps=e.pendingProps,n===null?To(e):Tt=n}function Vs(e,n,a,o){Hi=Vn=null,xc(n),Ls=null,Da=0;var d=n.return;try{if(_0(e,d,n,a,Ct)){se=1,ho(e,li(a,e.current)),Tt=null;return}}catch(g){if(d!==null)throw Tt=d,g;se=1,ho(e,li(a,e.current)),Tt=null;return}n.flags&32768?(Rt||o===1?e=!0:js||(Ct&536870912)!==0?e=!1:(bn=e=!0,(o===2||o===9||o===3||o===6)&&(o=Qe.current,o!==null&&o.tag===13&&(o.flags|=16384))),Og(n,e)):To(n)}function To(e){var n=e;do{if((n.flags&32768)!==0){Og(n,bn);return}e=n.return;var a=D0(n.alternate,n,Zi);if(a!==null){Tt=a;return}if(n=n.sibling,n!==null){Tt=n;return}Tt=n=e}while(n!==null);se===0&&(se=5)}function Og(e,n){do{var a=R0(e.alternate,e);if(a!==null){a.flags&=32767,Tt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Tt=e;return}Tt=e=a}while(e!==null);se=6,Tt=null}function Lg(e,n,a,o,d,g,v,x,M){e.cancelPendingCommit=null;do _o();while(me!==0);if((Bt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(g=n.lanes|n.childLanes,g|=Kl,yy(e,a,g,v,x,M),e===qt&&(Tt=qt=null,Ct=0),Hs=n,Sn=e,Ji=a,su=g,au=d,wg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,H0(hs,function(){return Pg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=L.T,L.T=null,d=Y.p,Y.p=2,v=Bt,Bt|=4;try{k0(e,n,a)}finally{Bt=v,Y.p=d,L.T=o}}me=1,Ng(),Bg(),zg()}}function Ng(){if(me===1){me=0;var e=Sn,n=Hs,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=L.T,L.T=null;var o=Y.p;Y.p=2;var d=Bt;Bt|=4;try{gg(n,e);var g=Au,v=vd(e.containerInfo),x=g.focusedElem,M=g.selectionRange;if(v!==x&&x&&x.ownerDocument&&bd(x.ownerDocument.documentElement,x)){if(M!==null&&Yl(x)){var j=M.start,q=M.end;if(q===void 0&&(q=j),"selectionStart"in x)x.selectionStart=j,x.selectionEnd=Math.min(q,x.value.length);else{var W=x.ownerDocument||document,U=W&&W.defaultView||window;if(U.getSelection){var G=U.getSelection(),rt=x.textContent.length,dt=Math.min(M.start,rt),Yt=M.end===void 0?dt:Math.min(M.end,rt);!G.extend&&dt>Yt&&(v=Yt,Yt=dt,dt=v);var B=yd(x,dt),k=yd(x,Yt);if(B&&k&&(G.rangeCount!==1||G.anchorNode!==B.node||G.anchorOffset!==B.offset||G.focusNode!==k.node||G.focusOffset!==k.offset)){var F=W.createRange();F.setStart(B.node,B.offset),G.removeAllRanges(),dt>Yt?(G.addRange(F),G.extend(k.node,k.offset)):(F.setEnd(k.node,k.offset),G.addRange(F))}}}}for(W=[],G=x;G=G.parentNode;)G.nodeType===1&&W.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<W.length;x++){var $=W[x];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Po=!!vu,Au=vu=null}finally{Bt=d,Y.p=o,L.T=a}}e.current=n,me=2}}function Bg(){if(me===2){me=0;var e=Sn,n=Hs,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=L.T,L.T=null;var o=Y.p;Y.p=2;var d=Bt;Bt|=4;try{cg(e,n.alternate,n)}finally{Bt=d,Y.p=o,L.T=a}}me=3}}function zg(){if(me===4||me===3){me=0,Ti();var e=Sn,n=Hs,a=Ji,o=wg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?me=5:(me=0,Hs=Sn=null,Ig(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(An=null),_l(a),n=n.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Bn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=L.T,d=Y.p,Y.p=2,L.T=null;try{for(var g=e.onRecoverableError,v=0;v<o.length;v++){var x=o[v];g(x.value,{componentStack:x.stack})}}finally{L.T=n,Y.p=d}}(Ji&3)!==0&&_o(),Di(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===ru?Xa++:(Xa=0,ru=e):Xa=0,qa(0)}}function Ig(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ca(n)))}function _o(){return Ng(),Bg(),zg(),Pg()}function Pg(){if(me!==5)return!1;var e=Sn,n=su;su=0;var a=_l(Ji),o=L.T,d=Y.p;try{Y.p=32>a?32:a,L.T=null,a=au,au=null;var g=Sn,v=Ji;if(me=0,Hs=Sn=null,Ji=0,(Bt&6)!==0)throw Error(s(331));var x=Bt;if(Bt|=4,vg(g.current),mg(g,g.current,v,a),Bt=x,qa(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Bn,g)}catch{}return!0}finally{Y.p=d,L.T=o,Ig(e,n)}}function Fg(e,n,a){n=li(a,n),n=Pc(e.stateNode,n,2),e=gn(e,n,2),e!==null&&(fa(e,2),Di(e))}function Ht(e,n,a){if(e.tag===3)Fg(e,e,a);else for(;n!==null;){if(n.tag===3){Fg(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(An===null||!An.has(o))){e=li(a,e),a=jf(2),o=gn(n,a,2),o!==null&&(Uf(a,o,n,e),fa(o,2),Di(o));break}}n=n.return}}function cu(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new N0;var d=new Set;o.set(n,d)}else d=o.get(n),d===void 0&&(d=new Set,o.set(n,d));d.has(a)||(eu=!0,d.add(a),e=F0.bind(null,e,n,a),n.then(e,e))}function F0(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,qt===e&&(Ct&a)===a&&(se===4||se===3&&(Ct&62914560)===Ct&&300>Le()-Ao?(Bt&2)===0&&Gs(e,0):iu|=a,Us===Ct&&(Us=0)),Di(e)}function jg(e,n){n===0&&(n=Lh()),e=Un(e,n),e!==null&&(fa(e,n),Di(e))}function j0(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),jg(e,a)}function U0(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),jg(e,a)}function H0(e,n){return us(e,n)}var Co=null,Ys=null,uu=!1,Mo=!1,hu=!1,xn=0;function Di(e){e!==Ys&&e.next===null&&(Ys===null?Co=Ys=e:Ys=Ys.next=e),Mo=!0,uu||(uu=!0,V0())}function qa(e,n){if(!hu&&Mo){hu=!0;do for(var a=!1,o=Co;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var g=0;else{var v=o.suspendedLanes,x=o.pingedLanes;g=(1<<31-$e(42|e)+1)-1,g&=d&~(v&~x),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,Vg(o,g))}else g=Ct,g=kr(o,o===qt?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||da(o,g)||(a=!0,Vg(o,g));o=o.next}while(a);hu=!1}}function G0(){Ug()}function Ug(){Mo=uu=!1;var e=0;xn!==0&&tb()&&(e=xn);for(var n=Le(),a=null,o=Co;o!==null;){var d=o.next,g=Hg(o,n);g===0?(o.next=null,a===null?Co=d:a.next=d,d===null&&(Ys=a)):(a=o,(e!==0||(g&3)!==0)&&(Mo=!0)),o=d}me!==0&&me!==5||qa(e),xn!==0&&(xn=0)}function Hg(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var v=31-$e(g),x=1<<v,M=d[v];M===-1?((x&a)===0||(x&o)!==0)&&(d[v]=my(x,n)):M<=n&&(e.expiredLanes|=x),g&=~x}if(n=qt,a=Ct,a=kr(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Ut===2||Ut===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&ua(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||da(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&ua(o),_l(a)){case 2:case 8:a=_r;break;case 32:a=hs;break;case 268435456:a=Cr;break;default:a=hs}return o=Gg.bind(null,e),a=us(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&ua(o),e.callbackPriority=2,e.callbackNode=null,2}function Gg(e,n){if(me!==0&&me!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(_o()&&e.callbackNode!==a)return null;var o=Ct;return o=kr(e,e===qt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Eg(e,o,n),Hg(e,Le()),e.callbackNode!=null&&e.callbackNode===a?Gg.bind(null,e):null)}function Vg(e,n){if(_o())return null;Eg(e,n,!0)}function V0(){ib(function(){(Bt&6)!==0?us(ha,G0):Ug()})}function du(){if(xn===0){var e=Rs;e===0&&(e=Mr,Mr<<=1,(Mr&261888)===0&&(Mr=256)),xn=e}return xn}function Yg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Br(""+e)}function Xg(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function Y0(e,n,a,o,d){if(n==="submit"&&a&&a.stateNode===d){var g=Yg((d[Ie]||null).action),v=o.submitter;v&&(n=(n=v[Ie]||null)?Yg(n.formAction):v.getAttribute("formAction"),n!==null&&(g=n,v=null));var x=new Fr("action","action",null,o,d);e.push({event:x,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(xn!==0){var M=v?Xg(d,v):new FormData(d);Oc(a,{pending:!0,data:M,method:d.method,action:g},null,M)}}else typeof g=="function"&&(x.preventDefault(),M=v?Xg(d,v):new FormData(d),Oc(a,{pending:!0,data:M,method:d.method,action:g},g,M))},currentTarget:d}]})}}for(var fu=0;fu<Wl.length;fu++){var gu=Wl[fu],X0=gu.toLowerCase(),q0=gu[0].toUpperCase()+gu.slice(1);Ai(X0,"on"+q0)}Ai(wd,"onAnimationEnd"),Ai(xd,"onAnimationIteration"),Ai(Ed,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(c0,"onTransitionRun"),Ai(u0,"onTransitionStart"),Ai(h0,"onTransitionCancel"),Ai(Td,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),In("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),In("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),In("onBeforeInput",["compositionend","keypress","textInput","paste"]),In("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($a));function qg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],d=o.event;o=o.listeners;t:{var g=void 0;if(n)for(var v=o.length-1;0<=v;v--){var x=o[v],M=x.instance,j=x.currentTarget;if(x=x.listener,M!==g&&d.isPropagationStopped())break t;g=x,d.currentTarget=j;try{g(d)}catch(q){Hr(q)}d.currentTarget=null,g=M}else for(v=0;v<o.length;v++){if(x=o[v],M=x.instance,j=x.currentTarget,x=x.listener,M!==g&&d.isPropagationStopped())break t;g=x,d.currentTarget=j;try{g(d)}catch(q){Hr(q)}d.currentTarget=null,g=M}}}}function _t(e,n){var a=n[Cl];a===void 0&&(a=n[Cl]=new Set);var o=e+"__bubble";a.has(o)||($g(n,e,2,!1),a.add(o))}function pu(e,n,a){var o=0;n&&(o|=4),$g(a,e,o,n)}var Do="_reactListening"+Math.random().toString(36).slice(2);function mu(e){if(!e[Do]){e[Do]=!0,jh.forEach(function(a){a!=="selectionchange"&&($0.has(a)||pu(a,!1,e),pu(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Do]||(n[Do]=!0,pu("selectionchange",!1,n))}}function $g(e,n,a,o){switch(xp(n)){case 2:var d=wb;break;case 8:d=xb;break;default:d=ku}a=d.bind(null,n,a,e),d=void 0,!zl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(n,a,{capture:!0,passive:d}):e.addEventListener(n,a,!0):d!==void 0?e.addEventListener(n,a,{passive:d}):e.addEventListener(n,a,!1)}function yu(e,n,a,o,d){var g=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var x=o.stateNode.containerInfo;if(x===d)break;if(v===4)for(v=o.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;x!==null;){if(v=fs(x),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){o=g=v;continue t}x=x.parentNode}}o=o.return}Zh(function(){var j=g,q=Nl(a),W=[];t:{var U=_d.get(e);if(U!==void 0){var G=Fr,rt=e;switch(e){case"keypress":if(Ir(a)===0)break t;case"keydown":case"keyup":G=Uy;break;case"focusin":rt="focus",G=jl;break;case"focusout":rt="blur",G=jl;break;case"beforeblur":case"afterblur":G=jl;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=ed;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Vy;break;case wd:case xd:case Ed:G=Oy;break;case Td:G=Xy;break;case"scroll":case"scrollend":G=Cy;break;case"wheel":G=$y;break;case"copy":case"cut":case"paste":G=Ny;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=nd;break;case"toggle":case"beforetoggle":G=Ky}var dt=(n&4)!==0,Yt=!dt&&(e==="scroll"||e==="scrollend"),B=dt?U!==null?U+"Capture":null:U;dt=[];for(var k=j,F;k!==null;){var $=k;if(F=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||F===null||B===null||($=ma(k,B),$!=null&&dt.push(Wa(k,$,F))),Yt)break;k=k.return}0<dt.length&&(U=new G(U,rt,null,a,q),W.push({event:U,listeners:dt}))}}if((n&7)===0){t:{if(U=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",U&&a!==Ll&&(rt=a.relatedTarget||a.fromElement)&&(fs(rt)||rt[ds]))break t;if((G||U)&&(U=q.window===q?q:(U=q.ownerDocument)?U.defaultView||U.parentWindow:window,G?(rt=a.relatedTarget||a.toElement,G=j,rt=rt?fs(rt):null,rt!==null&&(Yt=l(rt),dt=rt.tag,rt!==Yt||dt!==5&&dt!==27&&dt!==6)&&(rt=null)):(G=null,rt=j),G!==rt)){if(dt=ed,$="onMouseLeave",B="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(dt=nd,$="onPointerLeave",B="onPointerEnter",k="pointer"),Yt=G==null?U:pa(G),F=rt==null?U:pa(rt),U=new dt($,k+"leave",G,a,q),U.target=Yt,U.relatedTarget=F,$=null,fs(q)===j&&(dt=new dt(B,k+"enter",rt,a,q),dt.target=F,dt.relatedTarget=Yt,$=dt),Yt=$,G&&rt)e:{for(dt=W0,B=G,k=rt,F=0,$=B;$;$=dt($))F++;$=0;for(var lt=k;lt;lt=dt(lt))$++;for(;0<F-$;)B=dt(B),F--;for(;0<$-F;)k=dt(k),$--;for(;F--;){if(B===k||k!==null&&B===k.alternate){dt=B;break e}B=dt(B),k=dt(k)}dt=null}else dt=null;G!==null&&Wg(W,U,G,dt,!1),rt!==null&&Yt!==null&&Wg(W,Yt,rt,dt,!0)}}t:{if(U=j?pa(j):window,G=U.nodeName&&U.nodeName.toLowerCase(),G==="select"||G==="input"&&U.type==="file")var Lt=hd;else if(cd(U))if(dd)Lt=r0;else{Lt=s0;var ot=n0}else G=U.nodeName,!G||G.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?j&&Ol(j.elementType)&&(Lt=hd):Lt=a0;if(Lt&&(Lt=Lt(e,j))){ud(W,Lt,a,q);break t}ot&&ot(e,U,j),e==="focusout"&&j&&U.type==="number"&&j.memoizedProps.value!=null&&kl(U,"number",U.value)}switch(ot=j?pa(j):window,e){case"focusin":(cd(ot)||ot.contentEditable==="true")&&(ws=ot,Xl=j,Ea=null);break;case"focusout":Ea=Xl=ws=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,Ad(W,a,q);break;case"selectionchange":if(l0)break;case"keydown":case"keyup":Ad(W,a,q)}var xt;if(Hl)t:{switch(e){case"compositionstart":var Mt="onCompositionStart";break t;case"compositionend":Mt="onCompositionEnd";break t;case"compositionupdate":Mt="onCompositionUpdate";break t}Mt=void 0}else Ss?od(e,a)&&(Mt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Mt="onCompositionStart");Mt&&(sd&&a.locale!=="ko"&&(Ss||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&Ss&&(xt=Jh()):(on=q,Il="value"in on?on.value:on.textContent,Ss=!0)),ot=Ro(j,Mt),0<ot.length&&(Mt=new id(Mt,e,null,a,q),W.push({event:Mt,listeners:ot}),xt?Mt.data=xt:(xt=ld(a),xt!==null&&(Mt.data=xt)))),(xt=Zy?Jy(e,a):t0(e,a))&&(Mt=Ro(j,"onBeforeInput"),0<Mt.length&&(ot=new id("onBeforeInput","beforeinput",null,a,q),W.push({event:ot,listeners:Mt}),ot.data=xt)),Y0(W,e,j,a,q)}qg(W,n)})}function Wa(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Ro(e,n){for(var a=n+"Capture",o=[];e!==null;){var d=e,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=ma(e,a),d!=null&&o.unshift(Wa(e,d,g)),d=ma(e,n),d!=null&&o.push(Wa(e,d,g))),e.tag===3)return o;e=e.return}return[]}function W0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Wg(e,n,a,o,d){for(var g=n._reactName,v=[];a!==null&&a!==o;){var x=a,M=x.alternate,j=x.stateNode;if(x=x.tag,M!==null&&M===o)break;x!==5&&x!==26&&x!==27||j===null||(M=j,d?(j=ma(a,g),j!=null&&v.unshift(Wa(a,j,M))):d||(j=ma(a,g),j!=null&&v.push(Wa(a,j,M)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var K0=/\r\n?/g,Q0=/\u0000|\uFFFD/g;function Kg(e){return(typeof e=="string"?e:""+e).replace(K0,`
`).replace(Q0,"")}function Qg(e,n){return n=Kg(n),Kg(e)===n}function Vt(e,n,a,o,d,g){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||bs(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&bs(e,""+o);break;case"className":Lr(e,"class",o);break;case"tabIndex":Lr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Lr(e,a,o);break;case"style":Kh(e,o,g);break;case"data":if(n!=="object"){Lr(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Br(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(n!=="input"&&Vt(e,n,"name",d.name,d,null),Vt(e,n,"formEncType",d.formEncType,d,null),Vt(e,n,"formMethod",d.formMethod,d,null),Vt(e,n,"formTarget",d.formTarget,d,null)):(Vt(e,n,"encType",d.encType,d,null),Vt(e,n,"method",d.method,d,null),Vt(e,n,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Br(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Pi);break;case"onScroll":o!=null&&_t("scroll",e);break;case"onScrollEnd":o!=null&&_t("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Br(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":_t("beforetoggle",e),_t("toggle",e),Or(e,"popover",o);break;case"xlinkActuate":Ii(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ii(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ii(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ii(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ii(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ii(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ii(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ii(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ii(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Or(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ty.get(a)||a,Or(e,a,o))}}function bu(e,n,a,o,d,g){switch(a){case"style":Kh(e,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?bs(e,o):(typeof o=="number"||typeof o=="bigint")&&bs(e,""+o);break;case"onScroll":o!=null&&_t("scroll",e);break;case"onScrollEnd":o!=null&&_t("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uh.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),n=a.slice(2,d?a.length-7:void 0),g=e[Ie]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(n,g,d),typeof o=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,d);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Or(e,a,o)}}}function Ce(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_t("error",e),_t("load",e);var o=!1,d=!1,g;for(g in a)if(a.hasOwnProperty(g)){var v=a[g];if(v!=null)switch(g){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Vt(e,n,g,v,a,null)}}d&&Vt(e,n,"srcSet",a.srcSet,a,null),o&&Vt(e,n,"src",a.src,a,null);return;case"input":_t("invalid",e);var x=g=v=d=null,M=null,j=null;for(o in a)if(a.hasOwnProperty(o)){var q=a[o];if(q!=null)switch(o){case"name":d=q;break;case"type":v=q;break;case"checked":M=q;break;case"defaultChecked":j=q;break;case"value":g=q;break;case"defaultValue":x=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,n));break;default:Vt(e,n,o,q,a,null)}}Xh(e,g,x,M,j,v,d,!1);return;case"select":_t("invalid",e),o=v=g=null;for(d in a)if(a.hasOwnProperty(d)&&(x=a[d],x!=null))switch(d){case"value":g=x;break;case"defaultValue":v=x;break;case"multiple":o=x;default:Vt(e,n,d,x,a,null)}n=g,a=v,e.multiple=!!o,n!=null?ys(e,!!o,n,!1):a!=null&&ys(e,!!o,a,!0);return;case"textarea":_t("invalid",e),g=d=o=null;for(v in a)if(a.hasOwnProperty(v)&&(x=a[v],x!=null))switch(v){case"value":o=x;break;case"defaultValue":d=x;break;case"children":g=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:Vt(e,n,v,x,a,null)}$h(e,o,d,g);return;case"option":for(M in a)a.hasOwnProperty(M)&&(o=a[M],o!=null)&&(M==="selected"?e.selected=o&&typeof o!="function"&&typeof o!="symbol":Vt(e,n,M,o,a,null));return;case"dialog":_t("beforetoggle",e),_t("toggle",e),_t("cancel",e),_t("close",e);break;case"iframe":case"object":_t("load",e);break;case"video":case"audio":for(o=0;o<$a.length;o++)_t($a[o],e);break;case"image":_t("error",e),_t("load",e);break;case"details":_t("toggle",e);break;case"embed":case"source":case"link":_t("error",e),_t("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(o=a[j],o!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Vt(e,n,j,o,a,null)}return;default:if(Ol(n)){for(q in a)a.hasOwnProperty(q)&&(o=a[q],o!==void 0&&bu(e,n,q,o,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(o=a[x],o!=null&&Vt(e,n,x,o,a,null))}function Z0(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,v=null,x=null,M=null,j=null,q=null;for(G in a){var W=a[G];if(a.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":M=W;default:o.hasOwnProperty(G)||Vt(e,n,G,null,o,W)}}for(var U in o){var G=o[U];if(W=a[U],o.hasOwnProperty(U)&&(G!=null||W!=null))switch(U){case"type":g=G;break;case"name":d=G;break;case"checked":j=G;break;case"defaultChecked":q=G;break;case"value":v=G;break;case"defaultValue":x=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:G!==W&&Vt(e,n,U,G,o,W)}}Rl(e,v,x,M,j,q,g,d);return;case"select":G=v=x=U=null;for(g in a)if(M=a[g],a.hasOwnProperty(g)&&M!=null)switch(g){case"value":break;case"multiple":G=M;default:o.hasOwnProperty(g)||Vt(e,n,g,null,o,M)}for(d in o)if(g=o[d],M=a[d],o.hasOwnProperty(d)&&(g!=null||M!=null))switch(d){case"value":U=g;break;case"defaultValue":x=g;break;case"multiple":v=g;default:g!==M&&Vt(e,n,d,g,o,M)}n=x,a=v,o=G,U!=null?ys(e,!!a,U,!1):!!o!=!!a&&(n!=null?ys(e,!!a,n,!0):ys(e,!!a,a?[]:"",!1));return;case"textarea":G=U=null;for(x in a)if(d=a[x],a.hasOwnProperty(x)&&d!=null&&!o.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Vt(e,n,x,null,o,d)}for(v in o)if(d=o[v],g=a[v],o.hasOwnProperty(v)&&(d!=null||g!=null))switch(v){case"value":U=d;break;case"defaultValue":G=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==g&&Vt(e,n,v,d,o,g)}qh(e,U,G);return;case"option":for(var rt in a)U=a[rt],a.hasOwnProperty(rt)&&U!=null&&!o.hasOwnProperty(rt)&&(rt==="selected"?e.selected=!1:Vt(e,n,rt,null,o,U));for(M in o)U=o[M],G=a[M],o.hasOwnProperty(M)&&U!==G&&(U!=null||G!=null)&&(M==="selected"?e.selected=U&&typeof U!="function"&&typeof U!="symbol":Vt(e,n,M,U,o,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var dt in a)U=a[dt],a.hasOwnProperty(dt)&&U!=null&&!o.hasOwnProperty(dt)&&Vt(e,n,dt,null,o,U);for(j in o)if(U=o[j],G=a[j],o.hasOwnProperty(j)&&U!==G&&(U!=null||G!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(137,n));break;default:Vt(e,n,j,U,o,G)}return;default:if(Ol(n)){for(var Yt in a)U=a[Yt],a.hasOwnProperty(Yt)&&U!==void 0&&!o.hasOwnProperty(Yt)&&bu(e,n,Yt,void 0,o,U);for(q in o)U=o[q],G=a[q],!o.hasOwnProperty(q)||U===G||U===void 0&&G===void 0||bu(e,n,q,U,o,G);return}}for(var B in a)U=a[B],a.hasOwnProperty(B)&&U!=null&&!o.hasOwnProperty(B)&&Vt(e,n,B,null,o,U);for(W in o)U=o[W],G=a[W],!o.hasOwnProperty(W)||U===G||U==null&&G==null||Vt(e,n,W,U,o,G)}function Zg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function J0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var d=a[o],g=d.transferSize,v=d.initiatorType,x=d.duration;if(g&&x&&Zg(v)){for(v=0,x=d.responseEnd,o+=1;o<a.length;o++){var M=a[o],j=M.startTime;if(j>x)break;var q=M.transferSize,W=M.initiatorType;q&&Zg(W)&&(M=M.responseEnd,v+=q*(M<x?1:(x-j)/(M-j)))}if(--o,n+=8*(g+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var vu=null,Au=null;function ko(e){return e.nodeType===9?e:e.ownerDocument}function Jg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tp(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Su(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var wu=null;function tb(){var e=window.event;return e&&e.type==="popstate"?e===wu?!1:(wu=e,!0):(wu=null,!1)}var ep=typeof setTimeout=="function"?setTimeout:void 0,eb=typeof clearTimeout=="function"?clearTimeout:void 0,ip=typeof Promise=="function"?Promise:void 0,ib=typeof queueMicrotask=="function"?queueMicrotask:typeof ip<"u"?function(e){return ip.resolve(null).then(e).catch(nb)}:ep;function nb(e){setTimeout(function(){throw e})}function En(e){return e==="head"}function np(e,n){var a=n,o=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(d),Ws(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Ka(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ka(a);for(var g=a.firstChild;g;){var v=g.nextSibling,x=g.nodeName;g[ga]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=v}}else a==="body"&&Ka(e.ownerDocument.body);a=d}while(a);Ws(n)}function sp(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function xu(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":xu(a),Ml(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function sb(e,n,a,o){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ga])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=fi(e.nextSibling),e===null)break}return null}function ab(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=fi(e.nextSibling),e===null))return null;return e}function ap(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=fi(e.nextSibling),e===null))return null;return e}function Eu(e){return e.data==="$?"||e.data==="$~"}function Tu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function rb(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function fi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var _u=null;function rp(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return fi(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function op(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function lp(e,n,a){switch(n=ko(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Ka(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ml(e)}var gi=new Map,cp=new Set;function Oo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var tn=Y.d;Y.d={f:ob,r:lb,D:cb,C:ub,L:hb,m:db,X:gb,S:fb,M:pb};function ob(){var e=tn.f(),n=xo();return e||n}function lb(e){var n=gs(e);n!==null&&n.tag===5&&n.type==="form"?_f(n):tn.r(e)}var Xs=typeof document>"u"?null:document;function up(e,n,a){var o=Xs;if(o&&typeof n=="string"&&n){var d=ri(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),cp.has(d)||(cp.add(d),e={rel:e,crossOrigin:a,href:n},o.querySelector(d)===null&&(n=o.createElement("link"),Ce(n,"link",e),ve(n),o.head.appendChild(n)))}}function cb(e){tn.D(e),up("dns-prefetch",e,null)}function ub(e,n){tn.C(e,n),up("preconnect",e,n)}function hb(e,n,a){tn.L(e,n,a);var o=Xs;if(o&&e&&n){var d='link[rel="preload"][as="'+ri(n)+'"]';n==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+ri(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+ri(a.imageSizes)+'"]')):d+='[href="'+ri(e)+'"]';var g=d;switch(n){case"style":g=qs(e);break;case"script":g=$s(e)}gi.has(g)||(e=y({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),gi.set(g,e),o.querySelector(d)!==null||n==="style"&&o.querySelector(Qa(g))||n==="script"&&o.querySelector(Za(g))||(n=o.createElement("link"),Ce(n,"link",e),ve(n),o.head.appendChild(n)))}}function db(e,n){tn.m(e,n);var a=Xs;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+ri(o)+'"][href="'+ri(e)+'"]',g=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=$s(e)}if(!gi.has(g)&&(e=y({rel:"modulepreload",href:e},n),gi.set(g,e),a.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Za(g)))return}o=a.createElement("link"),Ce(o,"link",e),ve(o),a.head.appendChild(o)}}}function fb(e,n,a){tn.S(e,n,a);var o=Xs;if(o&&e){var d=ps(o).hoistableStyles,g=qs(e);n=n||"default";var v=d.get(g);if(!v){var x={loading:0,preload:null};if(v=o.querySelector(Qa(g)))x.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},a),(a=gi.get(g))&&Cu(e,a);var M=v=o.createElement("link");ve(M),Ce(M,"link",e),M._p=new Promise(function(j,q){M.onload=j,M.onerror=q}),M.addEventListener("load",function(){x.loading|=1}),M.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Lo(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:x},d.set(g,v)}}}function gb(e,n){tn.X(e,n);var a=Xs;if(a&&e){var o=ps(a).hoistableScripts,d=$s(e),g=o.get(d);g||(g=a.querySelector(Za(d)),g||(e=y({src:e,async:!0},n),(n=gi.get(d))&&Mu(e,n),g=a.createElement("script"),ve(g),Ce(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(d,g))}}function pb(e,n){tn.M(e,n);var a=Xs;if(a&&e){var o=ps(a).hoistableScripts,d=$s(e),g=o.get(d);g||(g=a.querySelector(Za(d)),g||(e=y({src:e,async:!0,type:"module"},n),(n=gi.get(d))&&Mu(e,n),g=a.createElement("script"),ve(g),Ce(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(d,g))}}function hp(e,n,a,o){var d=(d=gt.current)?Oo(d):null;if(!d)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=qs(a.href),a=ps(d).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=qs(a.href);var g=ps(d).hoistableStyles,v=g.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,v),(g=d.querySelector(Qa(e)))&&!g._p&&(v.instance=g,v.state.loading=5),gi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},gi.set(e,a),g||mb(d,e,a,v.state))),n&&o===null)throw Error(s(528,""));return v}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=$s(a),a=ps(d).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function qs(e){return'href="'+ri(e)+'"'}function Qa(e){return'link[rel="stylesheet"]['+e+"]"}function dp(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function mb(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ce(n,"link",a),ve(n),e.head.appendChild(n))}function $s(e){return'[src="'+ri(e)+'"]'}function Za(e){return"script[async]"+e}function fp(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+ri(a.href)+'"]');if(o)return n.instance=o,ve(o),o;var d=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ve(o),Ce(o,"style",d),Lo(o,a.precedence,e),n.instance=o;case"stylesheet":d=qs(a.href);var g=e.querySelector(Qa(d));if(g)return n.state.loading|=4,n.instance=g,ve(g),g;o=dp(a),(d=gi.get(d))&&Cu(o,d),g=(e.ownerDocument||e).createElement("link"),ve(g);var v=g;return v._p=new Promise(function(x,M){v.onload=x,v.onerror=M}),Ce(g,"link",o),n.state.loading|=4,Lo(g,a.precedence,e),n.instance=g;case"script":return g=$s(a.src),(d=e.querySelector(Za(g)))?(n.instance=d,ve(d),d):(o=a,(d=gi.get(g))&&(o=y({},a),Mu(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),ve(d),Ce(d,"link",o),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Lo(o,a.precedence,e));return n.instance}function Lo(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,g=d,v=0;v<o.length;v++){var x=o[v];if(x.dataset.precedence===n)g=x;else if(g!==d)break}g?g.parentNode.insertBefore(e,g.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function Cu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Mu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var No=null;function gp(e,n,a){if(No===null){var o=new Map,d=No=new Map;d.set(a,o)}else d=No,o=d.get(a),o||(o=new Map,d.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var g=a[d];if(!(g[ga]||g[xe]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var v=g.getAttribute(n)||"";v=e+v;var x=o.get(v);x?x.push(g):o.set(v,[g])}}return o}function pp(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function yb(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function mp(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function bb(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=qs(o.href),g=n.querySelector(Qa(d));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Bo.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=g,ve(g);return}g=n.ownerDocument||n,o=dp(o),(d=gi.get(d))&&Cu(o,d),g=g.createElement("link"),ve(g);var v=g;v._p=new Promise(function(x,M){v.onload=x,v.onerror=M}),Ce(g,"link",o),a.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Bo.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var Du=0;function vb(e,n){return e.stylesheets&&e.count===0&&Io(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&Io(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+n);0<e.imgBytes&&Du===0&&(Du=62500*J0());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Io(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>Du?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function Bo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Io(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var zo=null;function Io(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,zo=new Map,n.forEach(Ab,e),zo=null,Bo.call(e))}function Ab(e,n){if(!(n.state.loading&4)){var a=zo.get(e);if(a)var o=a.get(null);else{a=new Map,zo.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var v=d[g];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}d=n.instance,v=d.getAttribute("data-precedence"),g=a.get(v)||o,g===o&&a.set(null,d),a.set(v,d),this.count++,o=Bo.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),g?g.parentNode.insertBefore(d,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Ja={$$typeof:C,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function Sb(e,n,a,o,d,g,v,x,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=El(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),this.hiddenUpdates=El(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function yp(e,n,a,o,d,g,v,x,M,j,q,W){return e=new Sb(e,n,a,v,M,j,q,W,x),n=1,g===!0&&(n|=24),g=Ke(3,null,null,n),e.current=g,g.stateNode=e,n=lc(),n.refCount++,e.pooledCache=n,n.refCount++,g.memoizedState={element:o,isDehydrated:a,cache:n},dc(g),e}function bp(e){return e?(e=Ts,e):Ts}function vp(e,n,a,o,d,g){d=bp(d),o.context===null?o.context=d:o.pendingContext=d,o=fn(n),o.payload={element:a},g=g===void 0?null:g,g!==null&&(o.callback=g),a=gn(e,o,n),a!==null&&(Ge(a,e,n),ka(a,e,n))}function Ap(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Ru(e,n){Ap(e,n),(e=e.alternate)&&Ap(e,n)}function Sp(e){if(e.tag===13||e.tag===31){var n=Un(e,67108864);n!==null&&Ge(n,e,67108864),Ru(e,67108864)}}function wp(e){if(e.tag===13||e.tag===31){var n=ei();n=Tl(n);var a=Un(e,n);a!==null&&Ge(a,e,n),Ru(e,n)}}var Po=!0;function wb(e,n,a,o){var d=L.T;L.T=null;var g=Y.p;try{Y.p=2,ku(e,n,a,o)}finally{Y.p=g,L.T=d}}function xb(e,n,a,o){var d=L.T;L.T=null;var g=Y.p;try{Y.p=8,ku(e,n,a,o)}finally{Y.p=g,L.T=d}}function ku(e,n,a,o){if(Po){var d=Ou(o);if(d===null)yu(e,n,o,Fo,a),Ep(e,o);else if(Tb(d,e,n,a,o))o.stopPropagation();else if(Ep(e,o),n&4&&-1<Eb.indexOf(e)){for(;d!==null;){var g=gs(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var v=zn(g.pendingLanes);if(v!==0){var x=g;for(x.pendingLanes|=2,x.entangledLanes|=2;v;){var M=1<<31-$e(v);x.entanglements[1]|=M,v&=~M}Di(g),(Bt&6)===0&&(So=Le()+500,qa(0))}}break;case 31:case 13:x=Un(g,2),x!==null&&Ge(x,g,2),xo(),Ru(g,2)}if(g=Ou(o),g===null&&yu(e,n,o,Fo,a),g===d)break;d=g}d!==null&&o.stopPropagation()}else yu(e,n,o,null,a)}}function Ou(e){return e=Nl(e),Lu(e)}var Fo=null;function Lu(e){if(Fo=null,e=fs(e),e!==null){var n=l(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=c(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Fo=e,null}function xp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sl()){case ha:return 2;case _r:return 8;case hs:case wl:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var Nu=!1,Tn=null,_n=null,Cn=null,tr=new Map,er=new Map,Mn=[],Eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ep(e,n){switch(e){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":tr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":er.delete(n.pointerId)}}function ir(e,n,a,o,d,g){return e===null||e.nativeEvent!==g?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:g,targetContainers:[d]},n!==null&&(n=gs(n),n!==null&&Sp(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function Tb(e,n,a,o,d){switch(n){case"focusin":return Tn=ir(Tn,e,n,a,o,d),!0;case"dragenter":return _n=ir(_n,e,n,a,o,d),!0;case"mouseover":return Cn=ir(Cn,e,n,a,o,d),!0;case"pointerover":var g=d.pointerId;return tr.set(g,ir(tr.get(g)||null,e,n,a,o,d)),!0;case"gotpointercapture":return g=d.pointerId,er.set(g,ir(er.get(g)||null,e,n,a,o,d)),!0}return!1}function Tp(e){var n=fs(e.target);if(n!==null){var a=l(n);if(a!==null){if(n=a.tag,n===13){if(n=c(a),n!==null){e.blockedOn=n,Ph(e.priority,function(){wp(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,Ph(e.priority,function(){wp(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=Ou(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ll=o,a.target.dispatchEvent(o),Ll=null}else return n=gs(a),n!==null&&Sp(n),e.blockedOn=a,!1;n.shift()}return!0}function _p(e,n,a){jo(e)&&a.delete(n)}function _b(){Nu=!1,Tn!==null&&jo(Tn)&&(Tn=null),_n!==null&&jo(_n)&&(_n=null),Cn!==null&&jo(Cn)&&(Cn=null),tr.forEach(_p),er.forEach(_p)}function Uo(e,n){e.blockedOn===n&&(e.blockedOn=null,Nu||(Nu=!0,m.unstable_scheduleCallback(m.unstable_NormalPriority,_b)))}var Ho=null;function Cp(e){Ho!==e&&(Ho=e,m.unstable_scheduleCallback(m.unstable_NormalPriority,function(){Ho===e&&(Ho=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],d=e[n+2];if(typeof o!="function"){if(Lu(o||a)===null)continue;break}var g=gs(a);g!==null&&(e.splice(n,3),n-=3,Oc(g,{pending:!0,data:d,method:a.method,action:o},o,d))}}))}function Ws(e){function n(M){return Uo(M,e)}Tn!==null&&Uo(Tn,e),_n!==null&&Uo(_n,e),Cn!==null&&Uo(Cn,e),tr.forEach(n),er.forEach(n);for(var a=0;a<Mn.length;a++){var o=Mn[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Mn.length&&(a=Mn[0],a.blockedOn===null);)Tp(a),a.blockedOn===null&&Mn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var d=a[o],g=a[o+1],v=d[Ie]||null;if(typeof g=="function")v||Cp(a);else if(v){var x=null;if(g&&g.hasAttribute("formAction")){if(d=g,v=g[Ie]||null)x=v.formAction;else if(Lu(d)!==null)continue}else x=v.action;typeof x=="function"?a[o+1]=x:(a.splice(o,3),o-=3),Cp(a)}}}function Mp(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function Bu(e){this._internalRoot=e}Go.prototype.render=Bu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=ei();vp(a,o,e,n,null,null)},Go.prototype.unmount=Bu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;vp(e.current,2,null,e,null,null),xo(),n[ds]=null}};function Go(e){this._internalRoot=e}Go.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ih();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Mn.length&&n!==0&&n<Mn[a].priority;a++);Mn.splice(a,0,e),a===0&&Tp(e)}};var Dp=t.version;if(Dp!=="19.2.4")throw Error(s(527,Dp,"19.2.4"));Y.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=f(n),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var Cb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vo.isDisabled&&Vo.supportsFiber)try{Bn=Vo.inject(Cb),qe=Vo}catch{}}return sr.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,o="",d=zf,g=If,v=Pf;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=yp(e,1,!1,null,null,a,o,null,d,g,v,Mp),e[ds]=n.current,mu(e),new Bu(n)},sr.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var o=!1,d="",g=zf,v=If,x=Pf,M=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(M=a.formState)),n=yp(e,1,!0,n,a??null,o,d,M,g,v,x,Mp),n.context=bp(null),a=n.current,o=ei(),o=Tl(o),d=fn(o),d.callback=null,gn(a,d,o),a=o,n.current.lanes=a,fa(n,a),Di(n),e[ds]=n.current,mu(e),new Go(n)},sr.version="19.2.4",sr}var Up;function Ib(){if(Up)return Fu.exports;Up=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(t){console.error(t)}}return m(),Fu.exports=zb(),Fu.exports}var Pb=Ib();const Cm=(...m)=>m.filter((t,i,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===i).join(" ").trim();const Fb=m=>m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const jb=m=>m.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,s)=>s?s.toUpperCase():i.toLowerCase());const Hp=m=>{const t=jb(m);return t.charAt(0).toUpperCase()+t.slice(1)};var Ub={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Hb=m=>{for(const t in m)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const Gb=te.forwardRef(({color:m="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:r="",children:l,iconNode:c,...u},h)=>te.createElement("svg",{ref:h,...Ub,width:t,height:t,stroke:m,strokeWidth:s?Number(i)*24/Number(t):i,className:Cm("lucide",r),...!l&&!Hb(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,p])=>te.createElement(f,p)),...Array.isArray(l)?l:[l]]));const Ot=(m,t)=>{const i=te.forwardRef(({className:s,...r},l)=>te.createElement(Gb,{ref:l,iconNode:t,className:Cm(`lucide-${Fb(Hp(m))}`,`lucide-${m}`,s),...r}));return i.displayName=Hp(m),i};const Vb=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Yb=Ot("bot",Vb);const Xb=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],qb=Ot("brain",Xb);const $b=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Wb=Ot("chart-column",$b);const Kb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Qb=Ot("circle-alert",Kb);const Zb=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Jb=Ot("circle-check-big",Zb);const tv=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],ev=Ot("cloud",tv);const iv=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],nv=Ot("code",iv);const sv=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],av=Ot("compass",sv);const rv=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],ov=Ot("cpu",rv);const lv=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Gp=Ot("external-link",lv);const cv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],uv=Ot("eye",cv);const hv=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dv=Ot("file-text",hv);const fv=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],gv=Ot("layers",fv);const pv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Gu=Ot("loader-circle",pv);const mv=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Vp=Ot("mail",mv);const yv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Yp=Ot("map-pin",yv);const bv=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],vv=Ot("mic",bv);const Av=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Xp=Ot("radio",Av);const Sv=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],wv=Ot("refresh-ccw",Sv);const xv=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],Ev=Ot("rocket",xv);const Tv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],qp=Ot("search",Tv);const _v=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Cv=Ot("send",_v);const Mv=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Dv=Ot("server",Mv);const Rv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],eh=Ot("shield",Rv);const kv=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Ov=Ot("smartphone",kv);const Lv=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Vu=Ot("sparkles",Lv);const Nv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],sl=Ot("target",Nv);const Bv=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],zv=Ot("trending-up",Bv);const Iv=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$p=Ot("upload",Iv);const Pv=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Fv=Ot("user-check",Pv);const jv=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Wp=Ot("user",jv);const Uv=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Hv=Ot("users",Uv);const Gv=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yu=Ot("x",Gv),Vv="sk-or-v1-649c3585ae991b5f28",Yv="96403823baf22be88065d3d417a95084f6f9bb57276997",Mm=Vv+Yv,Xv="https://openrouter.ai/api/v1/chat/completions";console.log("Using OpenRouter Key (Last 4):","..."+Mm.slice(-4));const qv="deepseek/deepseek-v3.2";async function Dm(m,t=.8,i=16e3){const s=await fetch(Xv,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Mm}`,"HTTP-Referer":"https://dferdowsfy.github.io/exRadar","X-Title":"Executive Radar"},body:JSON.stringify({model:qv,messages:m,temperature:t,max_tokens:i})});if(!s.ok){const l=await s.json().catch(()=>({}));throw console.error("OpenRouter API error:",s.status,l),new Error(`OpenRouter API error: ${s.status} - ${l.error?.message||"Unknown error"}`)}return(await s.json()).choices?.[0]?.message?.content||""}function Rm(m){let t=m.trim();return t.startsWith("```json")&&(t=t.slice(7)),t.startsWith("```")&&(t=t.slice(3)),t.endsWith("```")&&(t=t.slice(0,-3)),t.trim()}async function Kp(m,t=20,i=null,s={}){const{includeFractional:r=!1}=s,l=i?`
CRITICAL - USER RESUME CONTEXT:
The user has the following background. You MUST score and rank opportunities based on alignment with this profile:
- **Skills:** ${i.skills?.join(", ")||"Not specified"}
- **Experience Summary:** ${i.summary||"Not specified"}
- **Target Roles:** ${i.targetRoles?.join(", ")||"Executive/VP level"}
- **Past Industries:** ${i.industries?.join(", ")||"Not specified"}
- **Past Companies:** ${i.companies?.join(", ")||"Not specified"}
- **Strengths:** ${i.strengths?.join(", ")||"Not specified"}

Generate opportunities that specifically match this candidate's background. Calculate a "fitScore" (0-100) based on how well the user's specific skills and experience match the role requirements.
`:"",u=`You are an elite executive recruiter with access to real-time job market data via web search. Search the internet and generate exactly ${t} realistic executive job opportunities for the search query: "${m}".

${l}
${r?`
INCLUDE FRACTIONAL/PART-TIME ROLES:
Include fractional executive roles, part-time advisory positions, and interim leadership opportunities such as:
- Fractional CPO, Fractional CTO, Fractional VP Product
- Interim Head of AI, Interim VP Engineering
- Part-time AI Advisor, Strategic Advisor roles
- Board Advisory positions
Mark these with "isFractional": true in the response.
`:""}

IMPORTANT: Use your web search capabilities to find REAL, CURRENT opportunities from:
- Recent funding announcements (Series A-E in the last 6 months)
- Executive departures and leadership changes
- Fast-growing startups in AI, security, robotics, fintech
- Companies actively hiring for leadership roles on LinkedIn, Greenhouse, Lever

Return a JSON array with exactly ${t} objects. Each object must have:
{
  "company": "Real company name",
  "role": "Specific executive role (e.g. 'VP of Product', 'Fractional CPO', 'Head of AI Engineering')",
  "isFractional": false,
  "description": "2-3 sentences about the company's core business and market position.",
  "hiringLeader": {
    "name": "CEO/Founder name",
    "title": "Title",
    "email": "contact@company.com",
    "linkedin": "https://linkedin.com/company/companyname"
  },
  "location": "City, State (or Remote)",
  "employees": 100,
  "fundingStage": "e.g. 'Series B ($50M)'",
  "fundingDate": "e.g. 'Jan 2026'",
  "revenue": "e.g. '$10M ARR'",
  "remote": true,
  "signals": ["FUNDING"],
  "sector": "agentic-ai",
  "confidence": 85,
  "fitScore": 80,
  "fitReasons": ["Skill match", "Industry alignment"],
  "matchAnalysis": "Brief explanation of fit.",
  "strategicDirection": "Company direction.",
  "futureProofReasoning": "Why this company is resilient.",
  "jobUrl": "https://www.linkedin.com/jobs/search/?keywords=role+company",
  "newsSource": "Recent headline",
  "website": "company.com"
}

CRITICAL: Return ONLY a valid JSON array, no markdown, no explanations.`;try{console.log("Calling OpenRouter API for opportunities...");const h=await Dm([{role:"user",content:u}],.8,16e3);if(!h)throw new Error("No response from OpenRouter");const f=Rm(h),p=JSON.parse(f),y=["shield","target","cpu","code","brain","cloud","rocket","layers","server","bot"];return p.map((b,A)=>({...b,id:1e3+A,icon:y[A%y.length],dateIdentified:new Date().toISOString().split("T")[0]}))}catch(h){throw console.error("OpenRouter API error:",h),h}}async function Qp(m){const t=`Analyze this resume and extract structured information:

${m}

Return a JSON object with:
{
  "name": "Full name",
  "title": "Current or most recent job title",
  "email": "Email if found",
  "phone": "Phone if found",
  "location": "Location if found",
  "summary": "2-3 sentence professional summary",
  "skills": ["skill1", "skill2"] (list of key skills, max 15),
  "experience": "Brief summary of experience level and years",
  "industries": ["industry1", "industry2"] (industries they've worked in),
  "companies": ["company1", "company2"] (notable companies worked at),
  "targetRoles": ["VP Product", "Head of Engineering"] (suggested executive roles based on background),
  "strengths": ["strength1", "strength2", "strength3"] (top 3 professional strengths),
  "idealCompanyStage": "Startup | Growth | Enterprise | Any",
  "topSectors": ["ai-security", "agentic-ai"] (best matching sectors from: agentic-ai, ai-security, physical-ai, vibe-coding, ai-infra, vertical-ai)
}

Return ONLY valid JSON, no markdown.`;try{console.log("Parsing resume with OpenRouter...");const i=await Dm([{role:"user",content:t}],.3,4096),s=Rm(i);return JSON.parse(s)}catch(i){return console.error("Resume parsing error:",i),null}}const Be=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ih=[.001,0,0,.001,0,0],Xu=1.35,ii={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Rn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pr="pdfjs_internal_editor_",At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},kt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},$v={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},nh={TRIANGLES:1,LATTICE:2},ye={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},el={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},pe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Qs={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},cl={ERRORS:0,WARNINGS:1,INFOS:5},mr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ar={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Wv={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ul=cl.WARNINGS;function Kv(m){Number.isInteger(m)&&(ul=m)}function Qv(){return ul}function hl(m){ul>=cl.INFOS&&console.info(`Info: ${m}`)}function mt(m){ul>=cl.WARNINGS&&console.warn(`Warning: ${m}`)}function jt(m){throw new Error(m)}function Ft(m,t){m||jt(t)}function Zv(m){switch(m?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function km(m,t=null,i=null){if(!m)return null;if(i&&typeof m=="string"&&(i.addDefaultProtocol&&m.startsWith("www.")&&m.match(/\./g)?.length>=2&&(m=`http://${m}`),i.tryConvertEncoding))try{m=s1(m)}catch{}const s=t?URL.parse(m,t):URL.parse(m);return Zv(s)?s:null}function Om(m,t,i=!1){const s=URL.parse(m);return s?(s.hash=t,s.href):i&&km(m,"http://example.com")?m.split("#",1)[0]+`${t?`#${t}`:""}`:""}function yt(m,t,i,s=!1){return Object.defineProperty(m,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const rs=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class Zp extends rs{constructor(t,i){super(t,"PasswordException"),this.code=i}}class qu extends rs{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class sh extends rs{constructor(t){super(t,"InvalidPDFException")}}class al extends rs{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class Jv extends rs{constructor(t){super(t,"FormatError")}}class On extends rs{constructor(t){super(t,"AbortException")}}function t1(m){(typeof m!="object"||m?.length===void 0)&&jt("Invalid argument for bytesToString");const t=m.length,i=8192;if(t<i)return String.fromCharCode.apply(null,m);const s=[];for(let r=0;r<t;r+=i){const l=Math.min(r+i,t),c=m.subarray(r,l);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function dl(m){typeof m!="string"&&jt("Invalid argument for stringToBytes");const t=m.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=m.charCodeAt(s)&255;return i}function e1(m){return String.fromCharCode(m>>24&255,m>>16&255,m>>8&255,m&255)}function i1(){const m=new Uint8Array(4);return m[0]=1,new Uint32Array(m.buffer,0,1)[0]===1}function n1(){try{return new Function(""),!0}catch{return!1}}class be{static get isLittleEndian(){return yt(this,"isLittleEndian",i1())}static get isEvalSupported(){return yt(this,"isEvalSupported",n1())}static get isOffscreenCanvasSupported(){return yt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return yt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return yt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return yt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return yt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return yt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const $u=Array.from(Array(256).keys(),m=>m.toString(16).padStart(2,"0"));class st{static makeHexColor(t,i,s){return`#${$u[t]}${$u[i]}${$u[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const r=t[s],l=t[s+1];t[s]=r*i[0]+l*i[2]+i[4],t[s+1]=r*i[1]+l*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],l=i[1],c=i[2],u=i[3],h=i[4],f=i[5];for(let p=0;p<6;p+=2){const y=t[s+p],b=t[s+p+1];t[s+p]=y*r+b*c+h,t[s+p+1]=y*l+b*u+f}}static applyInverseTransform(t,i){const s=t[0],r=t[1],l=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/l,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/l}static axialAlignedBoundingBox(t,i,s){const r=i[0],l=i[1],c=i[2],u=i[3],h=i[4],f=i[5],p=t[0],y=t[1],b=t[2],A=t[3];let w=r*p+h,S=w,T=r*b+h,E=T,D=u*y+f,C=D,I=u*A+f,N=I;if(l!==0||c!==0){const z=l*p,P=l*b,V=c*y,Q=c*A;w+=V,E+=V,T+=Q,S+=Q,D+=z,N+=z,I+=P,C+=P}s[0]=Math.min(s[0],w,T,S,E),s[1]=Math.min(s[1],D,I,C,N),s[2]=Math.max(s[2],w,T,S,E),s[3]=Math.max(s[3],D,I,C,N)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],l=t[2],c=t[3],u=s**2+r**2,h=s*l+r*c,f=l**2+c**2,p=(u+f)/2,y=Math.sqrt(p**2-(u*f-h**2));i[0]=Math.sqrt(p+y||1),i[1]=Math.sqrt(p-y||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return l>c?null:[s,l,r,c]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,l){l[0]=Math.min(l[0],t,s),l[1]=Math.min(l[1],i,r),l[2]=Math.max(l[2],t,s),l[3]=Math.max(l[3],i,r)}static#t(t,i,s,r,l,c,u,h,f,p){if(f<=0||f>=1)return;const y=1-f,b=f*f,A=b*f,w=y*(y*(y*t+3*f*i)+3*b*s)+A*r,S=y*(y*(y*l+3*f*c)+3*b*u)+A*h;p[0]=Math.min(p[0],w),p[1]=Math.min(p[1],S),p[2]=Math.max(p[2],w),p[3]=Math.max(p[3],S)}static#e(t,i,s,r,l,c,u,h,f,p,y,b){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,i,s,r,l,c,u,h,-y/p,b);return}const A=p**2-4*y*f;if(A<0)return;const w=Math.sqrt(A),S=2*f;this.#t(t,i,s,r,l,c,u,h,(-p+w)/S,b),this.#t(t,i,s,r,l,c,u,h,(-p-w)/S,b)}static bezierBoundingBox(t,i,s,r,l,c,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,h),this.#e(t,s,l,u,i,r,c,h,3*(-t+3*(s-l)+u),6*(t-2*s+l),3*(s-t),f),this.#e(t,s,l,u,i,r,c,h,3*(-i+3*(r-c)+h),6*(i-2*r+c),3*(r-i),f)}}function s1(m){return decodeURIComponent(escape(m))}let Wu=null,Jp=null;function a1(m){return Wu||(Wu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Jp=new Map([["","t"]])),m.replaceAll(Wu,(t,i,s)=>i?i.normalize("NFKC"):Jp.get(s))}function Lm(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const m=new Uint8Array(32);return crypto.getRandomValues(m),t1(m)}const ta="pdfjs_internal_id_";function r1(m,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...l]=i;if(!m(s)&&!Number.isInteger(s)||!t(r))return!1;const c=l.length;let u=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of l)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function De(m,t,i){return Math.min(Math.max(m,t),i)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(m){return m.reduce((t,i)=>t+i,0)});class yr{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(l){if(!l)return;let c=null;const u=l.name;if(u==="#text")c=l.value;else if(yr.shouldBuildText(u))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&i.push({str:c}),!!l.children)for(const h of l.children)r(h)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Nm{static setupStorage(t,i,s,r,l){const c=r.getValue(i,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),l==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?t.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),l==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:l}){const{attributes:c}=i,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[h,f]of Object.entries(c))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&l.addLinkAttributes(t,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(t,c.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,l=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:l,linkService:s});const u=l!=="richText",h=t.div;if(h.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=y}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);c.append(y),u&&yr.shouldBuildText(r.name)&&f.push(y)}return{textDivs:f}}const p=[[r,-1,c]];for(;p.length>0;){const[y,b,A]=p.at(-1);if(b+1===y.children.length){p.pop();continue}const w=y.children[++p.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const E=document.createTextNode(w.value);f.push(E),A.append(E);continue}const T=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(A.append(T),w.attributes&&this.setAttributes({html:T,element:w,storage:i,intent:l,linkService:s}),w.children?.length>0)p.push([w,-1,T]);else if(w.value){const E=document.createTextNode(w.value);u&&yr.shouldBuildText(S)&&f.push(E),T.append(E)}}for(const y of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const en="http://www.w3.org/2000/svg";class la{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ar(m,t="text"){if(hr(m,document.baseURI)){const i=await fetch(m);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",m,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Sr{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:l=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=l,this.offsetY=c,s*=i;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,y=0,b=0,A=1;break;case 90:p=0,y=1,b=1,A=0;break;case 270:p=0,y=-1,b=-1,A=0;break;case 0:p=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,A=-A);let w,S,T,E;p===0?(w=Math.abs(f-t[1])*s+l,S=Math.abs(h-t[0])*s+c,T=(t[3]-t[1])*s,E=(t[2]-t[0])*s):(w=Math.abs(h-t[0])*s+l,S=Math.abs(f-t[1])*s+c,T=(t[2]-t[0])*s,E=(t[3]-t[1])*s),this.transform=[p*s,y*s,b*s,A*s,w-p*s*h-b*s*f,S-y*s*h-A*s*f],this.width=T,this.height=E}get rawDims(){const t=this.viewBox;return yt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Sr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:l})}convertToViewportPoint(t,i){const s=[t,i];return st.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];st.applyTransform(i,this.transform);const s=[t[2],t[3]];return st.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return st.applyInverseTransform(s,this.transform),s}}class yh extends rs{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function fl(m){const t=m.length;let i=0;for(;i<t&&m[i].trim()==="";)i++;return m.substring(i,i+5).toLowerCase()==="data:"}function bh(m){return typeof m=="string"&&/\.pdf$/i.test(m)}function o1(m){return[m]=m.split(/[#?]/,1),m.substring(m.lastIndexOf("/")+1)}function l1(m,t="document.pdf"){if(typeof m!="string")return t;if(fl(m))return mt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(m);if(!s)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},l=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(l.test(c))return r(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(l.test(f))return r(f);const h=Array.from(s.searchParams.keys()).reverse();for(const f of h)if(l.test(f))return r(f)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return r(h[0])}return t}class tm{started=Object.create(null);times=[];time(t){t in this.started&&mt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||mt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:l}of this.times)t.push(`${s.padEnd(i)} ${l-r}ms
`);return t.join("")}}function hr(m,t){const i=t?URL.parse(m,t):URL.parse(m);return i?.protocol==="http:"||i?.protocol==="https:"}function bi(m){m.preventDefault()}function ae(m){m.preventDefault(),m.stopPropagation()}function c1(m){console.log("Deprecated API usage: "+m)}class ah{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(i[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(i[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(i[6],10);h=h>=0&&h<=59?h:0;const f=i[7]||"Z";let p=parseInt(i[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(i[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=p,u+=y):f==="+"&&(c-=p,u-=y),new Date(Date.UTC(s,r,l,c,u,h))}}function u1(m,{scale:t=1,rotation:i=0}){const{width:s,height:r}=m.attributes.style,l=[0,0,parseInt(s),parseInt(r)];return new Sr({viewBox:l,userUnit:1,scale:t,rotation:i})}function wr(m){if(m.startsWith("#")){const t=parseInt(m.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return m.startsWith("rgb(")?m.slice(4,-1).split(",").map(t=>parseInt(t)):m.startsWith("rgba(")?m.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(mt(`Not a valid color format: "${m}"`),[0,0,0])}function h1(m){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of m.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;m.set(i,wr(s))}t.remove()}function ee(m){const{a:t,b:i,c:s,d:r,e:l,f:c}=m.getTransform();return[t,i,s,r,l,c]}function Oi(m){const{a:t,b:i,c:s,d:r,e:l,f:c}=m.getTransform().invertSelf();return[t,i,s,r,l,c]}function ss(m,t,i=!1,s=!0){if(t instanceof Sr){const{pageWidth:r,pageHeight:l}=t.rawDims,{style:c}=m,u=be.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${l}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(c.width=p,c.height=y):(c.width=y,c.height=p)}s&&m.setAttribute("data-main-rotation",t.rotation)}class zi{constructor(){const{pixelRatio:t}=zi;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,l=-1){let c=1/0,u=1/0,h=1/0;s=zi.capPixels(s,l),s>0&&(c=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,h=r/i);const f=Math.min(c,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const rh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class d1{static get isDarkMode(){return yt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class f1{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),yt(this,"commentForegroundColor",wr(s))}}function g1(m,t,i,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return m=Math.round(m*s+r),t=Math.round(t*s+r),i=Math.round(i*s+r),[m,t,i]}function em(m,t){const i=m[0]/255,s=m[1]/255,r=m[2]/255,l=Math.max(i,s,r),c=Math.min(i,s,r),u=(l+c)/2;if(l===c)t[0]=t[1]=0;else{const h=l-c;switch(t[1]=u<.5?h/(l+c):h/(2-l-c),l){case i:t[0]=((s-r)/h+(s<r?6:0))*60;break;case s:t[0]=((r-i)/h+2)*60;break;case r:t[0]=((i-s)/h+4)*60;break}}t[2]=u}function oh(m,t){const i=m[0],s=m[1],r=m[2],l=(1-Math.abs(2*r-1))*s,c=l*(1-Math.abs(i/60%2-1)),u=r-l/2;switch(Math.floor(i/60)){case 0:t[0]=l+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=l+u,t[2]=u;break;case 2:t[0]=u,t[1]=l+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=l+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=l+u;break;case 5:case 6:t[0]=l+u,t[1]=u,t[2]=c+u;break}}function im(m){return m<=.03928?m/12.92:((m+.055)/1.055)**2.4}function nm(m,t,i){oh(m,i),i.map(im);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];oh(t,i),i.map(im);const r=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const sm=new Map;function p1(m,t){const i=m[0]+m[1]*256+m[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=sm.get(i);if(s)return s;const r=new Float32Array(9),l=r.subarray(0,3),c=r.subarray(3,6);em(m,c);const u=r.subarray(6,9);em(t,u);const h=u[2]<.5,f=h?12:4.5;if(c[2]=h?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),nm(c,u,l)<f){let p,y;h?(p=c[2],y=1):(p=0,y=c[2]);const b=.005;for(;y-p>b;){const A=c[2]=(p+y)/2;h===nm(c,u,l)<f?p=A:y=A}c[2]=h?y:p}return oh(c,l),s=st.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),sm.set(i,s),s}function Bm({html:m,dir:t,className:i},s){const r=document.createDocumentFragment();if(typeof m=="string"){const l=document.createElement("p");l.dir=t||"auto";const c=m.split(/(?:\r\n?|\n)/);for(let u=0,h=c.length;u<h;++u){const f=c[u];l.append(document.createTextNode(f)),u<h-1&&l.append(document.createElement("br"))}r.append(l)}else Nm.render({xfaHtml:m,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",i),s.append(r)}function zm(m){const t=new Path2D;if(!m)return t;for(let i=0,s=m.length;i<s;)switch(m[i++]){case ar.moveTo:t.moveTo(m[i++],m[i++]);break;case ar.lineTo:t.lineTo(m[i++],m[i++]);break;case ar.curveTo:t.bezierCurveTo(m[i++],m[i++],m[i++],m[i++],m[i++],m[i++]);break;case ar.quadraticCurveTo:t.quadraticCurveTo(m[i++],m[i++],m[i++],m[i++]);break;case ar.closePath:t.closePath();break;default:mt(`Unrecognized drawing path operator: ${m[i-1]}`);break}return t}class It{static#t=null;static#e=null;static#n=null;static#i=0;static#a=[];get pagesNumber(){return It.#i}set pagesNumber(t){It.#i!==t&&(It.#i=t,t===0&&(It.#e=null,It.#t=null))}addListener(t){It.#a.push(t)}removeListener(t){const i=It.#a.indexOf(t);i>=0&&It.#a.splice(i,1)}#r(){for(const t of It.#a)t()}#s(t){if(It.#e)return;const i=It.#i,s=new Uint32Array(3*i),r=It.#e=s.subarray(0,i),l=It.#t=s.subarray(i,2*i);if(t)for(let c=0;c<i;c++)r[c]=l[c]=c+1;It.#n=s.subarray(2*i)}movePages(t,i,s){this.#s(!0);const r=It.#e,l=It.#t;It.#n.set(l);const c=i.length,u=new Uint32Array(c);let h=0;for(let A=0;A<c;A++){const w=i[A]-1;u[A]=r[w],w<s&&(h+=1)}const f=It.#i;let p=s-h;const y=f-c;p=De(p,0,y);for(let A=0,w=0;A<f;A++)t.has(A+1)||(r[w++]=r[A]);r.copyWithin(p+c,p,y),r.set(u,p);let b=!1;for(let A=0,w=f;A<w;A++){const S=r[A];b||=S!==A+1,l[S-1]=A+1}this.#r(),b||(this.pagesNumber=0)}hasBeenAltered(){return It.#e!==null}getPageMappingForSaving(){return{pageIndices:It.#t?It.#t.map(t=>t-1):null}}getPrevPageNumber(t){return It.#n[It.#e[t-1]-1]}getPageNumber(t){return It.#t?.[t-1]??t}getPageId(t){return It.#e?.[t-1]??t}static get instance(){return yt(this,"instance",new It)}getMapping(){return It.#e.subarray(0,this.pagesNumber)}}class gr{#t=null;#e=null;#n;#i=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,gr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",bi,{signal:i}),t.addEventListener("pointerdown",gr.#l,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:l}=t,c=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ae(t)}#h(t){this.#n._focusEventsAllowed=!0,ae(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",bi,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",gr.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#a=t}addComment(t,i=null){if(this.#r)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#s=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(r,i)):this.#i.append(s,r),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#o=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){t==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null)}async addButton(t,i){switch(t){case"colorPicker":i&&this.addColorPicker(i);break;case"altText":i&&await this.addAltText(i);break;case"editSignature":i&&await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":i&&this.addComment(i);break}}async addButtonBefore(t,i,s){if(!i&&t==="comment")return;const r=this.#i.querySelector(s);r&&t==="comment"&&this.addComment(i,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class m1{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",bi,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#a(t,i){let s=0,r=0;for(const l of t){const c=l.y+l.height;if(c<s)continue;const u=l.x+(i?l.width:0);if(c>s){r=u,s=c;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,l]=this.#a(i,s),{style:c}=this.#e||=this.#i();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,i,s,r){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",i);const c=document.createElement("span");l.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(l.addEventListener("contextmenu",bi,{signal:u}),l.addEventListener("click",r,{signal:u})),this.#t.append(l)}}function Im(m,t,i){for(const s of i)t.addEventListener(s,m[s].bind(m))}class Pt{static#t=NaN;static#e=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(Pt.#e||=new Set).add(t)}static setPointer(t,i){Pt.#t||=i,Pt.#i??=t}static setTimeStamp(t){Pt.#n=t}static isSamePointerId(t){return Pt.#t===t}static isSamePointerIdOrRemove(t){return Pt.#t===t?!0:(Pt.#e?.delete(t),!1)}static isSamePointerType(t){return Pt.#i===t}static isInitializedAndDifferentPointerType(t){return Pt.#i!==null&&!Pt.isSamePointerType(t)}static isSameTimeStamp(t){return Pt.#n===t}static isUsingMultiplePointers(){return Pt.#e?.size>=1}static clearPointerType(){Pt.#i=null}static clearPointerIds(){Pt.#t=NaN,Pt.#e=null}static clearTimeStamp(){Pt.#n=NaN}}class y1{#t=0;get id(){return`${pr}${this.#t++}`}}class vh{#t=Lm();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const l=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return yt(this,"_isSVGFittingCanvas",l)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await Ar(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const l=vh._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},c.onload=async()=>{const y=s.svgUrl=c.result;u.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=c.onerror=p});c.readAsDataURL(r),await h}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){mt(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:l}=t;return this.#i(`${i}_${s}_${r}_${l}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class b1{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:r,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:i,post:s,type:l};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(c&&this.#t[this.#i].type===l){u&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class xr{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=be.platform;for(const[s,r,l={}]of t)for(const c of s){const u=c.startsWith("mac+");i&&u?(this.callbacks.set(c.slice(4),{callback:r,options:l}),this.allKeys.add(c.split("+").at(-1))):!i&&!u&&(this.callbacks.set(c,{callback:r,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:l=!1,args:c=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...c,i)(),l||ae(i))}}class Ah{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return h1(t),yt(this,"_colors",t)}convert(t){const i=wr(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((l,c)=>l===i[c]))return Ah._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?st.makeHexColor(...i):t}}class Ln{#t=new AbortController;#e=null;#n=null;#i=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new b1;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#T=null;#x=null;#S=null;#C=null;#A=!1;#E=null;#R=new y1;#M=!1;#D=!1;#I=!1;#O=null;#N=null;#P=null;#B=null;#V=null;#_=At.NONE;#w=new Set;#L=null;#F=null;#U=null;#q=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#z=null;#Y=null;#Z=null;#J=null;#j=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Ln.prototype,i=c=>c.#Y.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return yt(this,"_keyboardManager",new xr([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#Y.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#Y.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:i}]]))}constructor(t,i,s,r,l,c,u,h,f,p,y,b,A,w,S,T){const E=this._signal=this.#t.signal;this.#Y=t,this.#Z=i,this.#J=s,this.#r=r,this.#l=l,this.#F=c,this.#X=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",D=>this.updateParams(D.type,D.value),{signal:E}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:E}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:E}),this.#rt(),this.#dt(),this.#et(),this.#s=h.annotationStorage,this.#T=h.filterFactory,this.#U=f,this.#C=p||null,this.#y=y,this.#v=b,this.#b=A,this.#V=w||null,this.viewParameters={realScale:la.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=T!==!1,l?.setSidebarUiManager(this)}destroy(){this.#j?.resolve(),this.#j=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#g.clear(),this.#B?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#F?.destroy(),this.#E?.hide(),this.#E=null,this.#P?.destroy(),this.#P=null,this.#n=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return yt(this,"hcmFilter",this.#U?this.#T.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return yt(this,"direction",getComputedStyle(this.#Y).direction)}get _highlightColors(){return yt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return yt(this,"highlightColors",null);const i=new Map,s=!!this.#U;for(const[r,l]of t){const c=r.endsWith("_HCM");if(s&&c){i.set(r.replace("_HCM",""),l);continue}!s&&!c&&i.set(r,l)}return yt(this,"highlightColors",i)}get highlightColorNames(){return yt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#P=t}editAltText(t,i=!1){this.#r?.editAltText(this,t,i)}hasCommentManager(){return!!this.#l}editComment(t,i,s,r){this.#l?.showDialog(this,t,i,s,r)}selectComment(t,i){this.#a.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}deleteComment(t,i){const s=()=>{t.comment=i},r=()=>{this._editorUndoBar?.show(s,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:r,undo:s,mustExec:!0})}toggleComment(t,i,s=void 0){this.#l?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#l?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),r=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",r),i())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#F?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#F}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=i)}onPagesEdited({pagesMapper:t}){for(const r of this.#i.values())r.updatePageIndex(t.getPrevPageNumber(r.pageIndex+1)-1);const i=this.#a,s=this.#a=new Map;for(const[r,l]of i){const c=t.getPrevPageNumber(r+1)-1;if(c===-1){l.destroy();continue}s.set(c,l),l.updatePageIndex(c)}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#Y.focus()}findParent(t,i){for(const s of this.#a.values()){const{x:r,y:l,width:c,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+c&&i>=l&&i<=l+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*la.PDF_TO_CSS_UNITS;for(const i of this.#g)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#a.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:l,focusNode:c,focusOffset:u}=s,h=s.toString(),p=this.#Q(s).closest(".textLayer"),y=this.getSelectionBoxes(p);if(!y)return;s.empty();const b=this.#tt(p),A=this.#_===At.NONE,w=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:l,focusNode:c,focusOffset:u,text:h});A&&this.showAllEditors("highlight",!0,!0),i&&S?.editComment()};if(A){this.switchToMode(At.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#E||=new m1(this),this.#E.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const i=`${pr}${t}`,s=this.#s.getRawValue(i);return s&&this.#s.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#E?.hide(),this.#L=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#L)return;const r=this.#Q(t).closest(".textLayer");if(!r){this.#L&&(this.#E?.hide(),this.#L=null,this.#k({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#L=i,this.#k({hasSelectedText:!0}),!(this.#_!==At.HIGHLIGHT&&this.#_!==At.NONE)&&(this.#_===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#_===At.HIGHLIGHT?this.#tt(r):null;if(l?.toggleDrawing(),this.#D){const c=new AbortController,u=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l?.toggleDrawing(!0),f.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else l?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#_===At.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#S)return;this.#S=new AbortController;const t=this.combinedSignal(this.#S);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#S?.abort(),this.#S=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#w)if(i.div.contains(t)){this.#N=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[t,i]=this.#N;this.#N=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#O?.abort(),this.#O=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#w){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const l of i.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(l){mt(`paste: "${l.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const h of s){const f=await r.deserialize(h);if(!f)return;l.push(f)}const c=()=>{for(const h of l)this.#it(h);this.#nt(l)},u=()=>{for(const h of l)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(l){mt(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==At.NONE&&!this.isEditorHandlingKeyboard&&Ln._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(t){Object.entries(t).some(([s,r])=>this.#$[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#_===At.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[kt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#k({isEditing:this.#_!==At.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#G(i.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1,l=!1,c=!1){if(this.#_!==t&&!(this.#j&&(await this.#j.promise,!this.#j))){if(this.#j=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#_===At.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#_=t,t===At.NONE){this.setEditingState(!1),this.#gt();for(const u of this.#i.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#j.resolve();return}for(const u of this.#i.values())u.addStandaloneCommentButton();t===At.SIGNATURE&&await this.#F?.loadSignatures(),s&&Pt.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#a.values())u.updateMode(t);if(t===At.POPUP){this.#n||=await this.#X.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,h=[];for(const f of this.#i.values()){const{annotationElementId:p,hasComment:y,deleted:b}=f;p&&u.add(p),y&&!b&&h.push(f.getData())}for(const f of this.#n){const{id:p,popupRef:y,contentsObj:b}=f;y&&b?.str&&!u.has(p)&&!this.#m.has(p)&&h.push(f)}this.#l?.showSidebar(h)}if(!i){r&&this.addNewEditorFromKeyboard(),this.#j.resolve();return}for(const u of this.#i.values())u.uid===i?(this.setSelected(u),c?u.editComment():l?u.enterInEditMode():u.focus()):u.unselect();this.#j.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case kt.CREATE:this.currentLayer.addNewEditor(i);return;case kt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const l of this.#i.values())l.editorType===t&&l.show(i);(this.#q?.get(kt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#G([[kt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const i of this.#a.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const i of this.#a.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#gt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const i=this.#a.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#pt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#pt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const i of this.#w)i!==t&&i.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#w],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const l of i)l.remove()},r=()=>{for(const l of i)this.#it(l)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#nt(t){for(const i of this.#w)i.unselect();this.#w.clear();for(const i of t)i.isEmpty()||(this.#w.add(i),i.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#nt(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#_!==At.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=i;const[r,l]=this.#H,c=[...this.#w],u=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#i.has(h.id)&&(h.translateInPage(r,l),h.translationDone())},undo:()=>{for(const h of c)this.#i.has(h.id)&&(h.translateInPage(-r,-l),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(t,i),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#w)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let i=!1;for(const[{x:r,y:l,pageIndex:c},u]of t)u.newX=r,u.newY=l,u.newPageIndex=c,i||=r!==u.savedX||l!==u.savedY||c!==u.savedPageIndex;if(!i)return!1;const s=(r,l,c,u)=>{if(this.#i.has(r.id)){const h=this.#a.get(u);h?r._setParentAndPosition(h,l,c):(r.pageIndex=u,r.x=l,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:c,newPageIndex:u}]of t)s(r,l,c,u)},undo:()=>{for(const[r,{savedX:l,savedY:c,savedPageIndex:u}]of t)s(r,l,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#p)for(const s of this.#p.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#_}isEditingMode(){return this.#_!==At.NONE}get imageManager(){return yt(this,"imageManager",new vh)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,p=i.rangeCount;f<p;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:r,width:l,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,y,b)=>({x:(p-r)/c,y:1-(f+y-s)/l,width:b/c,height:y/l});break;case"180":u=(f,p,y,b)=>({x:1-(f+y-s)/l,y:1-(p+b-r)/c,width:y/l,height:b/c});break;case"270":u=(f,p,y,b)=>({x:1-(p+b-r)/c,y:(f-s)/l,width:b/c,height:y/l});break;default:u=(f,p,y,b)=>({x:(f-s)/l,y:(p-r)/c,width:y/l,height:b/c});break}const h=[];for(let f=0,p=i.rangeCount;f<p;f++){const y=i.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:A,width:w,height:S}of y.getClientRects())w===0||S===0||h.push(u(b,A,w,S))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#o||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const i=this.#o?.get(t.data.id);if(!i)return;const s=this.#s.getRawValue(i);s&&(this.#_===At.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#B?.get(t);r&&(r.setCanvas(i,s),this.#B.delete(t))}addMissingCanvas(t,i){(this.#B||=new Map).set(t,i)}}class Bi{#t=null;#e=!1;#n=null;#i=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Bi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Bi._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Bi.#f.missing),i.setAttribute("data-l10n-id",Bi.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",bi,{signal:s}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#s=!0,r(l))},{signal:s}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Bi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const i=this.#o=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#o.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:l=!1}){s&&(this.#l=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(l||(this.#t=t,this.#e=i),this.#p())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Bi.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",Bi.#f[`${this.#m}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#a;if(!i){this.#a=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const r=100,l=this.#c._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:l})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class Yo{#t=null;#e=null;#n=!1;#i=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:r,y:l,width:c,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/c,(i+s-l)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",bi,{signal:s}),i&&(t.addEventListener("focusin",l=>{this.#i._focusEventsAllowed=!1,ae(l)},{capture:!0,signal:s}),t.addEventListener("focusout",l=>{this.#i._focusEventsAllowed=!0,ae(l)},{capture:!0,signal:s})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#n=!0,r(l))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,r;if(i)[s,r]=i;else{[s,r]=this.#i.commentButtonPosition;const{width:p,height:y,x:b,y:A}=this.#i;s=b+s*p,r=A+r*y}const l=this.#i.parent.boundingClientRect,{x:c,y:u,width:h,height:f}=l;this.#i._uiManager.editComment(this.#i,c+s*h,u+r*f,{...t,parentDimensions:l})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#r=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}restoreData({text:t,richText:i,date:s}){this.#s=t,this.#r=i,this.#o=s,this.#c=!1}setInitialText(t,i=null){this.#a=t,this.data=t,this.#o=null,this.#r=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#r=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class gl{#t;#e=!1;#n=null;#i;#a;#r;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#a=r,this.#r=l,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/zi.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,l=AbortSignal.any([this.#c,r.signal]),c=this.#t,u={capture:!0,signal:l,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ae(f),h(f))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),l=this.#t,c={signal:r,capture:!1,passive:!1};l.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#p.bind(this);l.addEventListener("touchend",u,c),l.addEventListener("touchcancel",u,c),c.capture=!0,l.addEventListener("pointerdown",ae,c),l.addEventListener("pointermove",ae,c),l.addEventListener("pointercancel",ae,c),l.addEventListener("pointerup",ae,c),this.#a?.()}if(ae(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#l={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ae(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:l}=i,{screenX:c,screenY:u}=s,h=this.#l,{touch0X:f,touch0Y:p,touch1X:y,touch1Y:b}=h,A=y-f,w=b-p,S=c-r,T=u-l,E=Math.hypot(S,T)||1,D=Math.hypot(A,w)||1;if(!this.#e&&Math.abs(D-E)<=gl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=l,h.touch1X=c,h.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(r+c)/2,(l+u)/2];this.#r?.(C,D,E)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ae(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ct{#t=null;#e=null;#n=null;#i=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#y=!1;#v=!1;#b=null;#T=0;#x=0;#S=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#E=ct._zIndex++;static _borderLineWidth=-1;static _colorManager=new Ah;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ct.prototype._resizeWithKeyboard,i=Ln.TRANSLATE_SMALL,s=Ln.TRANSLATE_BIG;return yt(this,"_resizerKeyboardManager",new xr([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],ct.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[l,c];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return yt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new v1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(ct._l10n??=t,ct._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ct._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ct._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){jt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#z(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[l,c]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/l,this.y=(i+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#R([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#R(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,l]}=this;if(this.x+=t/r,this.y+=i/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,f]=this.getBaseTranslation();c+=h,u+=f;const{style:p}=s;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=ct,r=s/t,l=s/i;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:l,y:c,width:u,height:h}=this;if(u*=s,h*=r,l*=s,c*=r,this._mustFixPosition)switch(t){case 0:l=De(l,0,s-u),c=De(c,0,r-h);break;case 90:l=De(l,0,s-h),c=De(c,u,r);break;case 180:l=De(l,u,s),c=De(c,h,r);break;case 270:l=De(l,h,s),c=De(c,0,r-u);break}this.x=l/=s,this.y=c/=r;const[f,p]=this.getBaseTranslation();l+=f,c+=p,i.left=`${(100*l).toFixed(2)}%`,i.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#M(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return ct.#M(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return ct.#M(t,i,360-this.parentRotation)}#D(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#O.bind(this,s),{signal:i}),r.addEventListener("contextmenu",bi,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(t,i){i.preventDefault();const{isMac:s}=be.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[i.screenX,i.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",ae,{passive:!1,signal:c}),window.addEventListener("contextmenu",bi,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#P()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#N(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#P(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const l=this.x,c=this.y,u=this.width,h=this.height;l===t&&c===i&&u===s&&h===r||this.addCommands({cmd:this.#N.bind(this,l,c,u,h),undo:this.#N.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,i){const[s,r]=this.parentDimensions,l=this.x,c=this.y,u=this.width,h=this.height,f=ct.MIN_SIZE/s,p=ct.MIN_SIZE/r,y=this.#D(this.rotation),b=(L,Y)=>[y[0]*L+y[2]*Y,y[1]*L+y[3]*Y],A=this.#D(360-this.rotation),w=(L,Y)=>[A[0]*L+A[2]*Y,A[1]*L+A[3]*Y];let S,T,E=!1,D=!1;switch(t){case"topLeft":E=!0,S=(L,Y)=>[0,0],T=(L,Y)=>[L,Y];break;case"topMiddle":S=(L,Y)=>[L/2,0],T=(L,Y)=>[L/2,Y];break;case"topRight":E=!0,S=(L,Y)=>[L,0],T=(L,Y)=>[0,Y];break;case"middleRight":D=!0,S=(L,Y)=>[L,Y/2],T=(L,Y)=>[0,Y/2];break;case"bottomRight":E=!0,S=(L,Y)=>[L,Y],T=(L,Y)=>[0,0];break;case"bottomMiddle":S=(L,Y)=>[L/2,Y],T=(L,Y)=>[L/2,0];break;case"bottomLeft":E=!0,S=(L,Y)=>[0,Y],T=(L,Y)=>[L,0];break;case"middleLeft":D=!0,S=(L,Y)=>[0,Y/2],T=(L,Y)=>[L,Y/2];break}const C=S(u,h),I=T(u,h);let N=b(...I);const z=ct._round(l+N[0]),P=ct._round(c+N[1]);let V=1,Q=1,nt,Z;if(i.fromKeyboard)({deltaX:nt,deltaY:Z}=i);else{const{screenX:L,screenY:Y}=i,[tt,pt]=this.#l;[nt,Z]=this.screenToPageTranslation(L-tt,Y-pt),this.#l[0]=L,this.#l[1]=Y}if([nt,Z]=w(nt/s,Z/r),E){const L=Math.hypot(u,h);V=Q=Math.max(Math.min(Math.hypot(I[0]-C[0]-nt,I[1]-C[1]-Z)/L,1/u,1/h),f/u,p/h)}else D?V=De(Math.abs(I[0]-C[0]-nt),f,1)/u:Q=De(Math.abs(I[1]-C[1]-Z),p,1)/h;const ft=ct._round(u*V),Et=ct._round(h*Q);N=b(...T(ft,Et));const ut=z-N[0],Dt=P-N[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ft,this.height=Et,this.x=ut,this.y=Dt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new gr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Bi.initialize(ct._l10n),this.#n=new Bi(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Yo(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#i.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){if(!this.#i)return null;const{data:{richText:t,text:i,date:s,deleted:r}}=this.#i;return{text:i,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Yo(this),typeof t=="object"&&t!==null?this.#i.restoreData(t):this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new Yo(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Yo(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[l]=this.pageDimensions,[c]=this.pageTranslation,u=c+l+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),Im(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new gl({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(t,i,s){let l=.7*(s/i)+1-.7;if(l===1)return;const c=this.#D(this.rotation),u=(z,P)=>[c[0]*z+c[2]*P,c[1]*z+c[3]*P],[h,f]=this.parentDimensions,p=this.x,y=this.y,b=this.width,A=this.height,w=ct.MIN_SIZE/h,S=ct.MIN_SIZE/f;l=Math.max(Math.min(l,1/b,1/A),w/b,S/A);const T=ct._round(b*l),E=ct._round(A*l);if(T===b&&E===A)return;this.#u||=[p,y,b,A];const D=u(b/2,A/2),C=ct._round(p+D[0]),I=ct._round(y+D[1]),N=u(T/2,E/2);this.x=C-N[0],this.y=I-N[1],this.width=T,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#P()}pointerdown(t){const{isMac:i}=be.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#F(t);return}this.#L(t)}#L(t){const{isMac:i}=be.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#F(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:l},u=f=>{r.abort(),this.#s=null,this.#p=!1,this._uiManager.endDragSession()||this.#L(f),s&&this._onStopDragging()};i&&(this.#T=t.clientX,this.#x=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:y,pointerId:b}=f;if(b!==this.#s){ae(f);return}const[A,w]=this.screenToPageTranslation(p-this.#T,y-this.#x);this.#T=p,this.#x=y,this._uiManager.dragSelectedEditors(A,w)},c),window.addEventListener("touchmove",ae,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&u(f),ae(f)},c));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}ae(f)};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[l,c]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,p=i/r,y=this.x*l,b=this.y*c,A=this.width*l,w=this.height*c;switch(s){case 0:return[y+f+u,c-b-p-w+h,y+f+A+u,c-b-p+h];case 90:return[y+p+u,c-b+f+h,y+p+w+u,c-b+f+A+h];case 180:return[y-f-A+u,c-b+p+h,y-f+u,c-b+p+w+h];case 270:return[y-p-w+u,c-b-f-A+h,y-p+u,c-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,l,c]=t,u=l-s,h=c-r;switch(this.rotation){case 0:return[s,i-c,u,h];case 90:return[s,i-r,h,u];case 180:return[l,i-r,u,h];case 270:return[l,i-c,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ct._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:r,deleted:l,richText:c},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:s||p,popupRef:!l,color:i,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return i<c&&r>0&&t<l&&s>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[l,c]=r.pageDimensions,[u,h,f,p]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/l,r.y=h/c,r.width=f/l,r.height=p/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#z(),this.removeEditToolbar(),this.#S){for(const t of this.#S.values())clearTimeout(t);this.#S=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,r,l,c]=this.getPDFRect();return[ct._round(s+(l-s)*t),ct._round(r+(c-r)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const c=this.#q.bind(this),u=this.#X.bind(this),h=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#$.bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",ct._l10nResizer[p])}}const s=this.#e[0];let r=0;for(const c of i){if(c===s)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==r){if(l<r)for(let u=0;u<r-l;u++)this.#c.append(this.#c.firstElementChild);else if(l>r)for(let u=0;u<l-r;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const u of i){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ct._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#q(t){ct._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#z()}#$(t){this.#m=this.#v?t:""}#H(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#B(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#z(){this.#v=!1,this.#H(-1),this.#P()}_stopResizingWithKeyboard(){this.#z(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#S||=new Map;const{action:s}=t;let r=this.#S.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#S.delete(s),this.#S.size===0&&(this.#S=null)},ct._telemetryTimeout),this.#S.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstElementChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class v1 extends ct{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const am=3285377520,pi=4294901760,Li=65535;class Pm{constructor(t){this.h1=t?t&4294967295:am,this.h2=t?t&4294967295:am}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let S=0,T=t.length;S<T;S++){const E=t.charCodeAt(S);E<=255?i[s++]=E:(i[s++]=E>>>8,i[s++]=E&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,l=s-r*4,c=new Uint32Array(i.buffer,0,r);let u=0,h=0,f=this.h1,p=this.h2;const y=3432918353,b=461845907,A=y&Li,w=b&Li;for(let S=0;S<r;S++)S&1?(u=c[S],u=u*y&pi|u*A&Li,u=u<<15|u>>>17,u=u*b&pi|u*w&Li,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=c[S],h=h*y&pi|h*A&Li,h=h<<15|h>>>17,h=h*b&pi|h*w&Li,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,l){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*y&pi|u*A&Li,u=u<<15|u>>>17,u=u*b&pi|u*w&Li,r&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&pi|t*36045&Li,i=i*4283543511&pi|((i<<16|t>>>16)*2950163797&pi)>>>16,t^=i>>>1,t=t*444984403&pi|t*60499&Li,i=i*3301882366&pi|((i<<16|t>>>16)*3120437893&pi)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const lh=Object.freeze({map:null,hash:"",transfer:void 0});class Sh{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof ct&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof ct)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[l,c]of Object.entries(i))s[l]!==c&&(r=!0,s[l]=c);else r=!0,this.#i.set(t,i);r&&this.#a(),i instanceof ct&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Fm(this)}get serializable(){if(this.#i.size===0)return lh;const t=new Map,i=new Pm,s=[],r=Object.create(null);let l=!1;for(const[c,u]of this.#i){const h=u instanceof ct?u.serialize(!1,r):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),h&&(t.set(c,h),i.update(`${c}:${JSON.stringify(h)}`),l||=!!h.bitmap)}if(l)for(const c of t.values())c.bitmap&&s.push(c.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:lh}get editorStats(){let t=null;const i=new Map;let s=0,r=0;for(const l of this.#i.values()){if(!(l instanceof ct)){l.popup&&(l.popup.deleted?r+=1:s+=1);continue}l.isCommentDeleted?r+=1:l.hasEditedComment&&(s+=1);const c=l.telemetryFinalData;if(!c)continue;const{type:u}=c;i.has(u)||i.set(u,Object.getPrototypeOf(l).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[f,p]of Object.entries(c)){if(f==="type")continue;let y=h.get(f);y||(y=new Map,h.set(f,y));const b=y.get(p)??0;y.set(p,b+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[l,c]of i)t[l]=c.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class Fm extends Sh{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,l=structuredClone(i,r?{transfer:r}:null);this.#t={map:l,hash:s,transfer:r}}get print(){jt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return yt(this,"modifiedIds",{ids:new Set,hash:""})}}class A1{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Ft(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:c}=t,u=new FontFace(r,l,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{mt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}jt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw mt(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return yt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return yt(this,"isSyncFontLoadingSupported",Be||be.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Ft(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const l=s.shift();setTimeout(l.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return yt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(I,N){return I.charCodeAt(N)<<24|I.charCodeAt(N+1)<<16|I.charCodeAt(N+2)<<8|I.charCodeAt(N+3)&255}function r(I,N,z,P){const V=I.substring(0,N),Q=I.substring(N+z);return V+P+Q}let l,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(I,N){if(++f>30){mt("Load test font never loaded."),N();return}if(h.font="30px "+I,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(p.bind(null,I,N))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const w=16,S=1482184792;let T=s(b,w);for(l=0,c=y.length-3;l<c;l+=4)T=T-S+s(y,l)|0;l<y.length&&(T=T-S+s(y+"XXX",l)|0),b=r(b,w,4,e1(T));const E=`url(data:font/opentype;base64,${btoa(b)});`,D=`@font-face {font-family:"${y}";src:${E}}`;this.insertRule(D);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const I of[t.loadedName,y]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=I,C.append(N)}this._document.body.append(C),p(y,()=>{C.remove(),i.complete()})}}class S1{#t;constructor(t,i=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(c){mt(`getPathGenerator - ignoring character: "${c}".`)}const l=zm(r?.path);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=l}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){yt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){yt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class na{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let r=0;for(const f of na.strings){const p=i.encode(t[f]);s[f]=p,r+=4+p.length}const l=new ArrayBuffer(r),c=new Uint8Array(l),u=new DataView(l);let h=0;for(const f of na.strings){const p=s[f],y=p.length;u.setUint32(h,y),c.set(p,h+4),h+=4+y}return Ft(h===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Ft(t<na.strings.length,"Invalid string index");let i=0;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class sa{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let r=0;for(const b of sa.strings){const A=i.encode(t[b]);s[b]=A,r+=4+A.length}r+=4;let l,c,u=1+r;t.style&&(l=i.encode(t.style.style),c=i.encode(t.style.weight),u+=4+l.length+4+c.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let y=0;p.setUint8(y++,t.guessFallback?1:0),p.setUint32(y,0),y+=4,r=0;for(const b of sa.strings){const A=s[b],w=A.length;r+=4+w,p.setUint32(y,w),f.set(A,y+4),y+=4+w}return p.setUint32(y-r-4,r),t.style&&(p.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length,p.setUint32(y,c.length),f.set(c,y+4),y+=4+c.length),Ft(y<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Ft(t<sa.strings.length,"Invalid string index");let i=5;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const r=this.#e.getUint32(t),l=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:l}}}class Xt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#a=this.#i+1+6;#r;#s;#o;constructor({data:t,extra:i}){this.#r=t,this.#s=new TextDecoder,this.#o=new DataView(this.#r),i&&Object.assign(this,i)}#c(t){Ft(t<Xt.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,r=this.#o.getUint8(i)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Ft(t<Xt.numbers.length,"Invalid number index"),this.#o.getFloat64(Xt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Xt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Xt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Xt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Ft(t<Xt.strings.length,"Invalid string index");let i=Xt.#a+4;for(let l=0;l<t;l++)i+=this.#o.getUint32(i)+4;const s=this.#o.getUint32(i),r=new Uint8Array(s);return r.set(new Uint8Array(this.#r,i+4,s)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Xt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const l=this.#o.getUint32(t);if(l!==0)return new Uint8Array(this.#r,t+4,l)}clearData(){let t=Xt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);t+=4+r;const l=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,l).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Xt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);t+=4+s;const r=this.#o.getUint32(t);if(r===0)return null;const l=new Uint8Array(r);return l.set(new Uint8Array(this.#r,t+4,r)),new na(l.buffer)}get systemFontInfo(){let t=Xt.#a;const i=this.#o.getUint32(t);t+=4+i;const s=this.#o.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#r,t+4,s)),new sa(r.buffer)}static write(t){const i=t.systemFontInfo?sa.write(t.systemFontInfo):null,s=t.cssFontInfo?na.write(t.cssFontInfo):null,r=new TextEncoder,l={};let c=0;for(const S of Xt.strings)l[S]=r.encode(t[S]),c+=4+l[S].length;const u=Xt.#a+4+c+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let y=0;const b=Xt.bools.length;let A=0,w=0;for(let S=0;S<b;S++){const T=t[Xt.bools[S]];A|=(T===void 0?0:T?2:1)<<w,w+=2,(w===8||S===b-1)&&(p.setUint8(y++,A),A=0,w=0)}Ft(y===Xt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of Xt.numbers)p.setFloat64(y,t[S]),y+=8;if(Ft(y===Xt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(y++,4);for(const S of t.bbox)p.setInt16(y,S,!0),y+=2}else p.setUint8(y++,0),y+=8;if(Ft(y===Xt.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(y++,6);for(const S of t.fontMatrix)p.setFloat64(y,S,!0),y+=8}else p.setUint8(y++,0),y+=48;if(Ft(y===Xt.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(y++,1);for(const S of t.defaultVMetrics)p.setInt16(y,S,!0),y+=2}else p.setUint8(y++,0),y+=6;Ft(y===Xt.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(Xt.#a,0),y+=4;for(const S of Xt.strings){const T=l[S],E=T.length;p.setUint32(y,E),f.set(T,y+4),y+=4+E}if(p.setUint32(Xt.#a,y-Xt.#a-4),!i)p.setUint32(y,0),y+=4;else{const S=i.byteLength;p.setUint32(y,S),Ft(y+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}if(!s)p.setUint32(y,0),y+=4;else{const S=s.byteLength;p.setUint32(y,S),Ft(y+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(p.setUint32(y,0),y+=4):(p.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Ft(y<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(y)}}class Se{static#t=0;static#e=1;static#n=2;static#i=3;static#a=4;static#r=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let i,s=null,r=[],l=[],c=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":i=t[1]==="axial"?1:2,s=t[2],c=t[3],i===1?r.push(...t[4],...t[5]):r.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":i=3,h=t[1],r=t[2],l=t[3],u=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(r.length/2),y=Math.floor(l.length/3),b=c.length,A=u.length;let w=0;for(const N of u)w+=1,w=Math.ceil(w/4)*4,w+=4+N.coords.length*4,w+=4+N.colors.length*4,N.verticesPerRow!==void 0&&(w+=4);const S=20+p*8+y*3+b*8+(s?16:0)+(f?3:0)+w,T=new ArrayBuffer(S),E=new DataView(T),D=new Uint8Array(T);E.setUint8(Se.#t,i),E.setUint8(Se.#e,s?1:0),E.setUint8(Se.#n,f?1:0),E.setUint8(Se.#i,h),E.setUint32(Se.#a,p,!0),E.setUint32(Se.#r,y,!0),E.setUint32(Se.#s,b,!0),E.setUint32(Se.#o,A,!0);let C=20;new Float32Array(T,C,p*2).set(r),C+=p*8,D.set(l,C),C+=y*3;for(const[N,z]of c)E.setFloat32(C,N,!0),C+=4,E.setUint32(C,parseInt(z.slice(1),16),!0),C+=4;if(s)for(const N of s)E.setFloat32(C,N,!0),C+=4;f&&(D.set(f,C),C+=3);for(let N=0;N<u.length;N++){const z=u[N];E.setUint8(C,z.type),C+=1,C=Math.ceil(C/4)*4,E.setUint32(C,z.coords.length,!0),C+=4,new Int32Array(T,C,z.coords.length).set(z.coords),C+=z.coords.length*4,E.setUint32(C,z.colors.length,!0),C+=4,new Int32Array(T,C,z.colors.length).set(z.colors),C+=z.colors.length*4,z.verticesPerRow!==void 0&&(E.setUint32(C,z.verticesPerRow,!0),C+=4)}return T}getIR(){const t=this.view,i=this.data[Se.#t],s=!!this.data[Se.#e],r=!!this.data[Se.#n],l=t.getUint32(Se.#a,!0),c=t.getUint32(Se.#r,!0),u=t.getUint32(Se.#s,!0),h=t.getUint32(Se.#o,!0);let f=20;const p=new Float32Array(this.buffer,f,l*2);f+=l*8;const y=new Uint8Array(this.buffer,f,c*3);f+=c*3;const b=[];for(let T=0;T<u;++T){const E=t.getFloat32(f,!0);f+=4;const D=t.getUint32(f,!0);f+=4,b.push([E,`#${D.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let T=0;T<4;++T)A.push(t.getFloat32(f,!0)),f+=4}let w=null;r&&(w=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let T=0;T<h;++T){const E=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const D=t.getUint32(f,!0);f+=4;const C=new Int32Array(this.buffer,f,D);f+=D*4;const I=t.getUint32(f,!0);f+=4;const N=new Int32Array(this.buffer,f,I);f+=I*4;const z={type:E,coords:C,colors:N};E===nh.LATTICE&&(z.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(z)}if(i===1)return["RadialAxial","axial",A,b,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(i===2)return["RadialAxial","radial",A,b,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(i===3){const T=this.data[Se.#i];let E=null;if(p.length>0){let D=p[0],C=p[0],I=p[1],N=p[1];for(let z=0;z<p.length;z+=2){const P=p[z],V=p[z+1];D=D>P?P:D,I=I>V?V:I,C=C<P?P:C,N=N<V?V:N}E=[D,I,C,N]}return["Mesh",T,p,y,S,E,A,w]}throw new Error(`Unsupported pattern kind: ${i}`)}}class w1{static write(t){let i,s;return be.isFloat16ArraySupported?(s=new ArrayBuffer(t.length*2),i=new Float16Array(s)):(s=new ArrayBuffer(t.length*4),i=new Float32Array(s)),i.set(t),s}#t;constructor(t){this.#t=t}get path(){return be.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function x1(m){if(m instanceof URL)return m.href;if(typeof m=="string"){if(Be)return m;const t=URL.parse(m,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function E1(m){if(Be&&typeof Buffer<"u"&&m instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength)return m;if(typeof m=="string")return dl(m);if(m instanceof ArrayBuffer||ArrayBuffer.isView(m)||typeof m=="object"&&!isNaN(m?.length))return new Uint8Array(m);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Xo(m){if(typeof m!="string")return null;if(m.endsWith("/"))return m;throw new Error(`Invalid factory url: "${m}" must include trailing slash.`)}const ch=m=>typeof m=="object"&&Number.isInteger(m?.num)&&m.num>=0&&Number.isInteger(m?.gen)&&m.gen>=0,T1=m=>typeof m=="object"&&typeof m?.name=="string",_1=r1.bind(null,ch,T1);class C1{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:l}=s;if(l.aborted){mt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,i);r=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const qo={DATA:1,ERROR:2},ge={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function rm(){}function Ye(m){if(m instanceof On||m instanceof sh||m instanceof Zp||m instanceof al||m instanceof qu)return m;switch(m instanceof Error||typeof m=="object"&&m!==null||jt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),m.name){case"AbortException":return new On(m.message);case"InvalidPDFException":return new sh(m.message);case"PasswordException":return new Zp(m.message,m.code);case"ResponseException":return new al(m.message,m.status,m.missing);case"UnknownErrorException":return new qu(m.message,m.details)}return new qu(m.message,m.toString())}class dr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===qo.DATA)r.resolve(t.data);else if(t.callback===qo.ERROR)r.reject(Ye(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,l=this.comObj;Promise.try(i,t.data).then(function(c){l.postMessage({sourceName:s,targetName:r,callback:qo.DATA,callbackId:t.callbackId,data:c})},function(c){l.postMessage({sourceName:s,targetName:r,callback:qo.ERROR,callbackId:t.callbackId,reason:Ye(c)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(c){l.reject(c)}return l.promise}sendWithStream(t,i,s,r){const l=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[l]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:t,streamId:l,data:i,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[l].pullCall=p,h.postMessage({sourceName:c,targetName:u,stream:ge.PULL,streamId:l,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Ft(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[l].cancelCall=p,this.streamControllers[l].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:ge.CANCEL,streamId:l,reason:Ye(f)}),p.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,c=this,u=this.actionHandler[t.action],h={enqueue(f,p=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=p,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:s,targetName:r,stream:ge.ENQUEUE,streamId:i,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:ge.CLOSE,streamId:i}),delete c.streamSinks[i])},error(f){Ft(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:ge.ERROR,streamId:i,reason:Ye(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[i]=h,Promise.try(u,t.data,h).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ge.START_COMPLETE,streamId:i,success:!0})},function(f){l.postMessage({sourceName:s,targetName:r,stream:ge.START_COMPLETE,streamId:i,reason:Ye(f)})})}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,c=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case ge.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Ye(t.reason));break;case ge.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Ye(t.reason));break;case ge.PULL:if(!u){l.postMessage({sourceName:s,targetName:r,stream:ge.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||rm).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ge.PULL_COMPLETE,streamId:i,success:!0})},function(f){l.postMessage({sourceName:s,targetName:r,stream:ge.PULL_COMPLETE,streamId:i,reason:Ye(f)})});break;case ge.ENQUEUE:if(Ft(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case ge.CLOSE:if(Ft(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#a(c,i);break;case ge.ERROR:Ft(c,"error should have stream controller"),c.controller.error(Ye(t.reason)),this.#a(c,i);break;case ge.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Ye(t.reason)),this.#a(c,i);break;case ge.CANCEL:if(!u)break;const h=Ye(t.reason);Promise.try(u.onCancel||rm,h).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ge.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){l.postMessage({sourceName:s,targetName:r,stream:ge.CANCEL_COMPLETE,streamId:i,reason:Ye(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#a(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class jm{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){jt("Abstract method `_createCanvas` called.")}}class M1 extends jm{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class Um{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){jt("Abstract method `_fetch` called.")}}class om extends Um{async _fetch(t){const i=await Ar(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):dl(i)}}class Hm{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,l){return"none"}destroy(t=!1){}}class D1 extends Hm{#t;#e;#n;#i;#a;#r;#s=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#a=i}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#n){const t=this.#a.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#a.createElementNS(en,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#a.createElementNS(en,"defs"),t.append(s),s.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=h[y]/255;const p=f.join(",");return[p,p,p]}const[i,s,r]=t,l=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)l[h]=i[h]/255,c[h]=s[h]/255,u[h]=r[h]/255;return[l.join(","),c.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#a.URL;i!==this.#a.baseURI&&(fl(i)?mt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Om(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#o.get(t);if(i)return i;const[s,r,l]=this.#d(t),c=t.length===1?s:`${s}${r}${l}`;if(i=this.#o.get(c),i)return this.#o.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#s++}`,h=this.#h(u);this.#o.set(t,h),this.#o.set(c,h);const f=this.#p(u);return this.#g(s,r,l,f),h}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let l=this.#c.get(r);if(l?.key===s||(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#c.set(r,l)),!t||!i))return l.url;const c=this.#v(t);t=st.makeHexColor(...c);const u=this.#v(i);if(i=st.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return l.url;const h=new Array(256);for(let A=0;A<=255;A++){const w=A/255;h[A]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=h.join(","),p=`g_${this.#i}_hcm_filter`,y=l.filter=this.#p(p);this.#g(f,f,f,y),this.#m(y);const b=(A,w)=>{const S=c[A]/255,T=u[A]/255,E=new Array(w+1);for(let D=0;D<=w;D++)E[D]=S+D/w*(T-S);return E.join(",")};return this.#g(b(0,5),b(1,5),b(2,5),y),l.url=this.#h(p),l.url}addAlphaFilter(t){let i=this.#o.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#o.get(r),i)return this.#o.set(t,i),i;const l=`g_${this.#i}_alpha_map_${this.#s++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(r,c);const u=this.#p(l);return this.#y(s,u),c}addLuminosityFilter(t){let i=this.#o.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#o.get(r),i)return this.#o.set(t,i),i;const l=`g_${this.#i}_luminosity_map_${this.#s++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(r,c);const u=this.#p(l);return this.#f(u),t&&this.#y(s,u),c}addHighlightHCMFilter(t,i,s,r,l){const c=`${i}-${s}-${r}-${l}`;let u=this.#c.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[h,f]=[i,s].map(this.#v.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,A]=[r,l].map(this.#v.bind(this));y<p&&([p,y,b,A]=[y,p,A,b]),this.#l.style.color="";const w=(E,D,C)=>{const I=new Array(256),N=(y-p)/C,z=E/255,P=(D-E)/(255*C);let V=0;for(let Q=0;Q<=C;Q++){const nt=Math.round(p+Q*N),Z=z+Q*P;for(let ft=V;ft<=nt;ft++)I[ft]=Z;V=nt+1}for(let Q=V;Q<256;Q++)I[Q]=I[V-1];return I.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,T=u.filter=this.#p(S);return this.#m(T),this.#g(w(b[0],A[0],5),w(b[1],A[1],5),w(b[2],A[2],5),T),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(t){const i=this.#a.createElementNS(en,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#a.createElementNS(en,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#p(t){const i=this.#a.createElementNS(en,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#l.append(i),i}#u(t,i,s){const r=this.#a.createElementNS(en,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#g(t,i,s,r){const l=this.#a.createElementNS(en,"feComponentTransfer");r.append(l),this.#u(l,"feFuncR",t),this.#u(l,"feFuncG",i),this.#u(l,"feFuncB",s)}#y(t,i){const s=this.#a.createElementNS(en,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,wr(getComputedStyle(this.#l).getPropertyValue("color"))}}class Gm{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){jt("Abstract method `_fetch` called.")}}class lm extends Gm{async _fetch(t){const i=await Ar(t,"arraybuffer");return new Uint8Array(i)}}class Vm{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){jt("Abstract method `_fetch` called.")}}class cm extends Vm{async _fetch(t){const i=await Ar(t,"arraybuffer");return new Uint8Array(i)}}Be&&mt("Please use the `legacy` build in Node.js environments.");async function wh(m){const i=await process.getBuiltinModule("fs").promises.readFile(m);return new Uint8Array(i)}class R1 extends Hm{}class k1 extends jm{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class O1 extends Um{async _fetch(t){return wh(t)}}class L1 extends Gm{async _fetch(t){return wh(t)}}class N1 extends Vm{async _fetch(t){return wh(t)}}const Ks="__forcedDependency",{floor:um,ceil:hm}=Math;function $o(m,t,i,s,r,l){m[t*4+0]=Math.min(m[t*4+0],i),m[t*4+1]=Math.min(m[t*4+1],s),m[t*4+2]=Math.max(m[t*4+2],r),m[t*4+3]=Math.max(m[t*4+3],l)}const uh=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class B1{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===uh}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Wo=(m,t)=>{if(!m)return;let i=m.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},m.set(t,i)),i};class z1{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Ks]:[]};#n=new Map;#i=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#y(i),s&&(this.#g=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,i){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(uh,i.length)):this.#u.fill(uh)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Ks]:{__proto__:this.#e[Ks]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#i.pop();return s!==void 0&&(Wo(this.#g,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&(Wo(this.#g,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const i=this.#a.pop();return i!==void 0&&(Wo(this.#g,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#r.push(st.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData(Ks,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Ks,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,i,s,r,l,c){const u=st.multiplyByDOMMatrix(this.#r.at(-1),i.getTransform()),h=[1/0,1/0,-1/0,-1/0];st.axialAlignedBoundingBox([s,l,r,c],u,h);const f=st.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,i,s,r,l,c){const u=this.#s;if(u[0]===1/0)return this;const h=st.multiplyByDOMMatrix(this.#r.at(-1),i.getTransform());if(u[0]===-1/0)return st.axialAlignedBoundingBox([s,l,r,c],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return st.axialAlignedBoundingBox([s,l,r,c],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,i,s,r=1,l=0,c=0,u){const h=s.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(s),f!==!1&&(p=[0,0,0,0],st.axialAlignedBoundingBox(h,s.fontMatrix,p),(r!==1||l!==0||c!==0)&&st.scaleMinMax([r,0,0,-r,l,c],p),f)))return this.recordBBox(t,i,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return h&&p&&f===void 0&&(f=p[0]<=l-y.actualBoundingBoxLeft&&p[2]>=l+y.actualBoundingBoxRight&&p[1]<=c-y.actualBoundingBoxAscent&&p[3]>=c+y.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,i,p[0],p[2],p[1],p[3]):this.recordBBox(t,i,l-y.actualBoundingBoxLeft,l+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#l,r=this.#t,l=this.#e;for(const c of i)c in this.#t?s.add(r[c]):c in l&&l[c].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#l.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[Ks]),this.#g){const s=Wo(this.#g,t),{dependencies:r}=s;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#a.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=um(this.#o[0]*256/this.#f),r=um(this.#o[1]*256/this.#m),l=hm(this.#o[2]*256/this.#f),c=hm(this.#o[3]*256/this.#m);$o(this.#p,t,s,r,l,c);for(const u of this.#l)u!==t&&$o(this.#p,u,s,r,l,c);for(const u of this.#i)u!==t&&$o(this.#p,u,s,r,l,c);for(const u of this.#a)u!==t&&$o(this.#p,u,s,r,l,c);i||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#l);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),i||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#l.add(i)}take(){return this.#h.clear(),new B1(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class rl{#t;#e;#n;#i=0;#a=0;constructor(t,i,s){if(t instanceof rl&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,r,l,c){return this.#n||this.#t.recordClipBox(this.#e,i,s,r,l,c),this}recordBBox(t,i,s,r,l,c){return this.#n||this.#t.recordBBox(this.#e,i,s,r,l,c),this}recordCharacterBBox(t,i,s,r,l,c,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,r,l,c,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const mi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Re={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function hh(m,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),m.clip(r)}class xh{isModifyingCurrentTransform(){return!1}getPattern(){jt("Abstract method `getPattern` called.")}}class I1 extends xh{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,i=null){let s,r=this._p0,l=this._p1;if(i&&(r=r.slice(),l=l.slice(),st.applyTransform(r,i),st.applyTransform(l,i)),this._type==="axial")s=t.createLinearGradient(r[0],r[1],l[0],l[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(i){const h=new Float32Array(2);st.singularValueDecompose2dScale(i,h),c*=h[0],u*=h[0]}s=t.createRadialGradient(r[0],r[1],c,l[0],l[1],u)}for(const c of this._colorStops)s.addColorStop(c[0],c[1]);return s}getPattern(t,i,s,r){let l;if(r===Re.STROKE||r===Re.FILL){if(this.isOriginBased()){let b=st.transform(s,i.baseTransform);this.matrix&&(b=st.transform(b,this.matrix));const A=.001,w=Math.hypot(b[0],b[1]),S=Math.hypot(b[2],b[3]),T=(b[0]*b[2]+b[1]*b[3])/(w*S);if(Math.abs(T)<A)if(this.isRadial()){if(Math.abs(w-S)<A)return this._createGradient(t,b)}else return this._createGradient(t,b)}const c=i.current.getClippedPathBoundingBox(r,ee(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),s=st.transform(s,[1,0,0,1,c[0],c[1]]),p.transform(...i.baseTransform),this.matrix&&p.transform(...this.matrix),hh(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),l=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(s);l.setTransform(y)}else hh(t,this._bbox),l=this._createGradient(t);return l}}function Ku(m,t,i,s,r,l,c,u){const h=t.coords,f=t.colors,p=m.data,y=m.width*4;let b;h[i+1]>h[s+1]&&(b=i,i=s,s=b,b=l,l=c,c=b),h[s+1]>h[r+1]&&(b=s,s=r,r=b,b=c,c=u,u=b),h[i+1]>h[s+1]&&(b=i,i=s,s=b,b=l,l=c,c=b);const A=(h[i]+t.offsetX)*t.scaleX,w=(h[i+1]+t.offsetY)*t.scaleY,S=(h[s]+t.offsetX)*t.scaleX,T=(h[s+1]+t.offsetY)*t.scaleY,E=(h[r]+t.offsetX)*t.scaleX,D=(h[r+1]+t.offsetY)*t.scaleY;if(w>=D)return;const C=f[l],I=f[l+1],N=f[l+2],z=f[c],P=f[c+1],V=f[c+2],Q=f[u],nt=f[u+1],Z=f[u+2],ft=Math.round(w),Et=Math.round(D);let ut,Dt,L,Y,tt,pt,St,R;for(let H=ft;H<=Et;H++){if(H<T){const O=H<w?0:(w-H)/(w-T);ut=A-(A-S)*O,Dt=C-(C-z)*O,L=I-(I-P)*O,Y=N-(N-V)*O}else{let O;H>D?O=1:T===D?O=0:O=(T-H)/(T-D),ut=S-(S-E)*O,Dt=z-(z-Q)*O,L=P-(P-nt)*O,Y=V-(V-Z)*O}let K;H<w?K=0:H>D?K=1:K=(w-H)/(w-D),tt=A-(A-E)*K,pt=C-(C-Q)*K,St=I-(I-nt)*K,R=N-(N-Z)*K;const et=Math.round(Math.min(ut,tt)),ht=Math.round(Math.max(ut,tt));let gt=y*H+et*4;for(let O=et;O<=ht;O++)K=(ut-O)/(ut-tt),K<0?K=0:K>1&&(K=1),p[gt++]=Dt-(Dt-pt)*K|0,p[gt++]=L-(L-St)*K|0,p[gt++]=Y-(Y-R)*K|0,p[gt++]=255}}function P1(m,t,i){const s=t.coords,r=t.colors;let l,c;switch(t.type){case nh.LATTICE:const u=t.verticesPerRow,h=Math.floor(s.length/u)-1,f=u-1;for(l=0;l<h;l++){let p=l*u;for(let y=0;y<f;y++,p++)Ku(m,i,s[p],s[p+1],s[p+u],r[p],r[p+1],r[p+u]),Ku(m,i,s[p+u+1],s[p+1],s[p+u],r[p+u+1],r[p+1],r[p+u])}break;case nh.TRIANGLES:for(l=0,c=s.length;l<c;l+=3)Ku(m,i,s[l],s[l+1],s[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class F1 extends xh{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),A=f/y,w=p/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/A,scaleY:1/w},T=y+4,E=b+4,D=s.getCanvas("mesh",T,E),C=D.context,I=C.createImageData(y,b);if(i){const z=I.data;for(let P=0,V=z.length;P<V;P+=4)z[P]=i[0],z[P+1]=i[1],z[P+2]=i[2],z[P+3]=255}for(const z of this._figures)P1(I,z,S);return C.putImageData(I,2,2),{canvas:D.canvas,offsetX:u-2*A,offsetY:h-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){hh(t,this._bbox);const l=new Float32Array(2);if(r===Re.SHADING)st.singularValueDecompose2dScale(ee(t),l);else if(this.matrix){st.singularValueDecompose2dScale(this.matrix,l);const[u,h]=l;st.singularValueDecompose2dScale(i.baseTransform,l),l[0]*=u,l[1]*=h}else st.singularValueDecompose2dScale(i.baseTransform,l);const c=this._createMeshCanvas(l,r===Re.SHADING?null:this._background,i.cachedCanvases);return r!==Re.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class j1 extends xh{getPattern(){return"hotpink"}}function U1(m){switch(m[0]){case"RadialAxial":return new I1(m);case"Mesh":return new F1(m);case"Dummy":return new j1}throw new Error(`Unknown IR type: ${m[0]}`)}const dm={COLORED:1,UNCOLORED:2};class Eh{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,i){const{bbox:s,operatorList:r,paintType:l,tilingType:c,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),hl("TilingType: "+c);const y=s[0],b=s[1],A=s[2],w=s[3],S=A-y,T=w-b,E=new Float32Array(2);st.singularValueDecompose2dScale(this.matrix,E);const[D,C]=E;st.singularValueDecompose2dScale(this.baseTransform,E);const I=D*E[0],N=C*E[1];let z=S,P=T,V=!1,Q=!1;const nt=Math.ceil(f*I),Z=Math.ceil(p*N),ft=Math.ceil(S*I),Et=Math.ceil(T*N);nt>=ft?z=f:V=!0,Z>=Et?P=p:Q=!0;const ut=this.getSizeAndScale(z,this.ctx.canvas.width,I),Dt=this.getSizeAndScale(P,this.ctx.canvas.height,N),L=t.cachedCanvases.getCanvas("pattern",ut.size,Dt.size),Y=L.context,tt=h.createCanvasGraphics(Y,i);if(tt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(tt,l,u),Y.translate(-ut.scale*y,-Dt.scale*b),tt.transform(0,ut.scale,0,0,Dt.scale,0,0),Y.save(),tt.dependencyTracker?.save(),this.clipBbox(tt,y,b,A,w),tt.baseTransform=ee(tt.ctx),tt.executeOperatorList(r),tt.endDrawing(),tt.dependencyTracker?.restore(),Y.restore(),V||Q){const pt=L.canvas;V&&(z=f),Q&&(P=p);const St=this.getSizeAndScale(z,this.ctx.canvas.width,I),R=this.getSizeAndScale(P,this.ctx.canvas.height,N),H=St.size,K=R.size,et=t.cachedCanvases.getCanvas("pattern-workaround",H,K),ht=et.context,gt=V?Math.floor(S/f):0,O=Q?Math.floor(T/p):0;for(let it=0;it<=gt;it++)for(let J=0;J<=O;J++)ht.drawImage(pt,H*it,K*J,H,K,0,0,H,K);return{canvas:et.canvas,scaleX:St.scale,scaleY:R.scale,offsetX:y,offsetY:b}}return{canvas:L.canvas,scaleX:ut.scale,scaleY:Dt.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,i,s){const r=Math.max(Eh.MAX_PATTERN_SIZE,i);let l=Math.ceil(t*s);return l>=r?l=r:s=l/t,{scale:s,size:l}}clipBbox(t,i,s,r,l){const c=r-i,u=l-s;t.ctx.rect(i,s,c,u),st.axialAlignedBoundingBox([i,s,r,l],ee(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,l=t.current;switch(i){case dm.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;r.fillStyle=l.fillColor=c,r.strokeStyle=l.strokeColor=u;break;case dm.UNCOLORED:r.fillStyle=r.strokeStyle=s,l.fillColor=l.strokeColor=s;break;default:throw new Jv(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r,l){let c=s;r!==Re.SHADING&&(c=st.transform(c,i.baseTransform),this.matrix&&(c=st.transform(c,this.matrix)));const u=this.createPatternCanvas(i,l);let h=new DOMMatrix(c);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function H1({src:m,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const u=be.isLittleEndian?4278190080:255,[h,f]=c?[l,u]:[u,l],p=s>>3,y=s&7,b=m.length;i=new Uint32Array(i.buffer);let A=0;for(let w=0;w<r;w++){for(const T=t+p;t<T;t++){const E=t<b?m[t]:255;i[A++]=E&128?f:h,i[A++]=E&64?f:h,i[A++]=E&32?f:h,i[A++]=E&16?f:h,i[A++]=E&8?f:h,i[A++]=E&4?f:h,i[A++]=E&2?f:h,i[A++]=E&1?f:h}if(y===0)continue;const S=t<b?m[t++]:255;for(let T=0;T<y;T++)i[A++]=S&1<<7-T?f:h}return{srcPos:t,destPos:A}}const fm=16,gm=100,G1=15,pm=10,Xe=16,Qu=new DOMMatrix,si=new Float32Array(2),ea=new Float32Array([1/0,1/0,-1/0,-1/0]);function V1(m,t){if(m._removeMirroring)throw new Error("Context is already forwarding operations.");m.__originalSave=m.save,m.__originalRestore=m.restore,m.__originalRotate=m.rotate,m.__originalScale=m.scale,m.__originalTranslate=m.translate,m.__originalTransform=m.transform,m.__originalSetTransform=m.setTransform,m.__originalResetTransform=m.resetTransform,m.__originalClip=m.clip,m.__originalMoveTo=m.moveTo,m.__originalLineTo=m.lineTo,m.__originalBezierCurveTo=m.bezierCurveTo,m.__originalRect=m.rect,m.__originalClosePath=m.closePath,m.__originalBeginPath=m.beginPath,m._removeMirroring=()=>{m.save=m.__originalSave,m.restore=m.__originalRestore,m.rotate=m.__originalRotate,m.scale=m.__originalScale,m.translate=m.__originalTranslate,m.transform=m.__originalTransform,m.setTransform=m.__originalSetTransform,m.resetTransform=m.__originalResetTransform,m.clip=m.__originalClip,m.moveTo=m.__originalMoveTo,m.lineTo=m.__originalLineTo,m.bezierCurveTo=m.__originalBezierCurveTo,m.rect=m.__originalRect,m.closePath=m.__originalClosePath,m.beginPath=m.__originalBeginPath,delete m._removeMirroring},m.save=function(){t.save(),this.__originalSave()},m.restore=function(){t.restore(),this.__originalRestore()},m.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},m.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},m.transform=function(i,s,r,l,c,u){t.transform(i,s,r,l,c,u),this.__originalTransform(i,s,r,l,c,u)},m.setTransform=function(i,s,r,l,c,u){t.setTransform(i,s,r,l,c,u),this.__originalSetTransform(i,s,r,l,c,u)},m.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},m.rotate=function(i){t.rotate(i),this.__originalRotate(i)},m.clip=function(i){t.clip(i),this.__originalClip(i)},m.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},m.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},m.bezierCurveTo=function(i,s,r,l,c,u){t.bezierCurveTo(i,s,r,l,c,u),this.__originalBezierCurveTo(i,s,r,l,c,u)},m.rect=function(i,s,r,l){t.rect(i,s,r,l),this.__originalRect(i,s,r,l)},m.closePath=function(){t.closePath(),this.__originalClosePath()},m.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Y1{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Ko(m,t,i,s,r,l,c,u,h,f){const[p,y,b,A,w,S]=ee(m);if(y===0&&b===0){const D=c*p+w,C=Math.round(D),I=u*A+S,N=Math.round(I),z=(c+h)*p+w,P=Math.abs(Math.round(z)-C)||1,V=(u+f)*A+S,Q=Math.abs(Math.round(V)-N)||1;return m.setTransform(Math.sign(p),0,0,Math.sign(A),C,N),m.drawImage(t,i,s,r,l,0,0,P,Q),m.setTransform(p,y,b,A,w,S),[P,Q]}if(p===0&&A===0){const D=u*b+w,C=Math.round(D),I=c*y+S,N=Math.round(I),z=(u+f)*b+w,P=Math.abs(Math.round(z)-C)||1,V=(c+h)*y+S,Q=Math.abs(Math.round(V)-N)||1;return m.setTransform(0,Math.sign(y),Math.sign(b),0,C,N),m.drawImage(t,i,s,r,l,0,0,Q,P),m.setTransform(p,y,b,A,w,S),[Q,P]}m.drawImage(t,i,s,r,l,c,u,h,f);const T=Math.hypot(p,y),E=Math.hypot(b,A);return[T*h,E*f]}class mm{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=ih;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ye.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=ea.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Re.FILL,i=null){const s=this.minMax.slice();if(t===Re.STROKE){i||jt("Stroke bounding box must include transform."),st.singularValueDecompose2dScale(i,si);const r=si[0]*this.lineWidth/2,l=si[1]*this.lineWidth/2;s[0]-=r,s[1]-=l,s[2]+=r,s[3]+=l}return s}updateClipFromPath(){const t=st.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ea,0)}getClippedPathBoundingBox(t=Re.FILL,i=null){return st.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function ym(m,t){if(t instanceof ImageData){m.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%Xe,l=(i-r)/Xe,c=r===0?l:l+1,u=m.createImageData(s,Xe);let h=0,f;const p=t.data,y=u.data;let b,A,w,S;if(t.kind===el.GRAYSCALE_1BPP){const T=p.byteLength,E=new Uint32Array(y.buffer,0,y.byteLength>>2),D=E.length,C=s+7>>3,I=4294967295,N=be.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(w=b<l?Xe:r,f=0,A=0;A<w;A++){const z=T-h;let P=0;const V=z>C?s:z*8-7,Q=V&-8;let nt=0,Z=0;for(;P<Q;P+=8)Z=p[h++],E[f++]=Z&128?I:N,E[f++]=Z&64?I:N,E[f++]=Z&32?I:N,E[f++]=Z&16?I:N,E[f++]=Z&8?I:N,E[f++]=Z&4?I:N,E[f++]=Z&2?I:N,E[f++]=Z&1?I:N;for(;P<V;P++)nt===0&&(Z=p[h++],nt=128),E[f++]=Z&nt?I:N,nt>>=1}for(;f<D;)E[f++]=0;m.putImageData(u,0,b*Xe)}}else if(t.kind===el.RGBA_32BPP){for(A=0,S=s*Xe*4,b=0;b<l;b++)y.set(p.subarray(h,h+S)),h+=S,m.putImageData(u,0,A),A+=Xe;b<c&&(S=s*r*4,y.set(p.subarray(h,h+S)),m.putImageData(u,0,A))}else if(t.kind===el.RGB_24BPP)for(w=Xe,S=s*w,b=0;b<c;b++){for(b>=l&&(w=r,S=s*w),f=0,A=S;A--;)y[f++]=p[h++],y[f++]=p[h++],y[f++]=p[h++],y[f++]=255;m.putImageData(u,0,b*Xe)}else throw new Error(`bad image kind: ${t.kind}`)}function bm(m,t){if(t.bitmap){m.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%Xe,l=(i-r)/Xe,c=r===0?l:l+1,u=m.createImageData(s,Xe);let h=0;const f=t.data,p=u.data;for(let y=0;y<c;y++){const b=y<l?Xe:r;({srcPos:h}=H1({src:f,srcPos:h,dest:p,width:s,height:b,nonBlackColor:0})),m.putImageData(u,0,y*Xe)}}function rr(m,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)m[s]!==void 0&&(t[s]=m[s]);m.setLineDash!==void 0&&(t.setLineDash(m.getLineDash()),t.lineDashOffset=m.lineDashOffset)}function Qo(m){m.strokeStyle=m.fillStyle="#000000",m.fillRule="nonzero",m.globalAlpha=1,m.lineWidth=1,m.lineCap="butt",m.lineJoin="miter",m.miterLimit=10,m.globalCompositeOperation="source-over",m.font="10px sans-serif",m.setLineDash!==void 0&&(m.setLineDash([]),m.lineDashOffset=0);const{filter:t}=m;t!=="none"&&t!==""&&(m.filter="none")}function vm(m,t){if(t)return!0;st.singularValueDecompose2dScale(m,si);const i=Math.fround(zi.pixelRatio*la.PDF_TO_CSS_UNITS);return si[0]<=i&&si[1]<=i}const X1=["butt","round","square"],q1=["miter","round","bevel"],$1={},Am={};class aa{constructor(t,i,s,r,l,{optionalContentConfig:c,markedContentStack:u=null},h,f,p){this.ctx=t,this.current=new mm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new Y1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...ee(this.compositeCtx))}this.ctx.save(),Qo(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=ee(this.ctx)}executeOperatorList(t,i,s,r,l){const c=t.argsArray,u=t.fnArray;let h=i||0;const f=c.length;if(f===h)return h;const p=f-h>pm&&typeof s=="function",y=p?Date.now()+G1:0;let b=0;const A=this.commonObjs,w=this.objs;let S,T;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,s),h;if(!l||l(h))if(S=u[h],T=c[h]??null,S!==mr.dependency)T===null?this[S](h):this[S](h,...T);else for(const E of T){this.dependencyTracker?.recordNamedData(E,h);const D=E.startsWith("g_")?A:w;if(!D.has(E))return D.get(E,s),h}if(h++,h===f)return h;if(p&&++b>pm){if(Date.now()>y)return s(),h;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let l=Math.max(Math.hypot(i[0],i[1]),1),c=Math.max(Math.hypot(i[2],i[3]),1),u=s,h=r,f="prescale1",p,y;for(;l>2&&u>1||c>2&&h>1;){let b=u,A=h;l>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/b),c>2&&h>1&&(A=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/A),p=this.cachedCanvases.getCanvas(f,b,A),y=p.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,u,h,0,0,b,A),t=p.canvas,u=b,h=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,i){const s=this.ctx,{width:r,height:l}=i,c=this.current.fillColor,u=this.current.patternFill,h=ee(s);let f,p,y,b;if((i.bitmap||i.data)&&i.count>1){const nt=i.bitmap||i.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),c]),f=this._cachedBitmapsMap.get(nt),f||(f=new Map,this._cachedBitmapsMap.set(nt,f));const Z=f.get(p);if(Z&&!u){const ft=Math.round(Math.min(h[0],h[2])+h[4]),Et=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,mi.transformAndFill),{canvas:Z,offsetX:ft,offsetY:Et}}y=Z}y||(b=this.cachedCanvases.getCanvas("maskCanvas",r,l),bm(b.context,i));let A=st.transform(h,[1/r,0,0,-1/l,0,0]);A=st.transform(A,[1,0,0,1,0,-l]);const w=ea.slice();st.axialAlignedBoundingBox([0,0,r,l],A,w);const[S,T,E,D]=w,C=Math.round(E-S)||1,I=Math.round(D-T)||1,N=this.cachedCanvases.getCanvas("fillCanvas",C,I),z=N.context,P=S,V=T;z.translate(-P,-V),z.transform(...A),y||(y=this._scaleImage(b.canvas,Oi(z)),y=y.img,f&&u&&f.set(p,y)),z.imageSmoothingEnabled=vm(ee(z),i.interpolate),Ko(z,y,0,0,y.width,y.height,0,0,r,l),z.globalCompositeOperation="source-in";const Q=st.transform(Oi(z),[1,0,0,1,-P,-V]);return z.fillStyle=u?c.getPattern(s,this,Q,Re.FILL,t):c,z.fillRect(0,0,r,l),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,N.canvas)),this.dependencyTracker?.recordDependencies(t,mi.transformAndFill),{canvas:N.canvas,offsetX:Math.round(P),offsetY:Math.round(V)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=X1[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=q1[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,r]of i)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(r,i,s);this.suspendedCtx=this.ctx;const c=this.ctx=l.context;c.setTransform(this.suspendedCtx.getTransform()),rr(this.suspendedCtx,c),V1(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),rr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const l=r[0],c=r[1],u=r[2]-l,h=r[3]-c;u===0||h===0||(this.genericComposeSMask(i.context,s,u,h,i.subtype,i.backdrop,i.transferMap,l,c,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,l,c,u,h,f,p,y){let b=t.canvas,A=h-p,w=f-y;if(c)if(A<0||w<0||A+s>b.width||w+r>b.height){const T=this.cachedCanvases.getCanvas("maskExtension",s,r),E=T.context;E.drawImage(b,-A,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=c,E.fillRect(0,0,s,r),E.globalCompositeOperation="source-over",b=T.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(A,w,s,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,w,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),l==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):l==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(h,f,s,r),i.clip(S),i.globalCompositeOperation="destination-in",i.drawImage(b,A,w,s,r,h,f,s,r),i.restore()}save(t){this.inSMaskMode&&rr(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&rr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,l,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,r,l,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,r){let[l]=s;if(!r){l||=s[0]=new Path2D,this[i](t,l);return}if(this.dependencyTracker!==null){const c=i===mr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-c,r[2]+c,r[1]-c,r[3]+c).recordDependencies(t,["transform"])}l instanceof Path2D||(l=s[0]=zm(l)),st.axialAlignedBoundingBox(r,ee(this.ctx),this.current.minMax),this[i](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const r=this.ctx,l=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const c=l.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=l.getPattern(r,this,Oi(r),Re.STROKE,t),c){const u=new Path2D;u.addPath(i,r.getTransform().invertSelf().multiplySelf(c)),i=u}this.rescaleAndStroke(i,!1),r.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,mi.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(Re.STROKE,ee(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const r=this.ctx,l=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=l.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=l.getPattern(r,this,Oi(r),Re.FILL,t),f){const p=new Path2D;p.addPath(i,r.getTransform().invertSelf().multiplySelf(f)),i=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(i,"evenodd"),this.pendingEOFill=!1):r.fill(i)),this.dependencyTracker?.recordDependencies(t,mi.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,h)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,mi.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=$1}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Am}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;i!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(i!==void 0){const r=new Path2D,l=s.getTransform().invertSelf();for(const{transform:c,x:u,y:h,fontSize:f,path:p}of i)p&&r.addPath(p,new DOMMatrix(c).preMultiplySelf(l).translate(u,h).scale(f,-f));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const r=this.commonObjs.get(i),l=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(l.fontMatrix=r.fontMatrix||ih,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&mt("Invalid font matrix for font "+i),s<0?(s=-s,l.fontDirection=-1):l.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const c=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${c}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let p=s;s<fm?p=fm:s>gm&&(p=gm),this.current.fontSizeScale=s/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,l,c){const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,y=h.fontSize/h.fontSizeScale,b=p&ye.FILL_STROKE_MASK,A=!!(p&ye.ADD_TO_PATH_FLAG),w=h.patternFill&&!f.missingFile,S=h.patternStroke&&!f.missingFile;let T;if((f.disableFontFace||A||w||S)&&!f.missingFile&&(T=f.getPathGenerator(this.commonObjs,i)),T&&(f.disableFontFace||w||S)){u.save(),u.translate(s,r),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let E;if(b===ye.FILL||b===ye.FILL_STROKE)if(l){E=u.getTransform(),u.setTransform(...l);const D=this.#n(T,E,l);u.fill(D)}else u.fill(T);if(b===ye.STROKE||b===ye.FILL_STROKE)if(c){E||=u.getTransform(),u.setTransform(...c);const{a:D,b:C,c:I,d:N}=E,z=st.inverseTransform(c),P=st.transform([D,C,I,N,0,0],z);st.singularValueDecompose2dScale(P,si),u.lineWidth*=Math.max(si[0],si[1])/y,u.stroke(this.#n(T,E,c))}else u.lineWidth/=y,u.stroke(T);u.restore()}else(b===ye.FILL||b===ye.FILL_STROKE)&&(u.fillText(i,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i))),(b===ye.STROKE||b===ye.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r,()=>u.measureText(i)).recordDependencies(t,mi.stroke),u.strokeText(i,s,r));A&&((this.pendingTextPaths||=[]).push({transform:ee(u),x:s,y:r,fontSize:y,path:T}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return yt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,mi.showText).resetBBox(t),this.current.textRenderingMode&ye.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const l=s.fontSize;if(l===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=s.fontSizeScale,h=s.charSpacing,f=s.wordSpacing,p=s.fontDirection,y=s.textHScale*p,b=i.length,A=r.vertical,w=A?1:-1,S=r.defaultVMetrics,T=l*s.fontMatrix[0],E=s.textRenderingMode===ye.FILL&&!r.disableFontFace&&!s.patternFill;c.save(),s.textMatrix&&c.transform(...s.textMatrix),c.translate(s.x,s.y+s.textRise),p>0?c.scale(y,-1):c.scale(y,1);let D,C;const I=s.textRenderingMode&ye.FILL_STROKE_MASK,N=I===ye.FILL||I===ye.FILL_STROKE,z=I===ye.STROKE||I===ye.FILL_STROKE;if(N&&s.patternFill){c.save();const Z=s.fillColor.getPattern(c,this,Oi(c),Re.FILL,t);D=ee(c),c.restore(),c.fillStyle=Z}if(z&&s.patternStroke){c.save();const Z=s.strokeColor.getPattern(c,this,Oi(c),Re.STROKE,t);C=ee(c),c.restore(),c.strokeStyle=Z}let P=s.lineWidth;const V=s.textMatrixScale;if(V===0||P===0?z&&(P=this.getSinglePixelWidth()):P/=V,u!==1&&(c.scale(u,u),P/=u),c.lineWidth=P,r.isInvalidPDFjsFont){const Z=[];let ft=0;for(const ut of i)Z.push(ut.unicode),ft+=ut.width;const Et=Z.join("");if(c.fillText(Et,0,0),this.dependencyTracker!==null){const ut=c.measureText(Et);this.dependencyTracker.recordBBox(t,this.ctx,-ut.actualBoundingBoxLeft,ut.actualBoundingBoxRight,-ut.actualBoundingBoxAscent,ut.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=ft*T*y,c.restore(),this.compose();return}let Q=0,nt;for(nt=0;nt<b;++nt){const Z=i[nt];if(typeof Z=="number"){Q+=w*Z*l/1e3;continue}let ft=!1;const Et=(Z.isSpace?f:0)+h,ut=Z.fontChar,Dt=Z.accent;let L,Y,tt=Z.width;if(A){const R=Z.vmetric||S,H=-(Z.vmetric?R[1]:tt*.5)*T,K=R[2]*T;tt=R?-R[0]:tt,L=H/u,Y=(Q+K)/u}else L=Q/u,Y=0;let pt;if(r.remeasure&&tt>0){pt=c.measureText(ut);const R=pt.width*1e3/l*u;if(tt<R&&this.isFontSubpixelAAEnabled){const H=tt/R;ft=!0,c.save(),c.scale(H,1),L/=H}else tt!==R&&(L+=(tt-R)/2e3*l/u)}if(this.contentVisible&&(Z.isInFont||r.missingFile)){if(E&&!Dt)c.fillText(ut,L,Y),this.dependencyTracker?.recordCharacterBBox(t,c,pt?{bbox:null}:r,l/u,L,Y,()=>pt??c.measureText(ut));else if(this.paintChar(t,ut,L,Y,D,C),Dt){const R=L+l*Dt.offset.x/u,H=Y-l*Dt.offset.y/u;this.paintChar(t,Dt.fontChar,R,H,D,C)}}const St=A?tt*T-Et*p:tt*T+Et*p;Q+=St,ft&&c.restore()}A?s.y-=Q:s.x+=Q*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,r=this.current,l=r.font,c=r.fontSize,u=r.fontDirection,h=l.vertical?1:-1,f=r.charSpacing,p=r.wordSpacing,y=r.textHScale*u,b=r.fontMatrix||ih,A=i.length,w=r.textRenderingMode===ye.INVISIBLE;let S,T,E,D;if(w||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(y,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new rl(C,t):null,S=0;S<A;++S){if(T=i[S],typeof T=="number"){D=h*T*c/1e3,this.ctx.translate(D,0),r.x+=D*y;continue}const I=(T.isSpace?p:0)+f,N=l.charProcOperatorList[T.operatorListId];N?this.contentVisible&&(this.save(),s.scale(c,c),s.transform(...b),this.executeOperatorList(N),this.restore()):mt(`Type3 character "${T.operatorListId}" is not available.`);const z=[T.width,0];st.applyTransform(z,b),E=z[0]*c+I,s.translate(E,0),r.x+=E*y}s.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,r,l,c,u){const h=new Path2D;h.rect(r,l,c-r,u-l),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,r,c,l,u).recordClipBox(t,this.ctx,r,c,l,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const r=this.baseTransform||ee(this.ctx),l={createCanvasGraphics:(c,u)=>new aa(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new rl(this.dependencyTracker,u,!0):null)};s=new Eh(i,this.ctx,l,r)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=U1(this.getObject(t,i)),this.cachedPatterns.set(i,r)),s&&(r.matrix=s),r}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,i);s.fillStyle=r.getPattern(s,this,Oi(s),Re.SHADING,t);const l=Oi(s);if(l){const{width:c,height:u}=s.canvas,h=ea.slice();st.axialAlignedBoundingBox([0,0,c,u],l,h);const[f,p,y,b]=h;this.ctx.fillRect(f,p,y-f,b-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,mi.transform).recordDependencies(t,mi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){jt("Should not call beginInlineImage")}beginImageData(){jt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=ee(this.ctx),s)){st.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,l,c,u]=s,h=new Path2D;h.rect(r,l,c-r,u-l),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,r,c,l,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||hl("TODO: Support non-isolated groups."),i.knockout&&mt("Knockout groups not supported.");const r=ee(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let l=ea.slice();st.axialAlignedBoundingBox(i.bbox,ee(s),l);const c=[0,0,s.canvas.width,s.canvas.height];l=st.intersect(l,c)||[0,0,0,0];const u=Math.floor(l[0]),h=Math.floor(l[1]),f=Math.max(Math.ceil(l[2])-u,1),p=Math.max(Math.ceil(l[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let y="groupAt"+this.groupLevel;i.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,p),A=b.context;A.translate(-u,-h),A.transform(...r);let w=new Path2D;const[S,T,E,D]=i.bbox;if(w.rect(S,T,E-S,D-T),i.matrix){const C=new Path2D;C.addPath(w,new DOMMatrix(i.matrix)),w=C}A.clip(w),i.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:u,offsetY:h,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,h),s.save()),rr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=ee(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const c=ea.slice();st.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],l,c),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,i,s,r,l,c){if(this.#t(),Qo(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],h=s[3]-s[1];if(c&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=h,st.singularValueDecompose2dScale(ee(this.ctx),si);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(si[0],0,0,-si[1],0,h*si[1]),Qo(this.ctx)}else{Qo(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,h),this.ctx.clip(f)}}this.current=new mm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const r=this.ctx,l=this._createMaskCanvas(t,i),c=l.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(c,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+c.width,l.offsetY,l.offsetY+c.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,r=0,l=0,c,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const h=this.ctx;h.save();const f=ee(h);h.transform(s,r,l,c,0,0);const p=this._createMaskCanvas(t,i);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const A=st.transform(f,[s,r,l,c,u[y],u[y+1]]);h.drawImage(p.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+p.canvas.width,A[5],A[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,mi.transformAndFill);for(const c of i){const{data:u,width:h,height:f,transform:p}=c,y=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=y.context;b.save();const A=this.getObject(t,u,c);bm(b,A),b.globalCompositeOperation="source-in",b.fillStyle=l?r.getPattern(b,this,Oi(s),Re.FILL,t):r,b.fillRect(0,0,h,f),b.restore(),s.save(),s.transform(...p),s.scale(1,-1),Ko(s,y.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,h,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){mt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,r,l){if(!this.contentVisible)return;const c=this.getObject(t,i);if(!c){mt("Dependent image isn't ready yet");return}const u=c.width,h=c.height,f=[];for(let p=0,y=l.length;p<y;p+=2)f.push({transform:[s,0,0,r,l[p],l[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,l=this.cachedCanvases.getCanvas("inlineImage",s,r),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(i,0,0),c.filter="none",l.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,r=i.height,l=this.ctx;this.save(t);const{filter:c}=l;c!=="none"&&c!==""&&(l.filter="none"),l.scale(1/s,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const p=this.cachedCanvases.getCanvas("inlineImage",s,r).context;ym(p,i),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,Oi(l));l.imageSmoothingEnabled=vm(ee(l),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,l,0,s,-r,0).recordDependencies(t,mi.imageXObject).recordOperation(t),Ko(l,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const r=this.ctx;let l;if(i.bitmap)l=i.bitmap;else{const c=i.width,u=i.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;ym(f,i),l=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of s)r.save(),r.transform(...c.transform),r.scale(1,-1),Ko(r,l,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,mi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const l=this.ctx;this.pendingClip?(r||(this.pendingClip===Am?l.clip(i,"evenodd"):l.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ee(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:l}=this.ctx.getTransform();let c,u;if(s===0&&r===0){const h=Math.abs(i),f=Math.abs(l);if(h===f)if(t===0)c=u=1/h;else{const p=h*t;c=u=p<1?1/p:1}else if(t===0)c=1/h,u=1/f;else{const p=h*t,y=f*t;c=p<1?1/p:1,u=y<1?1/y:1}}else{const h=Math.abs(i*l-s*r),f=Math.hypot(i,s),p=Math.hypot(r,l);if(t===0)c=p/h,u=f/h;else{const y=t*h;c=p>y?p/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[l,c]=this.getScaleForStroking();if(l===c){s.lineWidth=(r||1)*l,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(l,c),Qu.a=1/l,Qu.d=1/c;const h=new Path2D;if(h.addPath(t,Qu),u.length>0){const f=Math.max(l,c);s.setLineDash(u.map(p=>p/f)),s.lineDashOffset/=f}s.lineWidth=r||1,s.stroke(h),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const m in mr)aa.prototype[m]!==void 0&&(aa.prototype[mr[m]]=aa.prototype[m]);class ra{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class W1{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Zs=Symbol("INTERNAL");class K1{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:l}){this.#t=!!(t&ii.DISPLAY),this.#e=!!(t&ii.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=l}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==Zs&&jt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class Q1{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=ii.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new K1(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Zs,!1);for(const s of t.on)this.#e.get(s)._setVisible(Zs,!0);for(const s of t.off)this.#e.get(s)._setVisible(Zs,!1);this.#n=this.getHash()}}#a(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const l=t[r];let c;if(Array.isArray(l))c=this.#a(l);else if(this.#e.has(l))c=this.#e.get(l).visible;else return mt(`Optional content group not found: ${l}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return hl("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(mt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return mt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return mt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return mt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return mt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return mt(`Unknown optional content policy ${t.policy}.`),!0}return mt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){mt(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const l of r.rbGroups)for(const c of l)c!==t&&this.#e.get(c)?._setVisible(Zs,!1,!0);r._setVisible(Zs,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const l=this.#e.get(r);if(l)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!l.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Pm;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class pl{#t=null;#e=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(t,i,s){this._source=t,this.#t=i,this.#e=s}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return Ft(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#t(this)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new this.#e(this,t,i);return this._rangeReaders.add(s),s}cancelAllRequests(t){this._fullReader?.cancel(t);for(const i of new Set(this._rangeReaders))i.cancel(t)}}class ml{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(t){this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){jt("Abstract method `read` called")}cancel(t){jt("Abstract method `cancel` called")}}class yl{_stream=null;constructor(t,i,s){this._stream=t}async read(){jt("Abstract method `read` called")}cancel(t){jt("Abstract method `cancel` called")}}function Sm(m){return m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer}class Z1 extends pl{_progressiveDone=!1;_queuedChunks=[];constructor(t){super(t,J1,tA);const{pdfDataRangeTransport:i}=t,{initialData:s,progressiveDone:r}=i;if(s?.length>0){const l=Sm(s);this._queuedChunks.push(l)}this._progressiveDone=r,i.addRangeListener((l,c)=>{this.#t(l,c)}),i.addProgressListener((l,c)=>{c!==void 0&&this._fullReader?.onProgress?.({loaded:l,total:c})}),i.addProgressiveReadListener(l=>{this.#t(void 0,l)}),i.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),i.transportReady()}#t(t,i){const s=Sm(i);if(t===void 0)this._fullReader?this._fullReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.keys().find(l=>l._begin===t);Ft(r,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),r._enqueue(s)}}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,i){const s=super.getRangeReader(t,i);return s&&(s.onDone=()=>this._rangeReaders.delete(s),this._source.pdfDataRangeTransport.requestDataRange(t,i)),s}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}class J1 extends ml{_done=!1;_queuedChunks=null;_requests=[];constructor(t){super(t);const{pdfDataRangeTransport:i,disableRange:s,disableStream:r}=t._source,{length:l,contentDispositionFilename:c}=i;this._queuedChunks=t._queuedChunks||[];for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._done=t._progressiveDone,this._contentLength=l,this._isStreamingSupported=!r,this._isRangeSupported=!s,bh(c)&&(this._filename=c),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class tA extends yl{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(t,i,s){super(t,i,s),this._begin=i}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function eA(m){let t=!0,i=s("filename\\*","i").exec(m);if(i){i=i[1];let p=u(i);return p=unescape(p),p=h(p),p=f(p),l(p)}if(i=c(m),i){const p=f(i);return l(p)}if(i=s("filename","i").exec(m),i){i=i[1];let p=u(i);return p=f(p),l(p)}function s(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(p,{fatal:!0}),A=dl(y);y=b.decode(A),t=!1}catch{}}return y}function l(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function c(p){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(p))!==null;){let[,S,T,E]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[T,E]}const w=[];for(let S=0;S<y.length&&S in y;++S){let[T,E]=y[S];E=u(E),T&&(E=unescape(E),S===0&&(E=h(E))),w.push(E)}return w.join("")}function u(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function h(p){const y=p.indexOf("'");if(y===-1)return p;const b=p.slice(0,y),w=p.slice(y+1).replace(/^[^']*'/,"");return r(b,w)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,T){return String.fromCharCode(parseInt(T,16))}),r(b,w);try{w=atob(w)}catch{}return r(b,w)})}return""}function Ym(m,t){const i=new Headers;if(!m||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function bl(m){return URL.parse(m)?.origin??null}function Xm({responseHeaders:m,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(m.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*i)||s||!t||m.get("Accept-Ranges")!=="bytes"||(m.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function qm(m){const t=m.get("Content-Disposition");if(t){let i=eA(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(bh(i))return i}return null}function vl(m,t){return new al(`Unexpected server response (${m}) while retrieving PDF "${t}".`,m,m===404||m===0&&t.startsWith("file:"))}function $m(m,t){if(m!==t)throw new Error(`Expected range response-origin "${m}" to match "${t}".`)}function Wm(m,t,i,s){return fetch(m,{method:"GET",headers:t,signal:s.signal,mode:"cors",credentials:i?"include":"same-origin",redirect:"follow"})}function Km(m,t){if(m!==200&&m!==206)throw vl(m,t)}function Qm(m){return m instanceof Uint8Array?m.buffer:m instanceof ArrayBuffer?m:(mt(`getArrayBuffer - unexpected data format: ${m}`),new Uint8Array(m).buffer)}class iA extends pl{_responseOrigin=null;constructor(t){super(t,nA,sA),this.isHttp=/^https?:/i.test(t.url),this.headers=Ym(this.isHttp,t.httpHeaders)}}class nA extends ml{_abortController=new AbortController;_reader=null;constructor(t){super(t);const{disableRange:i,disableStream:s,length:r,rangeChunkSize:l,url:c,withCredentials:u}=t._source;this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!i;const h=new Headers(t.headers);Wm(c,h,u,this._abortController).then(f=>{t._responseOrigin=bl(f.url),Km(f.status,c),this._reader=f.body.getReader();const p=f.headers,{allowRangeRequests:y,suggestedLength:b}=Xm({responseHeaders:p,isHttp:t.isHttp,rangeChunkSize:l,disableRange:i});this._isRangeSupported=y,this._contentLength=b||this._contentLength,this._filename=qm(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new On("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Qm(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class sA extends yl{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(t,i,s){super(t,i,s);const{url:r,withCredentials:l}=t._source,c=new Headers(t.headers);c.append("Range",`bytes=${i}-${s-1}`),Wm(r,c,l,this._abortController).then(u=>{const h=bl(u.url);$m(h,t._responseOrigin),Km(u.status,r),this._reader=u.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:{value:Qm(t),done:!1}}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Zu=200,wm=206;function aA(m){return typeof m!="string"?m:dl(m).buffer}class rA extends pl{#t=new WeakMap;_responseOrigin=null;constructor(t){super(t,oA,lA),this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=Ym(this.isHttp,t.httpHeaders)}_request(t){const i=new XMLHttpRequest,s={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};this.#t.set(i,s),i.open("GET",this.url),i.withCredentials=this._source.withCredentials;for(const[r,l]of this.headers)i.setRequestHeader(r,l);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.validateStatus=r=>r===wm||r===Zu):s.validateStatus=r=>r===Zu,i.responseType="arraybuffer",Ft(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>t.onError(i.status),i.onreadystatechange=this.#n.bind(this,i),i.onprogress=this.#e.bind(this,i),i.send(null),i}#e(t,i){this.#t.get(t)?.onProgress?.(i)}#n(t,i){const s=this.#t.get(t);if(!s||(t.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),t.readyState!==4)||!this.#t.has(t))return;if(this.#t.delete(t),t.status===0&&this.isHttp){s.onError(t.status);return}const r=t.status||Zu;if(!s.validateStatus(r)){s.onError(t.status);return}const l=aA(t.response);if(r===wm){const c=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(c)?s.onDone(l):(mt('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone(l):s.onError(t.status)}_abortRequest(t){this.#t.has(t)&&(this.#t.delete(t),t.abort())}getRangeReader(t,i){const s=super.getRangeReader(t,i);return s&&(s.onClosed=()=>this._rangeReaders.delete(s)),s}}class oA extends ml{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(t){super(t);const{length:i}=t._source;this._contentLength=i,this._fullRequestXhr=t._request({onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#n.bind(this),onProgress:this.#i.bind(this)})}#t(){const t=this._stream,{disableRange:i,rangeChunkSize:s}=t._source,r=this._fullRequestXhr;t._responseOrigin=bl(r.responseURL);const l=r.getAllResponseHeaders(),c=new Headers(l?l.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[p,...y]=f.split(": ");return[p,y.join(": ")]}):[]),{allowRangeRequests:u,suggestedLength:h}=Xm({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:s,disableRange:i});u&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=qm(c),this._isRangeSupported&&t._abortRequest(r),this._headersCapability.resolve()}#e(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}#n(t){this._storedError=vl(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#i(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class lA extends yl{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(t,i,s){super(t,i,s),this._requestXhr=t._request({begin:i,end:s,onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#n.bind(this),onProgress:null})}#t(){const t=bl(this._requestXhr?.responseURL);try{$m(t,this._stream._responseOrigin)}catch(i){this._storedError=i,this.#n(0)}}#e(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#n(t){this._storedError??=vl(t,this._stream.url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const cA=/^[a-z][a-z0-9\-+.]+:/i;function uA(m){if(cA.test(m))return new URL(m);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(m))}function Zm(m){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(m):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(m)}function Jm(m){return m instanceof Uint8Array?m.buffer:m instanceof ArrayBuffer?m:(mt(`getArrayBuffer - unexpected data format: ${m}`),new Uint8Array(m).buffer)}class hA extends pl{constructor(t){super(t,dA,fA),this.url=uA(t.url),Ft(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class dA extends ml{_reader=null;constructor(t){super(t);const{disableRange:i,disableStream:s,length:r,rangeChunkSize:l}=t._source;this._contentLength=r,this._isStreamingSupported=!s,this._isRangeSupported=!i;const c=t.url,u=process.getBuiltinModule("fs");u.promises.lstat(c).then(h=>{const f=u.createReadStream(c),p=Zm(f);this._reader=p.getReader();const{size:y}=h;y<=2*l&&(this._isRangeSupported=!1),this._contentLength=y,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new On("Streaming is disabled.")),this._headersCapability.resolve()}).catch(h=>{h.code==="ENOENT"&&(h=vl(0,c.href)),this._headersCapability.reject(h)})}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Jm(t),done:!1})}cancel(t){this._reader?.cancel(t)}}class fA extends yl{_readCapability=Promise.withResolvers();_reader=null;constructor(t,i,s){super(t,i,s);const r=t.url,l=process.getBuiltinModule("fs");try{const c=l.createReadStream(r,{start:i,end:s-1}),u=Zm(c);this._reader=u.getReader(),this._readCapability.resolve()}catch(c){this._readCapability.reject(c)}}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:{value:Jm(t),done:!1}}cancel(t){this._reader?.cancel(t)}}const or=Symbol("INITIAL_DATA");class ty{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:or}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===or)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==or}delete(t){const i=this.#t[t];return!i||i.data===or?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==or&&(yield[t,i])}}}const gA=1e5,xm=30;class ni{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#T=new WeakMap;static#x=null;static#S=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=i,this.#h=s.scale*zi.pixelRatio,this.#d=s.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:l,pageX:c,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-c,u+l],this.#o=r,this.#s=l,ni.#D(),i.style.setProperty("--min-font-size",ni.#x),ss(i,s),this.#t.promise.finally(()=>{ni.#S.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=be.platform;return yt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#a??=i.lang,Object.assign(this.#f,i.styles),this.#C(i.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),ni.#S.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*zi.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,ss(this.#l,{rotation:r})),s!==this.#h){i?.(),this.#h=s;const l={div:null,properties:null,ctx:ni.#R(this.#a)};for(const c of this.#u)l.properties=this.#g.get(c),l.div=c,this.#E(l)}}cancel(){const t=new On("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#n)return;this.#r.ctx??=ni.#R(this.#a);const i=this.#u,s=this.#m;for(const r of t){if(i.length>gA){mt("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),r.tag==="Artifact"&&(this.#e.ariaHidden=!0),l.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#A(r)}}#A(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const r=st.transform(this.#y,t.transform);let l=Math.atan2(r[1],r[0]);const c=this.#f[t.fontName];c.vertical&&(l+=Math.PI/2);let u=this.#i&&c.fontSubstitution||c.fontFamily;u=ni.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*ni.#I(u,c,this.#a);let p,y;l===0?(p=r[4],y=r[5]-f):(p=r[4]+f*Math.sin(l),y=r[5]-f*Math.cos(l));const b=i.style;b.left=`${(100*p/this.#o).toFixed(2)}%`,b.top=`${(100*y/this.#s).toFixed(2)}%`,b.setProperty("--font-height",`${h.toFixed(2)}px`),b.fontFamily=u,s.fontSize=h,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),l!==0&&(s.angle=l*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);w!==S&&Math.max(w,S)/Math.min(w,S)>1.5&&(A=!0)}if(A&&(s.canvasWidth=c.vertical?t.height:t.width),this.#g.set(i,s),this.#r.div=i,this.#r.properties=s,this.#E(this.#r),s.hasText&&this.#e.append(i),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#E(t){const{div:i,properties:s,ctx:r}=t,{style:l}=i;if(s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=l,{canvasWidth:u,fontSize:h}=s;ni.#M(r,h*this.#h,c);const{width:f}=r.measureText(i.textContent);f>0&&l.setProperty("--scale-x",u*this.#h/f)}s.angle!==0&&l.setProperty("--rotate",`${s.angle}deg`)}static cleanup(){if(!(this.#S.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#R(t=null){let i=this.#b.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,i),this.#T.set(i,{size:0,family:""})}return i}static#M(t,i,s){const r=this.#T.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#D(){if(this.#x!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#x=t.getBoundingClientRect().height,t.remove()}static#I(t,i,s){const r=this.#v.get(t);if(r)return r;const l=this.#R(s);l.canvas.width=l.canvas.height=xm,this.#M(l,xm,t);const c=l.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let f=.8;return u?f=u/(u+h):(be.platform.isFirefox&&mt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#v.set(t,f),f}}const pA=100;function ey(m={}){typeof m=="string"||m instanceof URL?m={url:m}:(m instanceof ArrayBuffer||ArrayBuffer.isView(m))&&(m={data:m});const t=new Th,{docId:i}=t,s=m.url?x1(m.url):null,r=m.data?E1(m.data):null,l=m.httpHeaders||null,c=m.withCredentials===!0,u=m.password??null,h=m.range instanceof iy?m.range:null,f=Number.isInteger(m.rangeChunkSize)&&m.rangeChunkSize>0?m.rangeChunkSize:2**16;let p=m.worker instanceof br?m.worker:null;const y=m.verbosity,b=typeof m.docBaseUrl=="string"&&!fl(m.docBaseUrl)?m.docBaseUrl:null,A=Xo(m.cMapUrl),w=m.cMapPacked!==!1,S=m.CMapReaderFactory||(Be?O1:om),T=Xo(m.iccUrl),E=Xo(m.standardFontDataUrl),D=m.StandardFontDataFactory||(Be?L1:lm),C=Xo(m.wasmUrl),I=m.WasmFactory||(Be?N1:cm),N=m.stopAtErrors!==!0,z=Number.isInteger(m.maxImageSize)&&m.maxImageSize>-1?m.maxImageSize:-1,P=m.isEvalSupported!==!1,V=typeof m.isOffscreenCanvasSupported=="boolean"?m.isOffscreenCanvasSupported:!Be,Q=typeof m.isImageDecoderSupported=="boolean"?m.isImageDecoderSupported:!Be&&(be.platform.isFirefox||!globalThis.chrome),nt=Number.isInteger(m.canvasMaxAreaInBytes)?m.canvasMaxAreaInBytes:-1,Z=typeof m.disableFontFace=="boolean"?m.disableFontFace:Be,ft=m.fontExtraProperties===!0,Et=m.enableXfa===!0,ut=m.ownerDocument||globalThis.document,Dt=m.disableRange===!0,L=m.disableStream===!0,Y=m.disableAutoFetch===!0,tt=m.pdfBug===!0,pt=m.CanvasFactory||(Be?k1:M1),St=m.FilterFactory||(Be?R1:D1),R=m.enableHWA===!0,H=m.useWasm!==!1,K=h?h.length:m.length??NaN,et=typeof m.useSystemFonts=="boolean"?m.useSystemFonts:!Be&&!Z,ht=typeof m.useWorkerFetch=="boolean"?m.useWorkerFetch:!!(S===om&&D===lm&&I===cm&&A&&E&&C&&hr(A,document.baseURI)&&hr(E,document.baseURI)&&hr(C,document.baseURI)),gt=null;Kv(y);const O={canvasFactory:new pt({ownerDocument:ut,enableHWA:R}),filterFactory:new St({docId:i,ownerDocument:ut}),cMapReaderFactory:ht?null:new S({baseUrl:A,isCompressed:w}),standardFontDataFactory:ht?null:new D({baseUrl:E}),wasmFactory:ht?null:new I({baseUrl:C})};p||(p=br.create({verbosity:y,port:ra.workerPort}),t._worker=p);const it={docId:i,apiVersion:"5.4.624",data:r,password:u,disableAutoFetch:Y,rangeChunkSize:f,length:K,docBaseUrl:b,enableXfa:Et,evaluatorOptions:{maxImageSize:z,disableFontFace:Z,ignoreErrors:N,isEvalSupported:P,isOffscreenCanvasSupported:V,isImageDecoderSupported:Q,canvasMaxAreaInBytes:nt,fontExtraProperties:ft,useSystemFonts:et,useWasm:H,useWorkerFetch:ht,cMapUrl:A,iccUrl:T,standardFontDataUrl:E,wasmUrl:C}},J={ownerDocument:ut,pdfBug:tt,styleElement:gt,enableHWA:R,loadingParams:{disableAutoFetch:Y,enableXfa:Et}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const vt=p.messageHandler.sendWithPromise("GetDocRequest",it,r?[r.buffer]:null);let $t;if(h)$t=new Z1({pdfDataRangeTransport:h,disableRange:Dt,disableStream:L});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const re=hr(s)?iA:Be?hA:rA;$t=new re({url:s,length:K,httpHeaders:l,withCredentials:c,rangeChunkSize:f,disableRange:Dt,disableStream:L})}return vt.then(re=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ei=new dr(i,re,p.port),vi=new bA(Ei,t,$t,J,O);t._transport=vi,Ei.send("Ready",null)})}).catch(t._capability.reject),t}class Th{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Th.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class iy{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#a)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){jt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class mA{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return yt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class yA{#t=!1;#e=It.instance;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new tm:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new ty,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:l=!1}={}){return new Sr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return yt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:r="display",annotationMode:l=Rn.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,l,y,b),{renderingIntent:T,cacheKey:E}=S;this.#t=!1,h||=this._transport.getOptionalContentConfig(T);let D=this._intentStates.get(E);D||(D=Object.create(null),this._intentStates.set(E,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const C=!!(T&ii.PRINT);D.displayReadyCapability||(D.displayReadyCapability=Promise.withResolvers(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const I=!!(this._pdfBug&&globalThis.StepperManager?.enabled),N=!this.recordedBBoxes&&(A||I),z=Q=>{if(D.renderTasks.delete(P),N){const nt=P.gfx?.dependencyTracker.take();nt&&(P.stepper&&P.stepper.setOperatorBBoxes(nt,P.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=nt))}C&&(this.#t=!0),this.#n(),Q?(P.capability.reject(Q),this._abortOperatorList({intentState:D,reason:Q instanceof Error?Q:new Error(Q)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new ia({callback:z,params:{canvas:i,canvasContext:t,dependencyTracker:N?new z1(i,D.operatorList.length,I):null,viewport:s,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:w});(D.renderTasks||=new Set).add(P);const V=P.task;return Promise.all([D.displayReadyCapability.promise,h]).then(([Q,nt])=>{if(this.destroyed){z();return}if(this._stats?.time("Rendering"),!(nt.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:Q,optionalContentConfig:nt}),P.operatorListChanged()}).catch(z),V}getOperatorList({intent:t="display",annotationMode:i=Rn.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function l(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=l,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>yr.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function l(){c.read().then(function({value:h,done:f}){if(f){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),l()},r)}const c=i.getReader(),u={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#n();return t&&i&&(this._stats&&=new tm),i}#n(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#n()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:l,transfer:c}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:l,modifiedIds:r},c).getReader(),f=this._intentStates.get(i);f.streamReader=h;const p=()=>{h.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),p())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#n()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof yh){let r=pA;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new On(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var kn,xi,sn,es,ll,is,ns,ze,il,ny,sy,fr,oa,nl;const Jt=class Jt{constructor({name:t=null,port:i=null,verbosity:s=Qv()}={}){Ri(this,ze);Ri(this,kn,Promise.withResolvers());Ri(this,xi,null);Ri(this,sn,null);Ri(this,es,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if(Zt(Jt,ns).has(i))throw new Error("Cannot use more than one PDFWorker per port.");Zt(Jt,ns).set(i,this),ki(this,ze,ny).call(this,i)}else ki(this,ze,sy).call(this)}get promise(){return Zt(this,kn).promise}get port(){return Zt(this,sn)}get messageHandler(){return Zt(this,xi)}destroy(){this.destroyed=!0,Zt(this,es)?.terminate(),Ve(this,es,null),Zt(Jt,ns).delete(Zt(this,sn)),Ve(this,sn,null),Zt(this,xi)?.destroy(),Ve(this,xi,null)}static create(t){const i=Zt(this,ns).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Jt(t)}static get workerSrc(){if(ra.workerSrc)return ra.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return yt(this,"_setupFakeWorkerGlobal",(async()=>Zt(this,oa,nl)?Zt(this,oa,nl):(await import(this.workerSrc)).WorkerMessageHandler)())}};kn=new WeakMap,xi=new WeakMap,sn=new WeakMap,es=new WeakMap,ll=new WeakMap,is=new WeakMap,ns=new WeakMap,ze=new WeakSet,il=function(){Zt(this,kn).resolve(),Zt(this,xi).send("configure",{verbosity:this.verbosity})},ny=function(t){Ve(this,sn,t),Ve(this,xi,new dr("main","worker",t)),Zt(this,xi).on("ready",()=>{}),ki(this,ze,il).call(this)},sy=function(){if(Zt(Jt,is)||Zt(Jt,oa,nl)){ki(this,ze,fr).call(this);return}let{workerSrc:t}=Jt;try{Jt._isSameOrigin(window.location,t)||(t=Jt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new dr("main","worker",i),r=()=>{l.abort(),s.destroy(),i.terminate(),this.destroyed?Zt(this,kn).reject(new Error("Worker was destroyed")):ki(this,ze,fr).call(this)},l=new AbortController;i.addEventListener("error",()=>{Zt(this,es)||r()},{signal:l.signal}),s.on("test",u=>{if(l.abort(),this.destroyed||!u){r();return}Ve(this,xi,s),Ve(this,sn,i),Ve(this,es,i),ki(this,ze,il).call(this)}),s.on("ready",u=>{if(l.abort(),this.destroyed){r();return}try{c()}catch{ki(this,ze,fr).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{hl("The worker has been disabled.")}ki(this,ze,fr).call(this)},fr=function(){Zt(Jt,is)||(mt("Setting up fake worker."),Ve(Jt,is,!0)),Jt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Zt(this,kn).reject(new Error("Worker was destroyed"));return}const i=new C1;Ve(this,sn,i);const s=`fake${kp(Jt,ll)._++}`,r=new dr(s+"_worker",s,i);t.setup(r,i),Ve(this,xi,new dr(s,s+"_worker",i)),ki(this,ze,il).call(this)}).catch(t=>{Zt(this,kn).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},oa=new WeakSet,nl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ri(Jt,oa),Ri(Jt,ll,0),Ri(Jt,is,!1),Ri(Jt,ns,new WeakMap),Be&&(Ve(Jt,is,!0),ra.workerSrc||="./pdf.worker.mjs"),Jt._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},Jt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Jt.fromPort=t=>{if(c1("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Jt.create(t)};let br=Jt;class bA{downloadInfoCapability=Promise.withResolvers();#t=null;#e=new Map;#n=null;#i=new Map;#a=new Map;#r=new Map;#s=null;#o=It.instance;constructor(t,i,s,r,l){this.messageHandler=t,this.loadingTask=i,this.#n=s,this.commonObjs=new ty,this.fontLoader=new A1({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const t=new Map,i=new Map;for(let s=0,r=this.#o.pagesNumber;s<r;s++){const l=this.#o.getPrevPageNumber(s+1)-1,c=this.#i.get(l);c&&t.set(s,c);const u=this.#a.get(l);u&&i.set(s,u)}this.#i=t,this.#a=i}#l(t,i=null){const s=this.#e.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#e.set(t,r),r}#d({loaded:t,total:i}){this.loadingTask.onProgress?.({loaded:t,total:i,percent:De(Math.round(t/i*100),0,100)})}get annotationStorage(){return yt(this,"annotationStorage",new Sh)}getRenderingIntent(t,i=Rn.ENABLE,s=null,r=!1,l=!1){let c=ii.DISPLAY,u=lh;switch(t){case"any":c=ii.ANY;break;case"display":break;case"print":c=ii.PRINT;break;default:mt(`getRenderingIntent - invalid intent: ${t}`)}const h=c&ii.PRINT&&s instanceof Fm?s:this.annotationStorage;switch(i){case Rn.DISABLE:c+=ii.ANNOTATIONS_DISABLE;break;case Rn.ENABLE:break;case Rn.ENABLE_FORMS:c+=ii.ANNOTATIONS_FORMS;break;case Rn.ENABLE_STORAGE:c+=ii.ANNOTATIONS_STORAGE,u=h.serializable;break;default:mt(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(c+=ii.IS_EDITING),l&&(c+=ii.OPLIST);const{ids:f,hash:p}=h.modifiedIds,y=[c,u.hash,p];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#i.values())t.push(s._destroy());this.#i.clear(),this.#a.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),ni.cleanup(),this.#n?.cancelAllRequests(new On("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{Ft(this.#n,"GetReader - no `BasePDFStream` instance available."),this.#t=this.#n.getFullReader(),this.#t.onProgress=l=>this.#d(l),r.onPull=()=>{this.#t.read().then(function({value:l,done:c}){if(c){r.close();return}Ft(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this.#t.cancel(l),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async s=>{await this.#t.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:c}=this.#t;return r&&l&&(this.#t.onProgress=null),{isStreamingSupported:r,isRangeSupported:l,contentLength:c}}),t.on("GetRangeReader",(s,r)=>{Ft(this.#n,"GetRangeReader - no `BasePDFStream` instance available.");const l=this.#n.getRangeReader(s.begin,s.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:c,done:u}){if(u){r.close();return}Ft(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{l.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this.#o.pagesNumber=s.numPages,this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new mA(s,this))}),t.on("DocException",s=>{i._capability.reject(Ye(s))}),t.on("PasswordRequest",s=>{this.#s=Promise.withResolvers();try{if(!i.onPassword)throw Ye(s);const r=l=>{l instanceof Error?this.#s.reject(l):this.#s.resolve({password:l})};i.onPassword(r,s.code)}catch(r){this.#s.reject(r)}return this.#s.promise}),t.on("DataLoaded",s=>{this.#d({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#i.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,l])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in l){const y=l.error;mt(`Error during font loading: ${y}`),this.commonObjs.resolve(s,y);break}const c=new Xt(l),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,b)=>globalThis.FontInspector.fontAdded(y,b):null,h=new S1(c,u,l.extra,l.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:f}=l;Ft(f,"The imageRef must be defined.");for(const y of this.#i.values())for(const[,b]of y.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":this.commonObjs.resolve(s,new w1(l));break;case"Image":this.commonObjs.resolve(s,l);break;case"Pattern":const p=new Se(l);this.commonObjs.resolve(s,p.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,l,c])=>{if(this.destroyed)return;const u=this.#i.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",s=>{this.destroyed||this.#d(s)}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&mt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this.#t?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#o.getPageId(t)-1,r=this.#a.get(i);if(r)return r;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");c.refStr&&this.#r.set(c.refStr,s);const u=new yA(i,c,this,this._params.pdfBug);return this.#i.set(i,u),u});return this.#a.set(i,l),l}async getPageIndex(t){if(!ch(t))throw new Error("Invalid pageIndex request.");const i=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return this.#o.getPageNumber(i+1)-1}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(t+1)-1,intent:i})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#l("GetOptionalContentConfig").then(i=>new Q1(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#e.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new W1(r[1]):null,contentDispositionFilename:this.#t?.filename??null,contentLength:this.#t?.contentLength??null,hasStructTree:r[2]}));return this.#e.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#i.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),ni.cleanup()}}cachedPageNumber(t){if(!ch(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,s=this.#r.get(i);return s>=0?this.#o.getPageNumber(s+1):null}}class vA{_internalRenderTask=null;onContinue=null;onError=null;constructor(t){this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this._internalRenderTask;return t.form||t.canvas&&i?.size>0}}class ia{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:l,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:w=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new vA(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(ia.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ia.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:l,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new aa(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ia.#e.delete(this._canvas),t||=new yh(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ia.#e.delete(this._canvas),this.callback())))}}const ay="5.4.624",AA="384c6208b";class yi{#t=null;#e=null;#n;#i=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return yt(this,"_keyboardManager",new xr([[["Escape","mac+Escape"],yi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],yi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],yi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],yi.prototype._moveToPrevious],[["Home","mac+Home"],yi.prototype._moveToBeginning],[["End","mac+End"],yi.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#r=!1,this.#s=t):this.#r=!0,this.#l=t?._uiManager||i,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",yi.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const i=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#l._signal;t.addEventListener("contextmenu",bi,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,r]of this.#l.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=s,l.setAttribute("data-l10n-id",yi.#d[s]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=r,l.ariaSelected=r===this.#n,l.addEventListener("click",this.#f.bind(this,r),{signal:i}),t.append(l)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:kt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#i.lastElementChild?.focus()}#m(t){yi._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#g){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#l.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class vr{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,vr.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,color:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",vr.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(i,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Em(m){return Math.floor(Math.max(0,Math.min(1,m))*255).toString(16).padStart(2,"0")}function lr(m){return Math.max(0,Math.min(255,255*m))}class Tm{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=lr(t),[t,t,t]}static G_HTML([t]){const i=Em(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(lr)}static RGB_HTML(t){return`#${t.map(Em).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[lr(1-Math.min(1,t+r)),lr(1-Math.min(1,s+r)),lr(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,l=1-i,c=1-s,u=Math.min(r,l,c);return["CMYK",r,l,c,u]}}class SA{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){jt("Abstract method `_createSVG` called.")}}class ol extends SA{_createSVG(t){return document.createElementNS(en,t)}}const wA=9,as=new WeakSet,xA=new Date().getTimezoneOffset()*60*1e3;class Ju{static create(t){switch(t.data.annotationType){case pe.LINK:return new _h(t);case pe.TEXT:return new TA(t);case pe.WIDGET:switch(t.data.fieldType){case"Tx":return new _A(t);case"Btn":return t.data.radioButton?new ry(t):t.data.checkBox?new MA(t):new DA(t);case"Ch":return new RA(t);case"Sig":return new CA(t)}return new os(t);case pe.POPUP:return new dh(t);case pe.FREETEXT:return new oy(t);case pe.LINE:return new OA(t);case pe.SQUARE:return new LA(t);case pe.CIRCLE:return new NA(t);case pe.POLYLINE:return new ly(t);case pe.CARET:return new zA(t);case pe.INK:return new Ch(t);case pe.POLYGON:return new BA(t);case pe.HIGHLIGHT:return new cy(t);case pe.UNDERLINE:return new IA(t);case pe.SQUIGGLY:return new PA(t);case pe.STRIKEOUT:return new FA(t);case pe.STAMP:return new uy(t);case pe.FILEATTACHMENT:return new jA(t);default:return new ie(t)}}}class ie{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,i&&(this.contentElement=this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ie._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:r}=this.data;let l=-1/0,c=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>c?(c=i[u+1],l=i[u+2]):i[u+1]===c&&(l=Math.max(l,i[u+2]));return[l,c]}if(s?.length>=1){for(const u of s)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>c?(c=u[h+1],l=u[h]):u[h+1]===c&&(l=Math.max(l,u[h]));if(l!==1/0)return[l,c]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:c}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-l)/s,t[1]=100*(t[1]-c)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${pr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${pr}${i.id}`,{id:i.id,annotationType:i.annotationType,page:this.parent.page,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let r=this.#n?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#n.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/l}%`,i.top=`${100*(c-t[3]+h)/c}%`,r===0?(i.width=`${100*(t[2]-t[0])/l}%`,i.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",i.id),!(this instanceof os)&&!(this instanceof _h)&&(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(l.title=i.alternativeText),i.noRotate&&l.classList.add("norotate"),!i.rect||this instanceof dh){const{rotation:S}=i;return!i.hasOwnCanvas&&S!==0&&this.setRotation(S,l),l}const{width:u,height:h}=this;if(!t&&i.borderStyle.width>0){c.borderWidth=`${i.borderStyle.width}px`;const S=i.borderStyle.horizontalCornerRadius,T=i.borderStyle.verticalCornerRadius;if(S>0||T>0){const D=`calc(${S}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;c.borderRadius=D}else if(this instanceof ry){const D=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=D}switch(i.borderStyle.style){case Qs.SOLID:c.borderStyle="solid";break;case Qs.DASHED:c.borderStyle="dashed";break;case Qs.BEVELED:mt("Unimplemented border style: beveled");break;case Qs.INSET:mt("Unimplemented border style: inset");break;case Qs.UNDERLINE:c.borderBottomStyle="solid";break}const E=i.borderColor||null;E?(this.#e=!0,c.borderColor=st.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):c.borderWidth=0}const f=st.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:p,pageHeight:y,pageX:b,pageY:A}=r.rawDims;c.left=`${100*(f[0]-b)/p}%`,c.top=`${100*(f[1]-A)/y}%`;const{rotation:w}=i;return i.hasOwnCanvas||w===0?(c.width=`${100*u/p}%`,c.height=`${100*h/y}%`):this.setRotation(w,l),l}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:c}=this;t%180!==0&&([l,c]=[c,l]),i.style.width=`${100*l/s}%`,i.style.height=`${100*c/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const l=r.detail[i],c=l[0],u=l.slice(1);r.target.style[s]=Tm[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:Tm[`${c}_rgb`](u)})};return yt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,l]of Object.entries(i)){const c=s[r];if(c){const u={detail:{[r]:l},target:t};c(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,l]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,T,E,D]=t.subarray(2,6);if(r===S&&l===T&&i===E&&s===D)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:T}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const h=r-i,f=l-s,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=p.createElement("defs");y.append(b);const A=p.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,T=t.length;S<T;S+=8){const E=t[S],D=t[S+1],C=t[S+2],I=t[S+3],N=p.createElement("rect"),z=(C-i)/h,P=(l-D)/f,V=(E-C)/h,Q=(D-I)/f;N.setAttribute("x",z),N.setAttribute("y",P),N.setAttribute("width",V),N.setAttribute("height",Q),A.append(N),u?.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${P}" width="${V}" height="${Q}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:i}=this;let s,r;t?(s={str:t.text},r=t.date):(s=i.contentsObj,r=i.modificationDate),this.#n=new dh({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){jt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:l,id:c,exportValues:u}of r){if(l===-1||c===i)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!as.has(f)){mt(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:h,domElement:f})}return s}for(const r of document.getElementsByName(t)){const{exportValue:l}=r,c=r.getAttribute("data-element-id");c!==i&&as.has(r)&&s.push({id:c,exportValue:l,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class EA extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class _h extends ie{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const l=s.get(r);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){mt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:l,include:c}=i,u=[];if(r.length!==0||l.length!==0){const p=new Set(l);for(const y of r){const b=this._fieldObjects[y]||[];for(const{id:A}of b)p.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)p.has(b.id)===c&&u.push(b)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,f=[];for(const p of u){const{id:y}=p;switch(f.push(y),p.type){case"text":{const A=p.defaultValue||"";h.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=p.defaultValue===p.exportValues;h.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=p.defaultValue||"";h.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!as.has(b)){mt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class TA extends ie{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class os extends ie{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return be.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,l){s.includes("mouse")?t.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(s,c=>{if(s==="blur"){if(!i.focused||!c.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(c)}})})}_setEventListeners(t,i,s,r){for(const[l,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,l,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":st.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||wA,l=t.style;let c;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(Xu*r))||1,y=f/p;c=Math.min(r,h(y/Xu))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,h(f/Xu))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=st.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(l.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class _A extends os{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const l=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[i]=s),l.setValue(c.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let l=r.value||"";const c=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),as.add(s),this.contentElement=s,s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:y}=this.data,b=!!p&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",w=>{t.setValue(i,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=h.userValue=S,h.formattedValue=null});let A=w=>{const{formattedValue:S}=h;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(h.focused)return;const{target:T}=S;if(b&&(T.type=p,y&&(T.step=y)),h.userValue){const E=h.userValue;if(b)if(p==="time"){const D=new Date(E),C=[D.getHours(),D.getMinutes(),D.getSeconds()];T.value=C.map(I=>I.toString().padStart(2,"0")).join(":")}else T.value=new Date(E-xA).toISOString().split(p==="date"?"T":".",1)[0];else T.value=E}h.lastCommittedValue=T.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const T={value(E){h.userValue=E.detail.value??"",b||t.setValue(i,{value:h.userValue.toString()}),E.target.value=h.userValue},formattedValue(E){const{formattedValue:D}=E.detail;h.formattedValue=D,D!=null&&E.target!==document.activeElement&&(E.target.value=D);const C={formattedValue:D};b&&(C.value=D),t.setValue(i,C)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:D}=E.detail,{target:C}=E;if(D===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",D);let I=h.userValue;!I||I.length<=D||(I=I.slice(0,D),C.value=h.userValue=I,t.setValue(i,{value:I}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(T,S)}),s.addEventListener("keydown",S=>{h.commitKey=1;let T=-1;if(S.key==="Escape"?T=0:S.key==="Enter"&&!this.data.multiLine?T=2:S.key==="Tab"&&(h.commitKey=3),T===-1)return;const{value:E}=S.target;h.lastCommittedValue!==E&&(h.lastCommittedValue=E,h.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:T,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=A;A=null,s.addEventListener("blur",S=>{if(!h.focused||!S.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:T}=S;let{value:E}=T;if(b){if(E&&p==="time"){const D=E.split(":").map(C=>parseInt(C,10));E=new Date(2e3,0,1,D[0],D[1],D[2]||0).valueOf(),T.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();T.type="text"}h.userValue=E,h.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:h.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{h.lastCommittedValue=null;const{data:T,target:E}=S,{value:D,selectionStart:C,selectionEnd:I}=E;let N=C,z=I;switch(S.inputType){case"deleteWordBackward":{const P=D.substring(0,C).match(/\w*[^\w]*$/);P&&(N-=P[0].length);break}case"deleteWordForward":{const P=D.substring(C).match(/^[^\w]*\w*/);P&&(z+=P[0].length);break}case"deleteContentBackward":C===I&&(N-=1);break;case"deleteContentForward":C===I&&(z+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:D,change:T||"",willCommit:!1,selStart:N,selEnd:z}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class CA extends os{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class MA extends os{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return as.add(l),l.setAttribute("data-element-id",s),l.disabled=i.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=i.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",i.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,s)){const p=h&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(s,{value:h})}),l.addEventListener("resetform",c=>{const u=i.defaultFieldValue||"Off";c.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class ry extends os{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const c of this._getElementsByName(i.fieldName,s))t.setValue(c.id,{value:!1});const l=document.createElement("input");if(as.add(l),l.setAttribute("data-element-id",s),l.disabled=i.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=i.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:h})}),l.addEventListener("resetform",c=>{const u=i.defaultFieldValue;c.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const c=i.buttonValue;l.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=p&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class DA extends _h{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class RA extends os{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");as.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,s.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),l=!1),r.append(y)}let c=null;if(l){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),c=()=>{p.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=p=>{const y=p?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let h=u(!1);const f=p=>{const y=p.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const y={value(b){c?.();const A=b.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const S of r.options)S.selected=w.has(S.value);t.setValue(i,{value:u(!0)}),h=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,w=b.detail.remove;A[w].selected=!1,r.remove(w),A.length>0&&Array.prototype.findIndex.call(A,T=>T.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),h=u(!1)},insert(b){const{index:A,displayValue:w,exportValue:S}=b.detail.insert,T=r.children[A],E=document.createElement("option");E.textContent=w,E.value=S,T?T.before(E):r.append(E),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const w of A){const{displayValue:S,exportValue:T}=w,E=document.createElement("option");E.textContent=S,E.value=T,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(b)}),h=u(!1)},indices(b){const A=new Set(b.detail.indices);for(const w of b.target.options)w.selected=A.has(w.index);t.setValue(i,{value:u(!0)}),h=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,p)}),r.addEventListener("input",p=>{const y=u(!0),b=u(!1);t.setValue(i,{value:y}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:h,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class dh extends ie{constructor(t){const{data:i,elements:s,parent:r}=t,l=!!r._commentManager;if(super(t,{isRenderable:!l&&ie._hasPopupData(i)}),this.elements=s,l&&ie._hasPopupData(i)){const c=this.popup=this.#t();for(const u of s)u.popup=c}else this.popup=null}#t(){return new kA({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${ta}${r}`).join(",")),this.container}}class kA{#t=null;#e=this.#V.bind(this);#n=this.#F.bind(this);#i=this.#L.bind(this);#a=this.#w.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#y=null;#v=null;#b=null;#T=null;#x=null;#S=null;#C=!1;#A=null;#E=null;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:l,contentsObj:c,richText:u,parent:h,rect:f,parentRect:p,open:y,commentManager:b=null}){this.#s=t,this.#x=r,this.#o=c,this.#T=u,this.#d=h,this.#r=i,this.#b=f,this.#h=p,this.#l=s,this.#t=b,this.#A=s[0],this.#c=ah.toDateObject(l),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),b||(this.#R(),this.#s.hidden=!0,y&&this.#w())}#R(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const i of this.trigger)i.addEventListener("click",this.#a,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#l)i.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(i=>i.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g){this.#g.parentNode||this.#A.container.after(this.#g);return}if(this.#y||this.#M(),!this.#y)return;const{signal:t}=this.#p=new AbortController,i=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},l=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#g=this.#A.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#g=document.createElement("button");c.className="annotationCommentButton";const u=this.#A.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#D(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",s,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),u.after(c)}}#D(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#g||this.renderCommentButton();const[t,i]=this.#y,{style:s}=this.#g;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#I(){this.#A.extraPopupElement||(this.#g||this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:r,modificationDate:l}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:r,modificationDate:l}}get elementBeforePopup(){return this.#g}get comment(){return this.#E||=this.#A.commentText,this.#E}set comment(t){t!==this.comment&&(this.#A.commentText=this.#E=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=i)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#g.getBoundingClientRect(),{x:r,y:l,width:c,height:u}=this.#A.layer.getBoundingClientRect();return[(t-r)/c,(i+s-l)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:l,y:c,width:u,height:h}=r;this.#t.showDialog(null,this,l+i*u,c+s*h,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#r){const s=t.style.outlineColor=st.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#x?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#x}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}Bm({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#O(){const t=this.#T,i=this.#o;return t?.str&&(!i?.str||i.str===t.str)&&this.#T.html||null}get#N(){return this.#O?.attributes?.style?.fontSize||0}get#P(){return this.#O?.attributes?.style?.color||null}#B(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#P,fontSize:this.#N?`calc(${this.#N}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))i.push({name:"span",value:l,attributes:r});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#E=null):i&&(i.deleted?this.remove():(this.#I(),this.#E=i.text)),t&&(this.#y=null,this.#M(),this.#D());return}if(s||i?.deleted){this.remove();return}this.#R(),this.#S||={contentsObj:this.#o,richText:this.#T},t&&(this.#u=null),i&&i.text&&(this.#T=this.#B(i.text),this.#c=ah.toDateObject(i.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#S&&({contentsObj:this.#o,richText:this.#T}=this.#S,this.#S=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#_(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:l}}}=this.#d;let c=!!this.#h,u=c?this.#h:this.#b;for(const w of this.#l)if(!u||st.intersect(w.data.rect,u)!==null){u=w.data.rect,c=!0;break}const h=st.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=c?u[2]-u[0]+5:0,y=h[0]+p,b=h[1];this.#u=[100*(y-r)/i,100*(b-l)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#e)):(this.#F(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#e))}#L(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#_(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#F(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#C&&(this.#m||this.#L(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class oy extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class OA extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class LA extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",i-l),c.setAttribute("height",s-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class NA extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",i/2),c.setAttribute("cy",s/2),c.setAttribute("rx",i/2-l/2),c.setAttribute("ry",s/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ly extends ie{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:l,height:c}=this;if(!i)return this.container;const u=this.svgFactory.create(l,c,!0);let h=[];for(let p=0,y=i.length;p<y;p+=2){const b=i[p]-t[0],A=t[3]-i[p+1];h.push(`${b},${A}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class BA extends ly{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class zA extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Ch extends ie{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?At.HIGHLIGHT:At.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:l}}=this,{transform:c,width:u,height:h}=this.#n(i,t),f=this.svgFactory.create(u,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",c);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),p.append(A)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,l=this.#t;if(i>=0&&l.setAttribute("stroke-width",i||1),s)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",s[c].join(","));if(r){const{transform:c,width:u,height:h}=this.#n(this.data.rotation,r);l.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class cy extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class IA extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class PA extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class FA extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class uy extends ie{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class jA extends ie{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=be.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(r?l.metaKey:l.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Mh{#t=null;#e=null;#n=null;#i=new Map;#a=null;#r=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:l,viewport:c,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){this.div=t,this.#t=i,this.#e=s,this.#a=u||null,this.#r=f||null,this.#n=p||new Sh,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async render(t){const{annotations:i}=t,s=this.div;ss(s,this.viewport);const r=new Map,l=[],c={data:null,layer:s,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ol,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of i){if(u.noHTML)continue;const h=u.annotationType===pe.POPUP;if(h){const y=r.get(u.id);if(!y)continue;if(!this._commentManager){l.push(u);continue}c.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=Ju.create(c);if(!f.isRenderable)continue;if(!h&&(this.#s.push(f),u.popupRef)){const y=r.get(u.popupRef);y?y.push(f):r.set(u.popupRef,[f])}const p=f.render();u.hidden&&(p.style.visibility="hidden"),f._isEditable&&(this.#i.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of l){const h=c.elements=r.get(u.id);c.data=u;const f=Ju.create(c);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${ta}${u.id}`,u.hidden&&(p.style.visibility="hidden"),h.at(-1).container.after(p)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:s,data:{id:r}}of this.#s){const l=s.id=`${ta}${r}`;t.push(this.#a?.getAriaAttributes(l).then(c=>{if(c)for(const[u,h]of c)s.setAttribute(u,h)}))}}this.#s.sort(({data:{rect:[s,r,l,c]}},{data:{rect:[u,h,f,p]}})=>{if(s===l&&r===c)return 1;if(u===f&&h===p)return-1;const y=c,b=r,A=(r+c)/2,w=p,S=h,T=(h+p)/2;if(A>=w&&T<=b)return-1;if(T>=y&&A<=S)return 1;const E=(s+l)/2,D=(u+f)/2;return E-D});const i=document.createDocumentFragment();for(const s of this.#s)i.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&i.append(s.extraPopupElement.render());if(this.div.append(i),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#r,svgFactory:new ol,parent:this};for(const s of t){s.borderStyle||=Mh._defaultBorderStyle,i.data=s;const r=Ju.create(i);r.isRenderable&&(r.render(),r.contentElement.id=`${ta}${s.id}`,this.#s.push(r))}await this.#c()}update({viewport:t}){const i=this.div;this.viewport=t,ss(i,{rotation:t.rotation}),this.#l(),i.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:l}=r;l?l.nodeName==="CANVAS"?l.replaceWith(s):l.classList.contains("annotationContent")?l.after(s):l.before(s):r.append(s);const c=this.#i.get(i);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:r}=t,l=new EA({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#n});return l.render(),l.contentElement.id=`${ta}${s}`,l.createOrUpdatePopup(),this.#s.push(l),l}removeAnnotation(t){const i=this.#s.findIndex(r=>r.data.id===t);if(i<0)return;const[s]=this.#s.splice(i,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const i of t)i.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return yt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Qs.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Zo=/\r\n?|\n/g;class we extends ct{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=we.prototype,i=l=>l.isEmpty(),s=Ln.TRANSLATE_SMALL,r=Ln.TRANSLATE_BIG;return yt(this,"_keyboardManager",new xr([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=At.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||we._defaultColor||ct._defaultLineColor,this.#i=t.fontSize||we._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,i){ct.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case kt.FREETEXT_SIZE:we._defaultFontSize=i;break;case kt.FREETEXT_COLOR:we._defaultColor=i;break}}updateParams(t,i){switch(t){case kt.FREETEXT_SIZE:this.#a(i);break;case kt.FREETEXT_COLOR:this.#r(i);break}}static get defaultPropertiesToUpdate(){return[[kt.FREETEXT_SIZE,we._defaultFontSize],[kt.FREETEXT_COLOR,we._defaultColor||ct._defaultLineColor]]}get propertiesToUpdate(){return[[kt.FREETEXT_SIZE,this.#i],[kt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new vr(this),[["colorPicker",this._colorPicker]]}get colorType(){return kt.FREETEXT_COLOR}#a(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-we._internalPadding*t,-(we._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(we.#c(s)),i=s);return t.join(`
`)}#o(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:l}=this,c=l.style.display,u=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",r.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#s().trimEnd();if(t===i)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){we._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,p]=this.pageDimensions,[y,b]=this.pageTranslation;let A,w;switch(this.rotation){case 0:A=t+(c[0]-y)/f,w=i+this.height-(c[1]-b)/p;break;case 90:A=t+(c[0]-y)/f,w=i-(c[1]-b)/p,[u,h]=[h,-u];break;case 180:A=t-this.width+(c[0]-y)/f,w=i-(c[1]-b)/p,[u,h]=[-u,-h];break;case 270:A=t+(c[0]-y-this.height*p)/f,w=i+(c[1]-b-this.width*f)/p,[u,h]=[-h,u];break}this.setAt(A*r,w*l,u,h)}else this._moveAfterPaste(t,i);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Zo,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=we.#h(i.getData("text")||"").replaceAll(Zo,`
`);if(!r)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:u,startOffset:h}=c,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(Zo,"")),A!==this.editorDiv){let w=f;for(const S of this.editorDiv.childNodes){if(S===A){w=p;continue}w.push(we.#c(S))}}f.push(u.nodeValue.slice(0,h).replaceAll(Zo,""))}else if(u===this.editorDiv){let A=f,w=0;for(const S of this.editorDiv.childNodes)w++===h&&(A=p),A.push(we.#c(S))}this.#t=`${f.join(`
`)}${r}${p.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const w=A.nodeValue.length;if(b<=w){y.setStart(A,b),y.setEnd(A,b);break}b-=w}l.removeAllRanges(),l.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=we._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let r=null;if(t instanceof oy){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:f,id:p,popupRef:y,richText:b,contentsObj:A,creationDate:w,modificationDate:S},textContent:T,textPosition:E,parent:{page:{pageNumber:D}}}=t;if(!T||T.length===0)return null;r=t={annotationType:At.FREETEXT,color:Array.from(u),fontSize:c,value:T.join(`
`),position:E,pageIndex:D-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:w,modificationDate:S}}const l=await super.deserialize(t,i,s);return l.#i=t.fontSize,l.color=st.makeHexColor(...t.color),l.#t=we.#h(t.value),l._initialData=r,t.comment&&l.setCommentData(t),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=ct._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==l}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of this.#t.split(`
`)){const l=document.createElement("div");l.append(r?document.createTextNode(r):document.createElement("br")),i.append(l)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class at{static PRECISION=1e-4;toSVGPath(){jt("Abstract method `toSVGPath` must be implemented.")}get box(){jt("Abstract getter `box` must be implemented.")}serialize(t,i){jt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,l,c){c||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)c[u]=i+t[u]*r,c[u+1]=s+t[u+1]*l;return c}static _rescaleAndSwap(t,i,s,r,l,c){c||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)c[u]=i+t[u+1]*r,c[u+1]=s+t[u]*l;return c}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)r[l]=i+t[l],r[l+1]=s+t[l+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,l){switch(l){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,l,c){return[(t+5*s)/6,(i+5*r)/6,(5*s+l)/6,(5*r+c)/6,(s+l)/2,(r+c)/2]}}class ts{#t;#e=[];#n;#i;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=ts.#m+ts.#p;constructor({x:t,y:i},s,r,l,c,u=0){this.#t=s,this.#h=l*r,this.#i=c,this.#r.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#l=ts.#m*r,this.#c=ts.#u*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#r[8])}#g(){const t=this.#r.subarray(4,6),i=this.#r.subarray(16,18),[s,r,l,c]=this.#t;return[(this.#s+(t[0]-i[0])/2-s)/l,(this.#o+(t[1]-i[1])/2-r)/c,(this.#s+(i[0]-t[0])/2-s)/l,(this.#o+(i[1]-t[1])/2-r)/c]}add({x:t,y:i}){this.#s=t,this.#o=i;const[s,r,l,c]=this.#t;let[u,h,f,p]=this.#r.subarray(8,12);const y=t-f,b=i-p,A=Math.hypot(y,b);if(A<this.#c)return!1;const w=A-this.#l,S=w/A,T=S*y,E=S*b;let D=u,C=h;u=f,h=p,f+=T,p+=E,this.#f?.push(t,i);const I=-E/w,N=T/w,z=I*this.#h,P=N*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+z,p+P],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-z,p-P],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+z,h+P],2),this.#a.push(NaN,NaN,NaN,NaN,(u+z-s)/l,(h+P-r)/c),this.#r.set([u-z,h-P],14),this.#e.push(NaN,NaN,NaN,NaN,(u-z-s)/l,(h-P-r)/c)),this.#r.set([D,C,u,h,f,p],6),!this.isEmpty()):(this.#r.set([D,C,u,h,f,p],6),Math.abs(Math.atan2(C-h,D-u)-Math.atan2(E,T))<Math.PI/2?([u,h,f,p]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/l,((h+p)/2-r)/c),[u,h,D,C]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((D+u)/2-s)/l,((C+h)/2-r)/c),!0):([D,C,u,h,f,p]=this.#r.subarray(0,6),this.#a.push(((D+5*u)/6-s)/l,((C+5*h)/6-r)/c,((5*u+f)/6-s)/l,((5*h+p)/6-r)/c,((u+f)/2-s)/l,((h+p)/2-r)/c),[f,p,u,h,D,C]=this.#r.subarray(12,18),this.#e.push(((D+5*u)/6-s)/l,((C+5*h)/6-r)/c,((5*u+f)/6-s)/l,((5*h+p)/6-r)/c,((u+f)/2-s)/l,((h+p)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,i=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,i,s,r]=this.#t,[l,c,u,h]=this.#g();return`M${(this.#r[2]-t)/s} ${(this.#r[3]-i)/r} L${(this.#r[4]-t)/s} ${(this.#r[5]-i)/r} L${l} ${c} L${u} ${h} L${(this.#r[16]-t)/s} ${(this.#r[17]-i)/r} L${(this.#r[14]-t)/s} ${(this.#r[15]-i)/r} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#b(t){const[i,s,r,l]=this.#t,c=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[h,f,p,y]=this.#g();t.push(`L${(c[0]-i)/r} ${(c[1]-s)/l} L${h} ${f} L${p} ${y} L${(u[0]-i)/r} ${(u[1]-s)/l}`)}newFreeDrawOutline(t,i,s,r,l,c){return new hy(t,i,s,r,l,c)}getOutlines(){const t=this.#a,i=this.#e,s=this.#r,[r,l,c,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=h.length-2;y<b;y+=2)h[y]=(this.#f[y]-r)/c,h[y+1]=(this.#f[y+1]-l)/u;if(h[h.length-2]=(this.#s-r)/c,h[h.length-1]=(this.#o-l)/u,isNaN(s[6])&&!this.isEmpty())return this.#T(h);const f=new Float32Array(this.#a.length+24+this.#e.length);let p=t.length;for(let y=0;y<p;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}p=this.#S(f,p);for(let y=i.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(i[y+b])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=i[y+b],f[p+1]=i[y+b+1],p+=2}return this.#x(f,p),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#n,this.#i)}#T(t){const i=this.#r,[s,r,l,c]=this.#t,[u,h,f,p]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(i[2]-s)/l,(i[3]-r)/c,NaN,NaN,NaN,NaN,(i[4]-s)/l,(i[5]-r)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(i[16]-s)/l,(i[17]-r)/c,NaN,NaN,NaN,NaN,(i[14]-s)/l,(i[15]-r)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#n,this.#i)}#x(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#S(t,i){const s=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[l,c,u,h]=this.#t,[f,p,y,b]=this.#g();return t.set([NaN,NaN,NaN,NaN,(s[0]-l)/u,(s[1]-c)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-l)/u,(r[1]-c)/h],i),i+=24}}class hy extends at{#t;#e=new Float32Array(4);#n;#i;#a;#r;#s;constructor(t,i,s,r,l,c){super(),this.#s=t,this.#a=i,this.#t=s,this.#r=r,this.#n=l,this.#i=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,h,f,p]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-h)/p;for(let y=0,b=i.length;y<b;y+=2)i[y]=(i[y]-u)/f,i[y+1]=(i[y+1]-h)/p}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let i=6,s=this.#s.length;i<s;i+=6){if(isNaN(this.#s[i])){t.push(`L${this.#s[i+4]} ${this.#s[i+5]}`);continue}t.push(`C${this.#s[i]} ${this.#s[i+1]} ${this.#s[i+2]} ${this.#s[i+3]} ${this.#s[i+4]} ${this.#s[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],l){const c=s-t,u=r-i;let h,f;switch(l){case 0:h=at._rescale(this.#s,t,r,c,-u),f=at._rescale(this.#a,t,r,c,-u);break;case 90:h=at._rescaleAndSwap(this.#s,t,i,c,u),f=at._rescaleAndSwap(this.#a,t,i,c,u);break;case 180:h=at._rescale(this.#s,s,i,-c,u),f=at._rescale(this.#a,s,i,-c,u);break;case 270:h=at._rescaleAndSwap(this.#s,s,r,-c,-u),f=at._rescaleAndSwap(this.#a,s,r,-c,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const i=this.#s;let s=i[4],r=i[5];const l=[s,r,s,r];let c=s,u=r,h=s,f=r;const p=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,w=i.length;A<w;A+=6){const S=i[A+4],T=i[A+5];isNaN(i[A])?(st.pointBoundingBox(S,T,l),u>T?(c=S,u=T):u===T&&(c=p(c,S)),f<T?(h=S,f=T):f===T&&(h=p(h,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,st.bezierBoundingBox(s,r,...i.slice(A,A+6),y),st.rectBoundingBox(y[0],y[1],y[2],y[3],l),u>y[1]?(c=y[0],u=y[1]):u===y[1]&&(c=p(c,y[0])),f<y[3]?(h=y[2],f=y[3]):f===y[3]&&(h=p(h,y[2]))),s=S,r=T}const b=this.#e;b[0]=l[0]-this.#n,b[1]=l[1]-this.#n,b[2]=l[2]-l[0]+2*this.#n,b[3]=l[3]-l[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,i,s,r,l,c=0){return new ts(t,i,s,r,l,c)}getNewOutline(t,i){const[s,r,l,c]=this.#e,[u,h,f,p]=this.#t,y=l*f,b=c*p,A=s*f+u,w=r*p+h,S=this.newOutliner({x:this.#a[0]*y+A,y:this.#a[1]*b+w},this.#t,this.#r,t,this.#i,i??this.#n);for(let T=2;T<this.#a.length;T+=2)S.add({x:this.#a[T]*y+A,y:this.#a[T+1]*b+w});return S.getOutlines()}}class fh{#t;#e;#n;#i=[];#a=[];constructor(t,i=0,s=0,r=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:S,y:T,width:E,height:D}of t){const C=Math.floor((S-i)/c)*c,I=Math.ceil((S+E+i)/c)*c,N=Math.floor((T-i)/c)*c,z=Math.ceil((T+D+i)/c)*c,P=[C,N,z,!0],V=[I,N,z,!1];this.#i.push(P,V),st.rectBoundingBox(C,N,I,z,l)}const u=l[2]-l[0]+2*s,h=l[3]-l[1]+2*s,f=l[0]-s,p=l[1]-s;let y=r?-1/0:1/0,b=1/0;const A=this.#i.at(r?-1:-2),w=[A[0],A[2]];for(const S of this.#i){const[T,E,D,C]=S;!C&&r?E<b?(b=E,y=T):E===b&&(y=Math.max(y,T)):C&&!r&&(E<b?(b=E,y=T):E===b&&(y=Math.min(y,T))),S[0]=(T-f)/u,S[1]=(E-p)/h,S[2]=(D-p)/h}this.#t=new Float32Array([f,p,u,h]),this.#e=[y,b],this.#n=w}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#l(i)),this.#o(i)):(this.#c(i),t.push(...this.#l(i)));return this.#r(t)}#r(t){const i=[],s=new Set;for(const c of t){const[u,h,f]=c;i.push([u,h,c],[u,f,c])}i.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=i.length;c<u;c+=2){const h=i[c][2],f=i[c+1][2];h.push(f),f.push(h),s.add(h),s.add(f)}const r=[];let l;for(;s.size>0;){const c=s.values().next().value;let[u,h,f,p,y]=c;s.delete(c);let b=u,A=h;for(l=[u,f],r.push(l);;){let w;if(s.has(p))w=p;else if(s.has(y))w=y;else break;s.delete(w),[u,h,f,p,y]=w,b!==u&&(l.push(b,A,u,A===h?h:f),b=u),A=A===h?f:h}l.push(b,A)}return new UA(r,this.#t,this.#e,this.#n)}#s(t){const i=this.#a;let s=0,r=i.length-1;for(;s<=r;){const l=s+r>>1,c=i[l][0];if(c===t)return l;c<t?s=l+1:r=l-1}return r+1}#o([,t,i]){const s=this.#s(t);this.#a.splice(s,0,[t,i])}#c([,t,i]){const s=this.#s(t);for(let r=s;r<this.#a.length;r++){const[l,c]=this.#a[r];if(l!==t)break;if(l===t&&c===i){this.#a.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[l,c]=this.#a[r];if(l!==t)break;if(l===t&&c===i){this.#a.splice(r,1);return}}}#l(t){const[i,s,r]=t,l=[[i,s,r]],c=this.#s(r);for(let u=0;u<c;u++){const[h,f]=this.#a[u];for(let p=0,y=l.length;p<y;p++){const[,b,A]=l[p];if(!(f<=b||A<=h)){if(b>=h){if(A>f)l[p][1]=f;else{if(y===1)return[];l.splice(p,1),p--,y--}continue}l[p][2]=h,A>f&&l.push([i,f,A])}}}return l}}class UA extends at{#t;#e;constructor(t,i,s,r){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let l=2;l<i.length;l+=2){const c=i[l],u=i[l+1];c===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],l){const c=[],u=s-t,h=r-i;for(const f of this.#e){const p=new Array(f.length);for(let y=0;y<f.length;y+=2)p[y]=t+f[y]*u,p[y+1]=r-f[y+1]*h;c.push(p)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class gh extends ts{newFreeDrawOutline(t,i,s,r,l,c){return new HA(t,i,s,r,l,c)}}class HA extends hy{newOutliner(t,i,s,r,l,c=0){return new gh(t,i,s,r,l,c)}}class ce extends ct{#t=null;#e=0;#n;#i=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=At.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ce.prototype;return yt(this,"_keyboardManager",new xr([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ce._defaultColor,this.#g=t.thickness||ce._defaultThickness,this.opacity=t.opacity||ce._defaultOpacity,this.#n=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#A()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new fh(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const i=new fh(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=i.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#r;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#l=t;const r=1.5;if(this.#r=t.getNewOutline(this.#g/2+r,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ce.#E(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:ce.#E(this.#r.box,y),path:{d:this.#r.toSVGPath()}})}const[l,c,u,h]=t.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=u,this.height=h;break;case 90:{const[y,b]=this.parentDimensions;this.x=c,this.y=1-l,this.width=u*b/y,this.height=h*y/b;break}case 180:this.x=1-l,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-c,this.y=l,this.width=u*b/y,this.height=h*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-l)/u,(f[1]-c)/h];const{lastPoint:p}=this.#r;this.#m=[(p[0]-l)/u,(p[1]-c)/h]}static initialize(t,i){ct.initialize(t,i),ce._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case kt.HIGHLIGHT_COLOR:ce._defaultColor=i;break;case kt.HIGHLIGHT_THICKNESS:ce._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case kt.HIGHLIGHT_COLOR:this.#T(i);break;case kt.HIGHLIGHT_THICKNESS:this.#x(i);break}}static get defaultPropertiesToUpdate(){return[[kt.HIGHLIGHT_COLOR,ce._defaultColor],[kt.HIGHLIGHT_THICKNESS,ce._defaultThickness]]}get propertiesToUpdate(){return[[kt.HIGHLIGHT_COLOR,this.color||ce._defaultColor],[kt.HIGHLIGHT_THICKNESS,this.#g||ce._defaultThickness],[kt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#T(t){const i=(l,c)=>{this.color=l,this.opacity=c,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,ce._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#x(t){const i=this.#g,s=r=>{this.#g=r,this.#S(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:kt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new yi({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#C():t&&(this.#A(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#S(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#E([t,i,s,r],l){switch(l){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=ce.#E(this.#l.box,t)):s=ce.#E([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#p,{bbox:ce.#E(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(),Im(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(t){ce._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#s,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#D(){return this.#h?this.rotation:0}#I(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,l=this.#n,c=new Float32Array(l.length*8);let u=0;for(const{x:h,y:f,width:p,height:y}of l){const b=h*t+s,A=(1-f)*i+r;c[u]=c[u+4]=b,c[u+1]=c[u+3]=A,c[u+2]=c[u+6]=b+p*t,c[u+5]=c[u+7]=A-y*i,u+=8}return c}#O(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,i,{target:s,x:r,y:l}){const{x:c,y:u,width:h,height:f}=s.getBoundingClientRect(),p=new AbortController,y=t.combinedSignal(p),b=A=>{p.abort(),this.#P(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",ae,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",bi,{signal:y}),s.addEventListener("pointermove",this.#N.bind(this,t),{signal:y}),this._freeHighlight=new gh({x:r,y:l},[c,u,h,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#N(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#P(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof cy){const{data:{quadPoints:w,rect:S,rotation:T,id:E,color:D,opacity:C,popupRef:I,richText:N,contentsObj:z,creationDate:P,modificationDate:V},parent:{page:{pageNumber:Q}}}=t;r=t={annotationType:At.HIGHLIGHT,color:Array.from(D),opacity:C,quadPoints:w,boxes:null,pageIndex:Q-1,rect:S.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,popupRef:I,richText:N,comment:z?.str||null,creationDate:P,modificationDate:V}}else if(t instanceof Ch){const{data:{inkLists:w,rect:S,rotation:T,id:E,color:D,borderStyle:{rawWidth:C},popupRef:I,richText:N,contentsObj:z,creationDate:P,modificationDate:V},parent:{page:{pageNumber:Q}}}=t;r=t={annotationType:At.HIGHLIGHT,color:Array.from(D),thickness:C,inkLists:w,boxes:null,pageIndex:Q-1,rect:S.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,popupRef:I,richText:N,comment:z?.str||null,creationDate:P,modificationDate:V}}const{color:l,quadPoints:c,inkLists:u,opacity:h}=t,f=await super.deserialize(t,i,s);f.color=st.makeHexColor(...l),f.opacity=h||1,u&&(f.#g=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[p,y]=f.pageDimensions,[b,A]=f.pageTranslation;if(c){const w=f.#n=[];for(let S=0;S<c.length;S+=8)w.push({x:(c[S]-b)/p,y:1-(c[S+1]-A)/y,width:(c[S+2]-c[S])/p,height:(c[S+1]-c[S+5])/y});f.#v(),f.#A(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],S={x:w[0]-b,y:y-(w[1]-A)},T=new gh(S,[0,0,p,y],1,f.#g/2,!0,.001);for(let C=0,I=w.length;C<I;C+=2)S.x=w[C]-b,S.y=y-(w[C+1]-A),T.add(S);const{id:E,clipPathId:D}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);f.#b({highlightOutlines:T.getOutlines(),highlightId:E,clipPathId:D}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=ct._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#g,quadPoints:this.#I(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class dy{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){jt("Not implemented")}}class zt extends ct{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#r(t),this.#c())}#r({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,i){const{id:s}=i.drawLayer.draw(zt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,l]of Object.entries(i))s.has(r)?Object.assign(t[r],l):t[r]=l;return t}static getDefaultDrawingOptions(t){jt("Not implemented")}static get typesMap(){jt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(zt.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,l=r[i],c=u=>{r.updateProperty(i,u);const h=this.#t.updateProperty(i,u);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,i,s,r]){const{parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(c/l),r*(l/c)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(c/l),r*(l/c)];default:return[t,i,s,r]}}#d(){const{x:t,y:i,width:s,height:r,parentDimensions:[l,c],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(l/c),r*(c/l)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(l/c),r*(c/l)];default:return[t,i,s,r]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:i,width:s,height:r,rotation:l,parentRotation:c,parentDimensions:[u,h]}=this;switch((l*4+c)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/h),r*(h/u),s*(u/h)];case 5:return[1-i,t,s*(u/h),r*(h/u)];case 6:return[1-t-r*(h/u),1-i,r*(h/u),s*(u/h)];case 7:return[i-s*(u/h),1-t-r*(h/u),s*(u/h),r*(h/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(h/u),i,r*(h/u),s*(u/h)];case 13:return[1-i-s*(u/h),t-r*(h/u),s*(u/h),r*(h/u)];case 14:return[1-t,1-i-s*(u/h),r*(h/u),s*(u/h)];case 15:return[i,1-t,s*(u/h),r*(h/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,l){jt("Not implemented")}static startDrawing(t,i,s,r){const{target:l,offsetX:c,offsetY:u,pointerId:h,pointerType:f}=r;if(Pt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:p}}=t,{width:y,height:b}=l.getBoundingClientRect(),A=zt.#i=new AbortController,w=t.combinedSignal(A);if(Pt.setPointer(f,h),window.addEventListener("pointerup",S=>{Pt.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:w}),window.addEventListener("pointercancel",S=>{Pt.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",S=>{Pt.isSamePointerType(S.pointerType)&&(Pt.initializeAndAddPointerId(S.pointerId),zt.#n.isCancellable()&&(zt.#n.removeLastElement(),zt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",bi,{signal:w}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),l.addEventListener("touchmove",S=>{Pt.isSameTimeStamp(S.timeStamp)&&ae(S)},{signal:w}),t.toggleDrawing(),i._editorUndoBar?.hide(),zt.#n){t.drawLayer.updateProperties(this._currentDrawId,zt.#n.startNew(c,u,y,b,p));return}i.updateUIForDefaultProperties(this),zt.#n=this.createDrawerInstance(c,u,y,b,p),zt.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(zt.#a.toSVGProperties(),zt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Pt.isSameTimeStamp(t.timeStamp),!zt.#n)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(Pt.isSamePointerId(r)){if(Pt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,zt.#n.add(i,s)),Pt.setTimeStamp(t.timeStamp),ae(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,zt.#n=null,zt.#a=null,Pt.clearTimeStamp()),zt.#i&&(zt.#i.abort(),zt.#i=null,Pt.clearPointerIds())}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,zt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=zt.#n,r=this._currentDrawId,l=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(l))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:kt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(kt.DRAW_STEP),!zt.#n.isEmpty()){const{pageDimensions:[s,r],scale:l}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:zt.#n.getOutlines(s*l,r*l,l,this._INNER_MARGIN),drawingOptions:zt.#a,mustBeCommitted:!t});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,l,c){jt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:l,pageX:c,pageY:u}}=i.viewport,h=this.deserializeDraw(c,u,r,l,this._INNER_MARGIN,t),f=await super.deserialize(t,i,s);return f.createDrawingOptions(t),f.#r({drawOutlines:h}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,s]=this.pageTranslation,[r,l]=this.pageDimensions;return this.#t.serialize([i,s,r,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class GA{#t=new Float64Array(6);#e;#n;#i;#a;#r;#s="";#o=0;#c=new Er;#l;#d;constructor(t,i,s,r,l,c){this.#l=s,this.#d=r,this.#i=l,this.#a=c,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#r=[t,i],this.#n=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#a=i)}#h(t,i){return at._normalizePoint(t,i,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,r,l,c]=this.#t.subarray(2,6),u=t-l,h=i-c;return Math.hypot(this.#l*u,this.#d*h)<=2?null:(this.#r.push(t,i),isNaN(s)?(this.#t.set([l,c,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,l,c,t,i],0),this.#e.push(...at.createBezierPoints(s,r,l,c,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,l){this.#l=s,this.#d=r,this.#i=l,[t,i]=this.#h(t,i);const c=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#r=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#r}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=at.svgRound(this.#e[4]),i=at.svgRound(this.#e[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${t} ${i} Z`,this.#s;if(this.#r.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${i}`,this.#o=6}if(this.#r.length===4){const r=at.svgRound(this.#e[10]),l=at.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${l}`,this.#o=12,this.#s}const s=[];this.#o===0&&(s.push(`M ${t} ${i}`),this.#o=6);for(let r=this.#o,l=this.#e.length;r<l;r+=6){const[c,u,h,f,p,y]=this.#e.slice(r,r+6).map(at.svgRound);s.push(`C${c} ${u} ${h} ${f} ${p} ${y}`)}return this.#s+=s.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,i,s,r){const l=this.#n.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#c.build(this.#n,t,i,s,this.#i,this.#a,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Er extends at{#t;#e=0;#n;#i;#a;#r;#s;#o;#c;build(t,i,s,r,l,c,u){this.#a=i,this.#r=s,this.#s=r,this.#o=l,this.#c=c,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${at.svgRound(i[4])} ${at.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${at.svgRound(i[10])} ${at.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[l,c,u,h,f,p]=i.subarray(s,s+6).map(at.svgRound);t.push(`C${l} ${c} ${u} ${h} ${f} ${p}`)}}return t.join("")}serialize([t,i,s,r],l){const c=[],u=[],[h,f,p,y]=this.#d();let b,A,w,S,T,E,D,C,I;switch(this.#o){case 0:I=at._rescale,b=t,A=i+r,w=s,S=-r,T=t+h*s,E=i+(1-f-y)*r,D=t+(h+p)*s,C=i+(1-f)*r;break;case 90:I=at._rescaleAndSwap,b=t,A=i,w=s,S=r,T=t+f*s,E=i+h*r,D=t+(f+y)*s,C=i+(h+p)*r;break;case 180:I=at._rescale,b=t+s,A=i,w=-s,S=r,T=t+(1-h-p)*s,E=i+f*r,D=t+(1-h)*s,C=i+(f+y)*r;break;case 270:I=at._rescaleAndSwap,b=t+s,A=i+r,w=-s,S=-r,T=t+(1-f-y)*s,E=i+(1-h-p)*r,D=t+(1-f)*s,C=i+(1-h)*r;break}for(const{line:N,points:z}of this.#i)c.push(I(N,b,A,w,S,l?new Array(N.length):null)),u.push(I(z,b,A,w,S,l?new Array(z.length):null));return{lines:c,points:u,rect:[T,E,D,C]}}static deserialize(t,i,s,r,l,{paths:{lines:c,points:u},rotation:h,thickness:f}){const p=[];let y,b,A,w,S;switch(h){case 0:S=at._rescale,y=-t/s,b=i/r+1,A=1/s,w=-1/r;break;case 90:S=at._rescaleAndSwap,y=-i/r,b=-t/s,A=1/r,w=1/s;break;case 180:S=at._rescale,y=t/s+1,b=-i/r,A=-1/s,w=1/r;break;case 270:S=at._rescaleAndSwap,y=i/r+1,b=t/s+1,A=-1/r,w=-1/s;break}if(!c){c=[];for(const E of u){const D=E.length;if(D===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(D===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const C=new Float32Array(3*(D-2));c.push(C);let[I,N,z,P]=E.subarray(0,4);C.set([NaN,NaN,NaN,NaN,I,N],0);for(let V=4;V<D;V+=2){const Q=E[V],nt=E[V+1];C.set(at.createBezierPoints(I,N,z,P,Q,nt),(V-2)*3),[I,N,z,P]=[z,P,Q,nt]}}}for(let E=0,D=c.length;E<D;E++)p.push({line:S(c[E].map(C=>C??NaN),y,b,A,w),points:S(u[E].map(C=>C??NaN),y,b,A,w)});const T=new this.prototype.constructor;return T.build(p,s,r,1,h,f,l),T}#l(t=this.#c){const i=this.#n+t/2*this.#s;return this.#o%180===0?[i/this.#a,i/this.#r]:[i/this.#r,i/this.#a]}#d(){const[t,i,s,r]=this.#t,[l,c]=this.#l(0);return[t+l,i+c,s-2*l,r-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)st.pointBoundingBox(r[u],r[u+1],t);continue}let l=r[4],c=r[5];for(let u=6,h=r.length;u<h;u+=6){const[f,p,y,b,A,w]=r.subarray(u,u+6);st.bezierBoundingBox(l,c,f,p,y,b,A,w,t),l=A,c=w}}const[i,s]=this.#l();t[0]=De(t[0]-i,0,1),t[1]=De(t[1]-s,0,1),t[2]=De(t[2]+i,0,1),t[3]=De(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#l();this.#c=t;const[r,l]=this.#l(),[c,u]=[r-i,l-s],h=this.#t;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([t,i],s){const[r,l]=this.#l();this.#a=t,this.#r=i,this.#s=s;const[c,u]=this.#l(),h=c-r,f=u-l,p=this.#t;return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(at.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,l=0,c=0,u=0,h=0;switch(this.#e){case 90:r=i/t,l=-t/i,u=t;break;case 180:s=-1,c=-1,u=t,h=i;break;case 270:r=-i/t,l=t/i,h=i;break;default:return""}return`matrix(${s} ${r} ${l} ${c} ${at.svgRound(u)} ${at.svgRound(h)})`}getPathResizingSVGProperties([t,i,s,r]){const[l,c]=this.#l(),[u,h,f,p]=this.#t;if(Math.abs(f-l)<=at.PRECISION||Math.abs(p-c)<=at.PRECISION){const S=t+s/2-(u+f/2),T=i+r/2-(h+p/2);return{path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${T})`}}}const y=(s-2*l)/(f-2*l),b=(r-2*c)/(p-2*c),A=f/s,w=p/r;return{path:{"transform-origin":`${at.svgRound(u)} ${at.svgRound(h)}`,transform:`${this.rotationTransform} scale(${A} ${w}) translate(${at.svgRound(l)} ${at.svgRound(c)}) scale(${y} ${b}) translate(${at.svgRound(-l)} ${at.svgRound(-c)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[l,c]=this.#l(),u=this.#t,[h,f,p,y]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(p-l)<=at.PRECISION||Math.abs(y-c)<=at.PRECISION){const T=t+s/2-(h+p/2),E=i+r/2-(f+y/2);for(const{line:D,points:C}of this.#i)at._translate(D,T,E,D),at._translate(C,T,E,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*l)/(p-2*l),A=(r-2*c)/(y-2*c),w=-b*(h+l)+t+l,S=-A*(f+c)+i+c;if(b!==1||A!==1||w!==0||S!==0)for(const{line:T,points:E}of this.#i)at._rescale(T,w,S,b,A,T),at._rescale(E,w,S,b,A,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,l]=s,c=this.#t,u=t-c[0],h=i-c[1];if(this.#a===r&&this.#r===l)for(const{line:f,points:p}of this.#i)at._translate(f,u,h,f),at._translate(p,u,h,p);else{const f=this.#a/r,p=this.#r/l;this.#a=r,this.#r=l;for(const{line:y,points:b}of this.#i)at._rescale(y,u,h,f,p,y),at._rescale(b,u,h,f,p,b);c[2]*=f,c[3]*=p}return c[0]=t,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t)} ${at.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t[0])} ${at.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Al extends dy{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ct._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new Al(this._viewParameters);return t.updateAll(this),t}}class Dh extends zt{static _type="ink";static _editorType=At.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){ct.initialize(t,i),this._defaultDrawingOptions=new Al(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return yt(this,"typesMap",new Map([[kt.INK_THICKNESS,"stroke-width"],[kt.INK_COLOR,"stroke"],[kt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,l){return new GA(t,i,s,r,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,l,c){return Er.deserialize(t,i,s,r,l,c)}static async deserialize(t,i,s){let r=null;if(t instanceof Ch){const{data:{inkLists:c,rect:u,rotation:h,id:f,color:p,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:w,contentsObj:S,creationDate:T,modificationDate:E},parent:{page:{pageNumber:D}}}=t;r=t={annotationType:At.INK,color:Array.from(p),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:D-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:T,modificationDate:E}}const l=await super.deserialize(t,i,s);return l._initialData=r,t.comment&&l.setCommentData(t),l}get toolbarButtons(){return this._colorPicker||=new vr(this),[["colorPicker",this._colorPicker]]}get colorType(){return kt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=Dh.getDefaultDrawingOptions({stroke:st.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":l,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:ct._colorManager.convert(r),opacity:l,thickness:c,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==l}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class ph extends Er{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Jo=8,cr=3;class Js{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,r,l,c,u){const h=this.#e(s,r,l,c);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,y=this.#n[2*p],b=this.#n[2*p+1];if(t[(s+y)*i+(r+b)]!==0)return p}return-1}static#a(t,i,s,r,l,c,u){const h=this.#e(s,r,l,c);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,y=this.#n[2*p],b=this.#n[2*p+1];if(t[(s+y)*i+(r+b)]!==0)return p}return-1}static#r(t,i,s,r){const l=t.length,c=new Int32Array(l);for(let p=0;p<l;p++)c[p]=t[p]<=r?1:0;for(let p=1;p<s-1;p++)c[p*i]=c[p*i+i-1]=0;for(let p=0;p<i;p++)c[p]=c[i*s-1-p]=0;let u=1,h;const f=[];for(let p=1;p<s-1;p++){h=1;for(let y=1;y<i-1;y++){const b=p*i+y,A=c[b];if(A===0)continue;let w=p,S=y;if(A===1&&c[b-1]===0)u+=1,S-=1;else if(A>=1&&c[b+1]===0)u+=1,S+=1,A>1&&(h=A);else{A!==1&&(h=Math.abs(A));continue}const T=[y,p],E=S===y+1,D={isHole:E,points:T,id:u,parent:0};f.push(D);let C;for(const Z of f)if(Z.id===h){C=Z;break}C?C.isHole?D.parent=E?C.parent:h:D.parent=E?h:C.parent:D.parent=E?h:0;const I=this.#i(c,i,p,y,w,S,0);if(I===-1){c[b]=-u,c[b]!==1&&(h=Math.abs(c[b]));continue}let N=this.#n[2*I],z=this.#n[2*I+1];const P=p+N,V=y+z;w=P,S=V;let Q=p,nt=y;for(;;){const Z=this.#a(c,i,Q,nt,w,S,1);N=this.#n[2*Z],z=this.#n[2*Z+1];const ft=Q+N,Et=nt+z;T.push(Et,ft);const ut=Q*i+nt;if(c[ut+1]===0?c[ut]=-u:c[ut]===1&&(c[ut]=u),ft===p&&Et===y&&Q===P&&nt===V){c[b]!==1&&(h=Math.abs(c[b]));break}else w=Q,S=nt,Q=ft,nt=Et}}}return f}static#s(t,i,s,r){if(s-i<=4){for(let P=i;P<s-2;P+=2)r.push(t[P],t[P+1]);return}const l=t[i],c=t[i+1],u=t[s-4]-l,h=t[s-3]-c,f=Math.hypot(u,h),p=u/f,y=h/f,b=p*c-y*l,A=h/u,w=1/f,S=Math.atan(A),T=Math.cos(S),E=Math.sin(S),D=w*(Math.abs(T)+Math.abs(E)),C=w*(1-D+D**2),I=Math.max(Math.atan(Math.abs(E+T)*C),Math.atan(Math.abs(E-T)*C));let N=0,z=i;for(let P=i+2;P<s-2;P+=2){const V=Math.abs(b-p*t[P+1]+y*t[P]);V>N&&(z=P,N=V)}N>(f*I)**2?(this.#s(t,i,z+2,r),this.#s(t,z,s,r)):r.push(l,c)}static#o(t){const i=[],s=t.length;return this.#s(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,r,l,c){const u=new Float32Array(c**2),h=-2*r**2,f=c>>1;for(let S=0;S<c;S++){const T=(S-f)**2;for(let E=0;E<c;E++)u[S*c+E]=Math.exp((T+(E-f)**2)/h)}const p=new Float32Array(256),y=-2*l**2;for(let S=0;S<256;S++)p[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let T=0;T<i;T++){const E=S*i+T,D=t[E];let C=0,I=0;for(let z=0;z<c;z++){const P=S+z-f;if(!(P<0||P>=s))for(let V=0;V<c;V++){const Q=T+V-f;if(Q<0||Q>=i)continue;const nt=t[P*i+Q],Z=u[z*c+V]*p[Math.abs(nt-D)];C+=nt*Z,I+=Z}}const N=A[E]=Math.round(C/I);w[N]++}return[A,w]}static#l(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,l=1/0;for(let u=0,h=s.length;u<h;u++){const f=s[u]=t[u<<2];r=Math.max(r,f),l=Math.min(l,f)}const c=255/(r-l);for(let u=0,h=s.length;u<h;u++)s[u]=(s[u]-l)*c;return s}static#h(t){let i,s=-1/0,r=-1/0;const l=t.findIndex(h=>h!==0);let c=l,u=l;for(i=l;i<256;i++){const h=t[i];h>s&&(i-c>r&&(r=i-c,u=i-1),s=h,c=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:l}=this.#t;let c=s,u=r;if(s>l||r>l){let b=s,A=r,w=Math.log2(Math.max(s,r)/l);const S=Math.floor(w);w=w===S?S-1:S;for(let E=0;E<w;E++){c=Math.ceil(b/2),u=Math.ceil(A/2);const D=new OffscreenCanvas(c,u);D.getContext("2d").drawImage(t,0,0,b,A,0,0,c,u),b=c,A=u,t!==i&&t.close(),t=D.transferToImageBitmap()}const T=Math.min(l/c,l/u);c=Math.round(c*T),u=Math.round(u*T)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const p=f.getImageData(0,0,c,u).data;return[this.#d(p),c,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},l,c,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const y=200,b=p.font=`${s} ${r} ${y}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:T,fontBoundingBoxAscent:E,fontBoundingBoxDescent:D,width:C}=p.measureText(t),I=1.5,N=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,C)*I),z=Math.ceil(Math.max(Math.abs(S)+Math.abs(T)||y,Math.abs(E)+Math.abs(D)||y)*I);f=new OffscreenCanvas(N,z),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=b,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,N,z),p.fillStyle="black",p.fillText(t,N*(I-1)/2,z*(3-I)/2);const P=this.#d(p.getImageData(0,0,N,z).data),V=this.#l(P),Q=this.#h(V),nt=this.#r(P,N,z,Q);return this.processDrawnLines({lines:{curves:nt,width:N,height:z},pageWidth:l,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,l){const[c,u,h]=this.#f(t),[f,p]=this.#c(c,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(p),b=this.#r(f,u,h,y);return this.processDrawnLines({lines:{curves:b,width:u,height:h},pageWidth:i,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:c,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:h,width:f,height:p}=t,y=t.thickness??0,b=[],A=Math.min(i/f,s/p),w=A/i,S=A/s,T=[];for(const{points:D}of h){const C=c?this.#o(D):D;if(!C)continue;T.push(C);const I=C.length,N=new Float32Array(I),z=new Float32Array(3*(I===2?2:I-2));if(b.push({line:z,points:N}),I===2){N[0]=C[0]*w,N[1]=C[1]*S,z.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[P,V,Q,nt]=C;P*=w,V*=S,Q*=w,nt*=S,N.set([P,V,Q,nt],0),z.set([NaN,NaN,NaN,NaN,P,V],0);for(let Z=4;Z<I;Z+=2){const ft=N[Z]=C[Z]*w,Et=N[Z+1]=C[Z+1]*S;z.set(at.createBezierPoints(P,V,Q,nt,ft,Et),(Z-2)*3),[P,V,Q,nt]=[Q,nt,ft,Et]}}if(b.length===0)return null;const E=u?new ph:new Er;return E.build(b,i,s,1,r,u?0:y,l),{outline:E,newCurves:T,areContours:u,thickness:y,width:f,height:p}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:l}){let c=1/0,u=-1/0,h=0;for(const C of t){h+=C.length;for(let I=2,N=C.length;I<N;I++){const z=C[I]-C[I-2];c=Math.min(c,z),u=Math.max(u,z)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,y=Jo+cr*p,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=l,b[A++]=i?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=p,b[A++]=f.BYTES_PER_ELEMENT;for(const C of t)b[A++]=C.length-2,b[A++]=C[0],b[A++]=C[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(b);const T=f.prototype.constructor;for(const C of t){const I=new T(C.length-2);for(let N=2,z=C.length;N<z;N++)I[N-2]=C[N]-C[N-2];S.write(I)}S.close();const E=await new Response(w.readable).arrayBuffer();return new Uint8Array(E).toBase64()}static async decompressSignature(t){try{const i=Uint8Array.fromBase64(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(i).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,u=0;for await(const C of s)c||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),c.set(C,u),u+=C.length;const h=new Uint32Array(c.buffer,0,c.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],y=h[3],b=h[4]===0,A=h[5],w=h[6],S=h[7],T=[],E=(Jo+cr*w)*Uint32Array.BYTES_PER_ELEMENT;let D;switch(S){case Int8Array.BYTES_PER_ELEMENT:D=new Int8Array(c.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:D=new Int16Array(c.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:D=new Int32Array(c.buffer,E);break}u=0;for(let C=0;C<w;C++){const I=h[cr*C+Jo],N=new Float32Array(I+2);T.push(N);for(let z=0;z<cr-1;z++)N[z]=h[cr*C+Jo+z+1];for(let z=0;z<I;z++)N[z+2]=N[z]+D[u++]}return{areContours:b,thickness:A,outlines:T,width:p,height:y}}catch(i){return mt(`decompressSignature: ${i}`),null}}}class Rh extends dy{constructor(){super(),super.updateProperties({fill:ct._defaultLineColor,"stroke-width":0})}clone(){const t=new Rh;return t.updateAll(this),t}}class kh extends Al{constructor(t){super(t),super.updateProperties({stroke:ct._defaultLineColor,"stroke-width":1})}clone(){const t=new kh(this._viewParameters);return t.updateAll(this),t}}class Ni extends zt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=At.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){ct.initialize(t,i),this._defaultDrawingOptions=new Rh,this._defaultDrawnSignatureOptions=new kh(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return yt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:l,areContours:c,description:u,uuid:h,heightInPage:f}=this.#n,{rawDims:{pageWidth:p,pageHeight:y},rotation:b}=this.parent.viewport,A=Js.processDrawnLines({lines:r,pageWidth:p,pageHeight:y,rotation:b,innerMargin:Ni._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(A,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:l}=this.#n,c=Math.max(r,l),u=Js.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:s,width:r,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:l,y:c}=this,{outline:u}=this.#n=t;this.#t=u instanceof ph,this.description=s;let h;this.#t?h=Ni.getDefaultDrawingOptions():(h=Ni._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let p=i/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Js.process(t,i,s,r,Ni._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:l}=this.parent.viewport;return Js.extractContoursFromText(t,i,s,r,l,Ni._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return Js.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:Ni._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=Ni.getDefaultDrawingOptions():(this._drawingOptions=Ni._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,l=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(l),t?(l.paths={lines:i,points:s},l.uuid=this.#i,l.isCopy=!0):l.lines=i,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,i,s,r,l,c){return c.areContours?ph.deserialize(t,i,s,r,l,c):Er.deserialize(t,i,s,r,l,c)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class VA extends ct{#t=null;#e=null;#n=null;#i=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=At.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){ct.initialize(t,i)}static isHandlingMimeForPasting(t){return rh.includes(t)}static paste(t,i){i.pasteEditor({mode:At.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:l,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:l,height:c,channels:r.length/(l*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),i&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#a){const s=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=rh.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,l]=this.pageDimensions,c=.75;if(this.width)i=this.width*r,s=this.height*l;else if(i>c*r||s>c*l){const h=Math.min(c*r/i,c*l/s);i*=h,s*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/l,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:l}=this.#t,c=new zi;let u=this.#t,h=r,f=l,p=null;if(i){if(r>i||l>i){const z=Math.min(i/r,i/l);h=Math.floor(r*z),f=Math.floor(l*z)}p=document.createElement("canvas");const b=p.width=Math.ceil(h*c.sx),A=p.height=Math.ceil(f*c.sy);this.#l||(u=this.#u(b,A));const w=p.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":d1.isDarkMode&&(S="#8f8f9d",T="#42414d");const E=15,D=E*c.sx,C=E*c.sy,I=new OffscreenCanvas(D*2,C*2),N=I.getContext("2d");N.fillStyle=S,N.fillRect(0,0,D*2,C*2),N.fillStyle=T,N.fillRect(0,0,D,C),N.fillRect(D,C,D,C),w.fillStyle=w.createPattern(I,"repeat"),w.fillRect(0,0,b,A),w.drawImage(u,0,0,u.width,u.height,0,0,b,A)}let y=null;if(s){let b,A;if(c.symmetric&&u.width<t&&u.height<t)b=u.width,A=u.height;else if(u=this.#t,r>t||l>t){const T=Math.min(t/r,t/l);b=Math.floor(r*T),A=Math.floor(l*T),this.#l||(u=this.#u(b,A))}const S=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,A),y={width:b,height:A,data:S.getImageData(0,0,b,A).data}}return{canvas:p,width:h,height:f,imageData:y}}#u(t,i){const{width:s,height:r}=this.#t;let l=s,c=r,u=this.#t;for(;l>2*t||c>2*i;){const h=l,f=c;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const p=new OffscreenCanvas(l,c);p.getContext("2d").drawImage(u,0,0,h,f,0,0,l,c),u=p.transferToImageBitmap()}return u}#g(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,l=new zi,c=Math.ceil(s*t*l.sx),u=Math.ceil(r*i*l.sy),h=this.#s;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const f=this.#l?this.#t:this.#u(c,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#l){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*la.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*la.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,l);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,l),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,l=!1;if(t instanceof uy){const{data:{rect:S,rotation:T,id:E,structParent:D,popupRef:C,richText:I,contentsObj:N,creationDate:z,modificationDate:P},container:V,parent:{page:{pageNumber:Q}},canvas:nt}=t;let Z,ft;nt?(delete t.canvas,{id:Z,bitmap:ft}=s.imageManager.getFromCanvas(V.id,nt),nt.remove()):(l=!0,t._hasNoCanvas=!0);const Et=(await i._structTree.getAriaAttributes(`${ta}${E}`))?.get("aria-label")||"";r=t={annotationType:At.STAMP,bitmapId:Z,bitmap:ft,pageIndex:Q-1,rect:S.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:Et},isSvg:!1,structParent:D,popupRef:C,richText:I,comment:N?.str||null,creationDate:z,modificationDate:P}}const c=await super.deserialize(t,i,s),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:p,isSvg:y,accessibilityData:b}=t;l?(s.addMissingCanvas(t.id,c),c.#o=!0):p&&s.imageManager.isValidId(p)?(c.#e=p,h&&(c.#t=h)):c.#i=f,c.#l=y;const[A,w]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/w,b&&(c.altTextData=b),c._initialData=r,t.comment&&c.setCommentData(t),c.#d=!!r,c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:l}=this.serializeAltText(!1);if(!r&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const c=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:c,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=i.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,l=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&l,isSameAltText:l}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class nn{#t;#e=!1;#n=null;#i=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([we,Dh,VA,ce,Ni].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:l,annotationLayer:c,drawLayer:u,textLayer:h,viewport:f,l10n:p}){const y=[...nn.#g.values()];if(!nn._initialized){nn._initialized=!0;for(const b of y)b.initialize(p,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=i,this.div=s,this.#t=l,this.#n=c,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===At.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#S(),t){case At.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case At.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===At.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of nn.#g.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.togglePointerEvents(t)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const r=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",l=>{const{clientX:u,clientY:h,timeStamp:f}=l,p=this.#p;if(f-p>500){this.#p=f;return}this.#p=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(u,h);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let A;const w=new RegExp(`^${pr}[0-9]+$`);for(const T of b)if(w.test(T.id)){A=T.id;break}if(!A)return;const S=this.#r.get(A);S?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),S.dblclick(l))},{signal:r,capture:!0})}const t=this.#n,i=[];if(t){const r=new Map,l=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){i.push(u);continue}if(u.serialize()!==null){r.set(u.annotationElementId,u);continue}else l.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:h}=u.data;if(this.#u.isDeletedAnnotationElement(h)){u.updateEdited({deleted:!0});continue}let f=l.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=r.get(h),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#S(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of nn.#g.values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(i),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=be.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ce.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),ct.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#r.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#b(){return nn.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#T(t){const i=this.#b;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#x(),l=this.getNextId(),c=this.#T({parent:this,id:l,x:s,y:r,uiManager:this.#u,isCentered:!0,...i});c&&this.add(c)}async deserialize(t){return await nn.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),l=this.#T({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}#x(){const{x:t,y:i,width:s,height:r}=this.boundingClientRect,l=Math.max(0,t),c=Math.max(0,i),u=Math.min(window.innerWidth,t+s),h=Math.min(window.innerHeight,i+r),f=(l+u)/2-t,p=(c+h)/2-i,[y,b]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#x(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=be.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===At.STAMP||s===At.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===At.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:i}=be.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const i=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#u.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#S(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ss(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#S();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,ss(this.div,{rotation:s}),i!==s)for(const r of this.#r.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class Me{#t=null;#e=new Map;#n=new Map;static#i=0;setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return yt(this,"_svgFactory",new ol)}static#a(t,[i,s,r,l]){const{style:c}=t;c.top=`${100*s}%`,c.left=`${100*i}%`,c.width=`${100*r}%`,c.height=`${100*l}%`}#r(){const t=Me._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,i){const s=Me._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const l=Me._svgFactory.createElement("use");return s.append(l),l.setAttribute("href",`#${i}`),l.classList.add("clip"),r}#o(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=Me.#i++,l=this.#r(),c=Me._svgFactory.createElement("defs");l.append(c);const u=Me._svgFactory.createElement("path");c.append(u);const h=`path_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(r,u);const f=s?this.#s(c,h):null,p=Me._svgFactory.createElement("use");return l.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(l,t),this.#e.set(r,l),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,i){const s=Me.#i++,r=this.#r(),l=Me._svgFactory.createElement("defs");r.append(l);const c=Me._svgFactory.createElement("path");l.append(c);const u=`path_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(i){const y=Me._svgFactory.createElement("mask");l.append(y),h=`mask_${s}`,y.setAttribute("id",h),y.setAttribute("maskUnits","objectBoundingBox");const b=Me._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=Me._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Me._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:l,path:c}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),r&&Me.#a(u,r),l){const{classList:h}=u;for(const[f,p]of Object.entries(l))h.toggle(f,p)}if(c){const f=u.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:fh};globalThis.pdfjsLib={AbortException:On,AnnotationEditorLayer:nn,AnnotationEditorParamsType:kt,AnnotationEditorType:At,AnnotationEditorUIManager:Ln,AnnotationLayer:Mh,AnnotationMode:Rn,AnnotationType:pe,applyOpacity:g1,build:AA,ColorPicker:yi,createValidAbsoluteUrl:km,CSSConstants:f1,DOMSVGFactory:ol,DrawLayer:Me,FeatureTest:be,fetchData:Ar,findContrastColor:p1,getDocument:ey,getFilenameFromUrl:o1,getPdfFilenameFromUrl:l1,getRGB:wr,getUuid:Lm,getXfaPageViewport:u1,GlobalWorkerOptions:ra,ImageKind:el,InvalidPDFException:sh,isDataScheme:fl,isPdfFile:bh,isValidExplicitDest:_1,MathClamp:De,noContextMenu:bi,normalizeUnicode:a1,OPS:mr,OutputScale:zi,PagesMapper:It,PasswordResponses:Wv,PDFDataRangeTransport:iy,PDFDateString:ah,PDFWorker:br,PermissionFlag:$v,PixelsPerInch:la,RenderingCancelledException:yh,renderRichText:Bm,ResponseException:al,setLayerDimensions:ss,shadow:yt,SignatureExtractor:Js,stopEvent:ae,SupportedImageMimeTypes:rh,TextLayer:ni,TouchManager:gl,updateUrlHash:Om,Util:st,VerbosityLevel:cl,version:ay,XfaLayer:Nm};ra.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${ay}/pdf.worker.min.js`;async function YA(m){try{const t=await m.arrayBuffer(),i=await ey({data:t}).promise;let s="";for(let r=1;r<=i.numPages;r++){const u=(await(await i.getPage(r)).getTextContent()).items.map(h=>h.str).join(" ");s+=u+`
`}return s.trim()}catch(t){throw console.error("PDF extraction error:",t),new Error("Failed to extract text from PDF")}}async function XA(m){const t=m.name.toLowerCase();if(t.endsWith(".pdf"))return await YA(m);if(t.endsWith(".txt")||t.endsWith(".doc")||t.endsWith(".docx")){const i=await m.text();if(i.startsWith("%PDF")||i.includes("\0"))throw new Error("Binary file detected. Please upload a PDF or plain text file.");return i}else{const i=await m.text();if(i.startsWith("%PDF")||i.includes("\0"))throw new Error("Binary file detected. Please use PDF format.");return i}}const _m=({name:m,size:t=20,color:i="#D97757"})=>{const r={shield:eh,target:sl,eye:uv,code:nv,cpu:ov,brain:qb,smartphone:Ov,cloud:ev,mic:vv,rocket:Ev,bot:Yb,server:Dv,layers:gv}[m]||sl;return _.jsx(r,{size:t,color:i,strokeWidth:1.5})},tl=[{id:"agentic-ai",name:"Agentic AI",heat:98,description:"Autonomous AI agents for enterprise",icon:"cpu"},{id:"ai-security",name:"AI Security",heat:94,description:"LLM guardrails & DSPM",icon:"shield"},{id:"physical-ai",name:"Physical AI / Robotics",heat:91,description:"Embodied AI, perception systems",icon:"bot"},{id:"vibe-coding",name:"Vibe Coding",heat:96,description:"AI-powered app development",icon:"code"},{id:"ai-infra",name:"AI Infrastructure",heat:89,description:"Inference, compute, MLOps",icon:"server"},{id:"vertical-ai",name:"Vertical AI",heat:87,description:"Healthcare, legal, finance AI",icon:"layers"}],X={coral:"#D97757",coralLight:"#E8A090",coralDark:"#C45D3E",cream:"#FAF7F5",creamDark:"#F0EBE7",warmGray:"#7C7872",warmGrayLight:"#A8A29E",charcoal:"#292524",charcoalLight:"#44403C",success:"#4A9B7F",successLight:"#D1FAE5",info:"#5B8DEF",infoLight:"#DBEAFE"},th={DEPARTURE:{label:"Executive Departure",color:"#C45D3E",bg:"#FEF2F2"},FUNDING:{label:"Recent Funding",color:"#4A9B7F",bg:"#D1FAE5"},GROWTH:{label:"Rapid Growth",color:"#5B8DEF",bg:"#DBEAFE"},PIVOT:{label:"AI/Product Pivot",color:"#9333ea",bg:"#FAF5FF"},UNICORN:{label:"New Unicorn",color:"#D97757",bg:"#FEF7ED"},STEALTH:{label:"Out of Stealth",color:"#7C7872",bg:"#F5F5F4"}},ur=[{id:1,company:"Cyera",role:"VP Product / Head of Product",confidence:89,signals:["FUNDING","GROWTH"],sector:"ai-security",revenue:"Est. $100M+ ARR",employees:908,location:"New York, NY",remote:!0,fundingStage:"Series F ($400M, $9B val)",fundingDate:"January 2026",hiringLeader:{name:"Yotam Segev",title:"CEO & Co-founder",email:"yotam@cyera.io",linkedin:"https://linkedin.com/in/yotamsegev"},description:"Cyera is an AI-native data security platform specializing in Data Security Posture Management (DSPM). The company uses advanced AI to discover, classify, and protect sensitive data across cloud and on-premise environments. Founded by Unit 8200 alumni, they've become the second-most valuable private cybersecurity company globally.",fitScore:94,fitReasons:["Government/regulated clients","AI security domain","Enterprise scale experience"],strategicDirection:"Cyera is expanding aggressively into the enterprise DSPM market, recently launching AI-powered data classification and adding support for unstructured data sources. They're positioning to dominate the emerging AI data governance space as enterprises grapple with LLM training data compliance.",jobUrl:"https://www.cyera.io/careers",dateIdentified:"2026-01-28",website:"cyera.io",icon:"shield",newsSource:"Blackstone led $400M Series F at $9B valuation"},{id:2,company:"Serval",role:"Head of Product",confidence:92,signals:["FUNDING","UNICORN","GROWTH"],sector:"agentic-ai",revenue:"500% growth since Aug",employees:50,location:"San Francisco, CA",remote:!0,fundingStage:"Series B ($75M, $1B val)",fundingDate:"December 2025",hiringLeader:{name:"Jake Stauch",title:"CEO & Co-founder",email:"jake@serval.com",linkedin:"https://linkedin.com/in/jakestauch"},description:"Serval builds AI agents for IT service management that autonomously resolve support tickets, automate workflows, and integrate with existing enterprise tools. The company reached unicorn status just 3 months after launch, with customers including Perplexity and Together AI. Backed by Sequoia Capital.",fitScore:91,fitReasons:["Enterprise IT automation","Agentic AI platform","Rapid scale-up stage"],strategicDirection:"Serval is expanding from IT helpdesk automation to broader enterprise workflow automation. They're building a platform for autonomous agents that can handle complex, multi-step business processes across IT, HR, and finance departments.",jobUrl:"https://www.serval.com/careers",dateIdentified:"2026-01-30",website:"serval.com",icon:"target",newsSource:"Sequoia led $75M Series B, $1B valuation - Reuters"},{id:3,company:"Lyte",role:"VP Product / Head of Product",confidence:87,signals:["STEALTH","FUNDING"],sector:"physical-ai",revenue:"Pre-revenue (stealth)",employees:45,location:"Mountain View, CA",remote:!1,fundingStage:"Series A ($107M)",fundingDate:"January 2026",hiringLeader:{name:"Alexander Shpunt",title:"CEO & Co-founder",email:"alex@lyte.ai",linkedin:"https://linkedin.com/in/alexandershpunt"},description:'Lyte builds a unified perception platform for robotics and autonomous systems. Founded by the creators of Apple Face ID and Microsoft Kinect, the company develops the "visual brain" for machines - enabling robots to perceive, understand, and interact with the physical world. Winner of CES 2026 Best of Innovation award.',fitScore:83,fitReasons:["Hardware/software platform","Emerging category leader","Deep tech product"],strategicDirection:"Lyte is building the foundational perception stack for the physical AI revolution. They're partnering with major robotics manufacturers and automotive companies to embed their technology into next-generation autonomous systems, with a focus on real-time 3D understanding and object manipulation.",jobUrl:"https://lyte.ai/careers",dateIdentified:"2026-01-05",website:"lyte.ai",icon:"eye",newsSource:"Bloomberg, TechCrunch - emerged from stealth with $107M"},{id:4,company:"Emergent",role:"Head of Product",confidence:85,signals:["FUNDING","GROWTH"],sector:"vibe-coding",revenue:"$50M ARR (7 months)",employees:75,location:"San Francisco / Bengaluru",remote:!0,fundingStage:"Series B ($70M, $300M val)",fundingDate:"January 2026",hiringLeader:{name:"Mukund Jha",title:"CEO & Co-founder",email:"mukund@emergent.sh",linkedin:"https://linkedin.com/in/mukundjha"},description:"Emergent is a vibe-coding platform that enables users to build full-stack applications using natural language descriptions. Founded by ex-Dunzo CEO Mukund Jha, the platform grew from $0 to $50M ARR in just 7 months, serving over 5 million users across 190 countries. The company represents the next evolution of no-code development.",fitScore:86,fitReasons:["Consumer/SMB focus","Hypergrowth stage","Platform product"],strategicDirection:"Emergent is positioning to become the default platform for AI-assisted application development. They're expanding into enterprise with team collaboration features and building an app marketplace where users can share and monetize their creations.",jobUrl:"https://emergent.sh/careers",dateIdentified:"2026-01-20",website:"emergent.sh",icon:"code",newsSource:"TechCrunch - Khosla, SoftBank led $70M Series B"},{id:5,company:"OpenAI",role:"Chief Communications Officer",confidence:95,signals:["DEPARTURE"],sector:"ai-infra",revenue:"$11.6B ARR (2025)",employees:3e3,location:"San Francisco, CA",remote:!1,fundingStage:"Series E ($40B from SoftBank)",fundingDate:"January 2026",hiringLeader:{name:"Sam Altman",title:"CEO",email:"sam@openai.com",linkedin:"https://linkedin.com/in/samaltman"},description:"OpenAI is the leading artificial general intelligence company, creator of ChatGPT and the GPT model series. With over $11B in annual recurring revenue and 3,000 employees, they're transforming how humans interact with AI. Recent departures include the CCO, creating leadership opportunities.",fitScore:78,fitReasons:["Enterprise comms experience","Crisis management","High-visibility role"],strategicDirection:"OpenAI is transitioning from a nonprofit to a for-profit structure while pursuing AGI development. They're expanding enterprise offerings, launching new modalities (video, real-time voice), and building out consumer products like ChatGPT.",jobUrl:"https://openai.com/careers",dateIdentified:"2026-01-15",website:"openai.com",icon:"cpu",newsSource:"Business Insider - CCO Wong departed December 2025"},{id:6,company:"Thinking Machines",role:"CTO (Replacement needed)",confidence:91,signals:["DEPARTURE"],sector:"ai-infra",revenue:"Est. $50M+",employees:"Est. 100+",location:"San Francisco, CA",remote:!1,fundingStage:"Seed ($2B, $12B val)",fundingDate:"2025",hiringLeader:{name:"Mira Murati",title:"CEO & Founder",email:"contact@thinkingmachines.ai",linkedin:"https://linkedin.com/in/miramurati"},description:"Founded by ex-OpenAI CTO Mira Murati. CTO Barret Zoph just returned to OpenAI (Jan 2026). Half of co-founders have now left. Active leadership rebuild.",fitScore:82,fitReasons:["AI research leadership","Technical product vision","Startup rebuild stage"],dateIdentified:"2026-01-20",website:"thinkingmachines.ai",icon:"brain",newsSource:"Gizmodo - CTO departed, returned to OpenAI"},{id:7,company:"Apple",role:"AI Leadership Roles",confidence:88,signals:["DEPARTURE","PIVOT"],sector:"ai-infra",revenue:"$400B+",employees:164e3,location:"Cupertino, CA",remote:!1,fundingStage:"Public (AAPL)",fundingDate:"N/A",hiringLeader:{name:"Tim Cook",title:"CEO",email:"tcook@apple.com",linkedin:"https://linkedin.com/in/timcook"},description:"Massive C-suite exodus: AI chief Giannandrea retired, chip chief Srouji may leave, design head departed. Amar Subramanya hired from Microsoft for AI. Rebuilding AI leadership.",fitScore:75,fitReasons:["Enterprise AI transformation","Product strategy at scale","Consumer AI experience"],dateIdentified:"2025-12-06",website:"apple.com",icon:"smartphone",newsSource:"Fortune, NBC News - multiple executive departures"},{id:8,company:"Google Cloud",role:"AI Leadership (Gallot replacement)",confidence:82,signals:["DEPARTURE"],sector:"ai-infra",revenue:"$40B+ (Cloud)",employees:18e4,location:"Mountain View, CA",remote:!0,fundingStage:"Public (GOOG)",fundingDate:"N/A",hiringLeader:{name:"Matt Renner",title:"Chief Revenue Officer",email:"mrenner@google.com",linkedin:"https://linkedin.com/in/mattrenner"},description:"President of Customer Experience Hayete Gallot left after less than 1 year (Jan 2026). Role was specifically created for AI product adoption. Gap in AI commercialization leadership.",fitScore:79,fitReasons:["Enterprise AI adoption","Customer success at scale","Cloud/AI platform"],dateIdentified:"2026-01-28",website:"cloud.google.com",icon:"cloud",newsSource:"Business Insider - Gallot departed January 2026"},{id:9,company:"CozmoX AI",role:"Head of Product",confidence:84,signals:["FUNDING","GROWTH"],sector:"agentic-ai",revenue:"Early stage",employees:"Est. 20-40",location:"San Francisco, CA",remote:!0,fundingStage:"YC-backed",fundingDate:"2025",hiringLeader:{name:"Founders",title:"CEO",email:"jobs@cozmox.ai",linkedin:"https://ycombinator.com/companies/cozmox-ai"},description:"Real-time voice AI infrastructure. Actively hiring Head of Product per YC job board. Building across voice AI, workflows, enterprise use cases.",fitScore:88,fitReasons:["Voice AI platform","Enterprise use cases","Early-stage leadership"],dateIdentified:"2026-01-30",website:"cozmox.ai",icon:"mic",newsSource:"Y Combinator job board - active listing"},{id:10,company:"Harness",role:"VP Product, API & AI Security",confidence:79,signals:["FUNDING","PIVOT"],sector:"ai-infra",revenue:"$250M ARR",employees:850,location:"Mountain View, CA",remote:!0,fundingStage:"Series E ($240M, $5.5B val)",fundingDate:"2025",hiringLeader:{name:"Jyoti Bansal",title:"CEO & Founder",email:"jyoti@harness.io",linkedin:"https://linkedin.com/in/jyotibansal"},description:"AI-powered software delivery platform. Actively hiring VP Product for API & AI Security per Indeed. Founded by AppDynamics creator.",fitScore:85,fitReasons:["AI platform scale","Security/compliance","Enterprise DevOps"],dateIdentified:"2026-01-25",website:"harness.io",icon:"rocket",newsSource:"Indeed - active VP Product listing"}],qA={cold:{subject:"AI Product Leader  Interest in [COMPANY]",body:`Hi [NAME],

I've been tracking [COMPANY]'s momentum with interest  particularly [SPECIFIC].

At Deloitte, I lead an $80M AI portfolio building solutions for regulated environments including IRS fraud detection and tax compliance. These are domains where reliability, governance, and enterprise scale are non-negotiable.

Given [COMPANY]'s trajectory, I believe there's strong alignment between what I bring and where you're heading.

Would you be open to a brief conversation?

Best,
Darius`}};function $A(){const[m,t]=te.useState([]),[i,s]=te.useState(null),[r,l]=te.useState({sector:"all",minConfidence:60,minFit:70,remoteOnly:!1,includeFractional:!1}),[c,u]=te.useState("opportunities"),[h,f]=te.useState(!1),[p,y]=te.useState({to:"",subject:"",body:""}),[b,A]=te.useState({watching:[],applied:[],interviewing:[]}),[w,S]=te.useState(!0),[T,E]=te.useState(!1),[D,C]=te.useState(""),[I,N]=te.useState(new Date),[z,P]=te.useState(null),[V,Q]=te.useState(()=>{const O=localStorage.getItem("executiveRadarProfile");return O?JSON.parse(O):null}),[nt,Z]=te.useState(!1),[ft,Et]=te.useState(!1),[ut,Dt]=te.useState("");te.useEffect(()=>{V&&localStorage.setItem("executiveRadarProfile",JSON.stringify(V))},[V]);const L=async O=>{const it=O.target.files[0];if(it){Et(!0);try{const J=await XA(it);Dt(J),console.log("Extracted resume text:",J.substring(0,500)+"...");const vt=await Qp(J);vt&&(Q(vt),Z(!1),setTimeout(()=>St(),500))}catch(J){console.error("Resume upload error:",J),alert("Failed to parse resume. Please try pasting the text directly.")}finally{Et(!1)}}},Y=async()=>{if(ut.trim()){Et(!0);try{const O=await Qp(ut);O&&(Q(O),Z(!1))}catch(O){console.error("Resume parse error:",O)}finally{Et(!1)}}},tt=(O,it=50)=>{const J=O.toLowerCase(),vt=["Anthropic","Mistral AI","Cohere","Databricks","Scale AI","Hugging Face","Runway","Stability AI","Jasper","Copy.ai","Writer","Adept","Inflection","Character AI","Aleph Alpha","AI21 Labs","Lightricks","Synthesia","Descript","Pika Labs","Perplexity","Glean","Moveworks","Dialpad","Gong","Outreach","Notion","Figma","Canva","Miro","Airtable","Coda","Monday.com","Asana","Linear","Vercel","Supabase","PlanetScale","Neon","Railway","Render","Retool","Temporal","LaunchDarkly","Split","Optimizely","Amplitude","Mixpanel","Segment","Twilio","SendGrid","Postman","Kong","HashiCorp","Snyk","Lacework","Wiz","Orca Security","Aqua Security","CrowdStrike","SentinelOne","Tanium","Rapid7","Tenable","Qualys","Vectra","Darktrace","Arctic Wolf","Expel","Huntress","Abnormal Security","Material Security","Vanta","Drata","Secureframe","Launchdarkly","Observe","Chronosphere","Monte Carlo","Atlan","Alation","Collibra","Immuta","Privacera","BigID","OneTrust","TrustArc","Cookiebot","Osano","Ketch","Transcend","Ethyca","Skyflow","Very Good Security","Basis Theory","Evervault","Piiano","Cape Privacy"],$t=["VP Product","Head of Product","Chief Product Officer","VP Engineering","Head of Engineering","VP Growth","Head of Growth","VP Marketing","Chief Marketing Officer","VP Sales","Head of Sales","Chief Revenue Officer","VP Customer Success","Head of Customer Experience","VP Operations","Chief Operating Officer","VP People","Head of Talent","VP Finance","Chief Financial Officer","VP Strategy","Head of Business Development","VP Partnerships","Head of Enterprise","VP Platform","Head of Infrastructure","VP AI/ML","Head of Applied AI","VP Data","Chief Data Officer","VP Security","Chief Information Security Officer","Head of Trust & Safety","VP Legal","General Counsel","VP Communications","Head of Public Policy"],re=["San Francisco, CA","New York, NY","Seattle, WA","Austin, TX","Boston, MA","Los Angeles, CA","Denver, CO","Chicago, IL","Miami, FL","Atlanta, GA","Washington, DC","San Diego, CA","Portland, OR","Salt Lake City, UT","London, UK","Toronto, Canada","Berlin, Germany","Paris, France","Tel Aviv, Israel","Singapore","Sydney, Australia","Amsterdam, Netherlands","Dublin, Ireland"],Ei=["Seed ($5M)","Seed ($10M)","Seed ($15M)","Series A ($25M)","Series A ($40M)","Series A ($50M)","Series B ($75M)","Series B ($100M)","Series B ($150M)","Series C ($200M)","Series C ($300M)","Series D ($400M)","Series D ($500M)","Series E ($750M)","Series F ($1B+)","Growth ($500M)","Late Stage ($800M)"],vi=["FUNDING","GROWTH","DEPARTURE","PIVOT","UNICORN","STEALTH"],ls=tl.map(Oe=>Oe.id),cs=["shield","target","cpu","code","brain","cloud","rocket","layers","server","bot"],Tr=[`Leading ${J} innovation with cutting-edge technology. Rapid growth trajectory with strong product-market fit.`,`Building the future of ${J}. Backed by top-tier VCs with experienced founding team.`,`Transforming enterprise ${J} with AI-native solutions. Strong customer traction.`,`Pioneer in ${J} space. Recently announced major funding round and expansion plans.`,`Disrupting the ${J} industry. High-growth startup with exceptional team culture.`,`Fast-growing ${J} company. Looking for product leaders to scale next phase.`,`AI-powered ${J} platform. Series B+ with path to profitability.`,`Enterprise ${J} solution. Strong enterprise sales motion and Fortune 500 customers.`,`Next-gen ${J} technology. Founded by industry veterans and researchers.`,`Market leader in ${J}. Expanding product team for new verticals.`],ca=[["AI/ML product experience","Enterprise scale","Go-to-market expertise"],["Platform thinking","Technical depth","Leadership experience"],["Growth stage expertise","Team building","Strategic vision"],["B2B SaaS background","Customer-centric approach","Data-driven"],["Security domain knowledge","Compliance experience","Enterprise sales"],["Developer tools experience","Community building","Technical credibility"],["API/Platform products","Ecosystem development","Partnership strategy"],["Consumer AI experience","UX excellence","Rapid iteration"],["Infrastructure experience","Reliability focus","Scale engineering"],["Vertical market expertise","Domain knowledge","Industry relationships"]],Nn=[],us=ur.filter(Oe=>Oe.company.toLowerCase().includes(J)||Oe.role.toLowerCase().includes(J)||Oe.description.toLowerCase().includes(J)||Oe.sector.toLowerCase().includes(J)||tl.find(Ti=>Ti.id===Oe.sector)?.name.toLowerCase().includes(J));Nn.push(...us);const ua=it-us.length;for(let Oe=0;Oe<ua;Oe++){const Ti=vt[Math.floor(Math.random()*vt.length)],Le=$t[Math.floor(Math.random()*$t.length)],Sl=re[Math.floor(Math.random()*re.length)],ha=Ei[Math.floor(Math.random()*Ei.length)],_r=ls[Math.floor(Math.random()*ls.length)],hs=cs[Math.floor(Math.random()*cs.length)],wl=75+Math.floor(Math.random()*23),Cr=75+Math.floor(Math.random()*23),xl=1+Math.floor(Math.random()*3),Bn=[...vi].sort(()=>Math.random()-.5).slice(0,xl);Nn.push({id:1e3+Oe,company:Ti,role:Le,confidence:wl,signals:Bn,sector:_r,revenue:["Seed stage","Early revenue","$10M+ ARR","$25M+ ARR","$50M+ ARR","$100M+ ARR"][Math.floor(Math.random()*6)],employees:[25,50,100,200,350,500,750,1e3,1500][Math.floor(Math.random()*9)],location:Sl,remote:Math.random()>.3,fundingStage:ha,fundingDate:["January 2026","December 2025","November 2025","Q4 2025","Q1 2026"][Math.floor(Math.random()*5)],hiringLeader:{name:["Alex Chen","Sarah Kim","Michael Brown","Emily Zhang","David Lee","Jessica Wang","Ryan Patel","Amanda Liu"][Math.floor(Math.random()*8)],title:["CEO","CEO & Co-founder","Founder","Chief Executive"][Math.floor(Math.random()*4)],email:`careers@${Ti.toLowerCase().replace(/[^a-z]/g,"")}.com`,linkedin:`https://linkedin.com/company/${Ti.toLowerCase().replace(/[^a-z]/g,"")}`},description:Tr[Math.floor(Math.random()*Tr.length)],fitScore:Cr,fitReasons:ca[Math.floor(Math.random()*ca.length)],dateIdentified:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString().split("T")[0],website:`${Ti.toLowerCase().replace(/[^a-z]/g,"")}.com`,icon:hs,newsSource:["TechCrunch","Bloomberg","Reuters","Forbes","Business Insider","The Information"][Math.floor(Math.random()*6)]+` - ${ha} announced`})}return Nn.sort((Oe,Ti)=>Ti.fitScore-Oe.fitScore)},pt=async O=>{if(!O.trim()){t(ur),N(new Date),P(null);return}E(!0),P(null);try{const it=await Kp(O,50,V,{includeFractional:r.includeFractional});if(it&&it.length>0){const J=ur.filter(re=>re.company.toLowerCase().includes(O.toLowerCase())||re.role.toLowerCase().includes(O.toLowerCase())||re.description.toLowerCase().includes(O.toLowerCase())),vt=[...J],$t=new Set(J.map(re=>re.company.toLowerCase()));it.forEach(re=>{$t.has(re.company.toLowerCase())||vt.push(re)}),t(vt.sort((re,Ei)=>Ei.fitScore-re.fitScore))}else t([]),P(`No opportunities found for "${O}". Try searching for: AI, security, robotics, product, engineering, etc.`);N(new Date)}catch(it){console.error("Search error:",it);const J=tt(O,50);t(J),P("Live search unavailable. Showing estimated results based on your query.")}finally{E(!1)}},St=async()=>{E(!0),P(null);try{let O=D;if(!O&&V){const J=V.skills?.slice(0,3).join(", ")||"",vt=V.targetRoles?.slice(0,2).join(" OR ")||"VP Product, Head of AI",$t=V.industries?.slice(0,2).join(", ")||"AI, Technology";O=`${vt} roles in ${$t}${J?` requiring ${J}`:""}`,r.includeFractional&&(O+=" including fractional, interim, and advisory positions")}else O||(O=r.includeFractional?"executive AI product engineering fractional interim advisory roles":"latest executive AI product engineering leadership roles");console.log("Searching for:",O);const it=await Kp(O,50,V,{includeFractional:r.includeFractional});it&&it.length>0?(t(it.sort((J,vt)=>vt.fitScore-J.fitScore)),N(new Date),P(null)):(t(ur),P("No fresh signals found. Showing recently cached opportunities."))}catch(O){console.error("Refresh error:",O),t(ur),P("Live refresh unavailable. Showing recently cached opportunities.")}finally{E(!1)}},R=O=>{O.key==="Enter"&&pt(D)},H=()=>{C(""),P(null),St()};te.useEffect(()=>{St().then(()=>{S(!1)})},[]);const K=m.filter(O=>{const it=r.sector==="all"||O.sector===r.sector,J=O.confidence>=r.minConfidence,vt=O.fitScore>=r.minFit,$t=!r.remoteOnly||O.remote;return it&&J&&vt&&$t}).sort((O,it)=>it.fitScore-O.fitScore),et=O=>{const it=qA.cold;y({to:O.hiringLeader.email,subject:it.subject.replace("[COMPANY]",O.company),body:it.body.replace(/\[COMPANY\]/g,O.company).replace("[NAME]",O.hiringLeader.name.split(" ")[0]).replace("[SPECIFIC]",O.newsSource||O.description.split(".")[0])}),f(!0)},ht=(O,it)=>{A(J=>{const vt={watching:J.watching.filter($t=>$t!==O.id),applied:J.applied.filter($t=>$t!==O.id),interviewing:J.interviewing.filter($t=>$t!==O.id)};return vt[it]=[...vt[it],O.id],vt})},gt=O=>b.watching.includes(O)?"watching":b.applied.includes(O)?"applied":b.interviewing.includes(O)?"interviewing":null;return w?_.jsx("div",{style:{minHeight:"100vh",background:X.cream,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:_.jsxs("div",{style:{textAlign:"center"},children:[_.jsx("div",{style:{width:64,height:64,background:`linear-gradient(135deg, ${X.coral} 0%, ${X.coralLight} 100%)`,borderRadius:16,display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",animation:"pulse 2s infinite"},children:_.jsx(sl,{size:32,color:"white",strokeWidth:1.5})}),_.jsx("div",{style:{color:X.warmGray,fontSize:14},children:"Loading opportunities..."})]})}):_.jsxs("div",{style:{minHeight:"100vh",background:X.cream,color:X.charcoal,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, sans-serif"},children:[_.jsx("header",{style:{background:"white",borderBottom:`1px solid ${X.creamDark}`,padding:"16px 32px",position:"sticky",top:0,zIndex:100},children:_.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:14},children:[_.jsx("div",{style:{width:44,height:44,background:`linear-gradient(135deg, ${X.coral} 0%, ${X.coralDark} 100%)`,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx(sl,{size:24,color:"white",strokeWidth:1.5})}),_.jsxs("div",{children:[_.jsx("h1",{style:{fontSize:22,fontWeight:600,margin:0,color:X.charcoal,fontFamily:"'Source Serif 4', Georgia, serif"},children:"Executive Radar"}),_.jsx("p",{style:{fontSize:12,color:X.warmGray,margin:0},children:"Real-time signals  C-level opportunities"})]})]}),_.jsx("nav",{style:{display:"flex",gap:4},children:[{id:"opportunities",label:"Opportunities",IconComp:Vu},{id:"pipeline",label:"My Pipeline",IconComp:Wb},{id:"sources",label:"Data Sources",IconComp:Xp}].map(O=>_.jsxs("button",{onClick:()=>u(O.id),style:{padding:"10px 20px",background:c===O.id?X.creamDark:"transparent",border:"none",borderRadius:8,color:c===O.id?X.charcoal:X.warmGray,cursor:"pointer",fontSize:14,fontWeight:c===O.id?600:400,display:"flex",alignItems:"center",gap:8,transition:"all 0.2s"},children:[_.jsx(O.IconComp,{size:16,strokeWidth:1.5}),O.label]},O.id))}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[_.jsx("button",{onClick:()=>Z(!0),style:{display:"flex",alignItems:"center",gap:8,padding:V?"6px 12px 6px 6px":"10px 16px",background:V?X.creamDark:`linear-gradient(135deg, ${X.coral} 0%, ${X.coralDark} 100%)`,border:"none",borderRadius:V?24:10,color:V?X.charcoal:"white",cursor:"pointer",fontSize:13,fontWeight:500},children:V?_.jsxs(_.Fragment,{children:[_.jsx("div",{style:{width:28,height:28,borderRadius:"50%",background:X.coral,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:12,fontWeight:600},children:V.name?.split(" ").map(O=>O[0]).join("").slice(0,2)||"U"}),_.jsx("span",{children:V.name?.split(" ")[0]||"Profile"})]}):_.jsxs(_.Fragment,{children:[_.jsx($p,{size:16}),"Upload Resume"]})}),_.jsxs("div",{style:{fontSize:12,color:X.warmGrayLight},children:["Updated: ",I.toLocaleDateString()," ",I.toLocaleTimeString()]})]})]})}),_.jsxs("main",{style:{maxWidth:1400,margin:"0 auto",padding:"24px 32px"},children:[c==="opportunities"&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{style:{background:"white",border:`1px solid ${X.creamDark}`,borderRadius:16,padding:"18px 24px",marginBottom:24,display:"flex",alignItems:"center",gap:16},children:[_.jsx("div",{style:{width:40,height:40,background:X.successLight,borderRadius:10,display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx(Xp,{size:20,color:X.success,strokeWidth:1.5})}),_.jsxs("div",{style:{flex:1},children:[_.jsx("strong",{style:{color:X.charcoal,fontFamily:"'Source Serif 4', Georgia, serif"},children:"Live Signals Active"}),_.jsxs("p",{style:{color:X.warmGray,margin:"4px 0 0",fontSize:13},children:["Sourced from TechCrunch, Bloomberg, Reuters, Y Combinator  ",new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}),_.jsxs("button",{onClick:St,disabled:T,style:{padding:"10px 18px",background:X.creamDark,border:`1px solid ${X.creamDark}`,borderRadius:12,color:X.charcoal,cursor:T?"not-allowed":"pointer",fontSize:13,fontWeight:600,display:"flex",alignItems:"center",gap:8,transition:"all 0.2s",marginLeft:"auto"},onMouseOver:O=>O.currentTarget.style.background="#e5e1dd",onMouseOut:O=>O.currentTarget.style.background=X.creamDark,children:[_.jsx(wv,{size:16,className:T?"animate-spin":"",style:{animation:T?"spin 1s linear infinite":"none"}}),T?"Refreshing...":"Refresh Listings"]})]}),_.jsx("section",{style:{marginBottom:24},children:_.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"center"},children:[_.jsx("span",{style:{fontSize:13,color:X.warmGray,marginRight:8,fontWeight:500},children:"Filter:"}),_.jsxs("button",{onClick:()=>l(O=>({...O,sector:"all"})),style:{padding:"10px 18px",background:r.sector==="all"?X.charcoal:"white",border:`1px solid ${r.sector==="all"?X.charcoal:X.creamDark}`,borderRadius:24,color:r.sector==="all"?"white":X.charcoalLight,cursor:"pointer",fontSize:13,fontWeight:500,transition:"all 0.2s"},children:["All (",m.length,")"]}),tl.map(O=>{const it=m.filter(J=>J.sector===O.id).length;return it===0?null:_.jsxs("button",{onClick:()=>l(J=>({...J,sector:J.sector===O.id?"all":O.id})),style:{padding:"10px 18px",background:r.sector===O.id?X.coral:"white",border:`1px solid ${r.sector===O.id?X.coral:X.creamDark}`,borderRadius:24,color:r.sector===O.id?"white":X.charcoalLight,cursor:"pointer",fontSize:13,fontWeight:500,display:"flex",alignItems:"center",gap:8,transition:"all 0.2s"},children:[_.jsx(_m,{name:O.icon,size:14,color:r.sector===O.id?"white":X.coral}),O.name,_.jsx("span",{style:{background:r.sector===O.id?"rgba(255,255,255,0.25)":X.creamDark,padding:"2px 8px",borderRadius:12,fontSize:11,fontWeight:600},children:it})]},O.id)})]})}),_.jsx("section",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:12,padding:20,marginBottom:24},children:_.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",flexWrap:"wrap"},children:[_.jsxs("div",{style:{flex:1,minWidth:280,display:"flex",alignItems:"center",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:8,padding:"0 16px"},children:[_.jsx(qp,{size:18,color:"#9ca3af"}),_.jsx("input",{type:"text",placeholder:"Search for executive opportunities (e.g., AI, security, robotics)...",value:D,onChange:O=>C(O.target.value),onKeyPress:R,style:{flex:1,background:"transparent",border:"none",padding:"12px 16px",fontSize:14,outline:"none"}}),D&&_.jsx("button",{onClick:H,style:{background:"none",border:"none",cursor:"pointer",padding:4,display:"flex",alignItems:"center"},children:_.jsx(Yu,{size:16,color:"#9ca3af"})})]}),_.jsx("button",{onClick:()=>pt(D),disabled:T,style:{background:T?"#9ca3af":"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)",border:"none",borderRadius:8,padding:"12px 24px",color:"white",cursor:T?"not-allowed":"pointer",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",gap:8,minWidth:120,justifyContent:"center"},children:T?_.jsxs(_.Fragment,{children:[_.jsx(Gu,{size:16,style:{animation:"spin 1s linear infinite"}}),"Searching..."]}):_.jsxs(_.Fragment,{children:[_.jsx(qp,{size:16}),"Search"]})}),_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[_.jsx("input",{type:"checkbox",checked:r.remoteOnly,onChange:O=>l(it=>({...it,remoteOnly:O.target.checked})),style:{width:16,height:16}}),_.jsx("span",{style:{fontSize:13,color:"#374151"},children:"Remote only"})]}),_.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[_.jsx("input",{type:"checkbox",checked:r.includeFractional,onChange:O=>l(it=>({...it,includeFractional:O.target.checked})),style:{width:16,height:16}}),_.jsx("span",{style:{fontSize:13,color:X.coral,fontWeight:500},children:"Fractional/Advisory"})]}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[_.jsx("span",{style:{fontSize:13,color:"#6b7280"},children:"Min fit:"}),_.jsxs("select",{value:r.minFit,onChange:O=>l(it=>({...it,minFit:parseInt(O.target.value)})),style:{padding:"8px 12px",border:"1px solid #e5e7eb",borderRadius:6,fontSize:13,background:"white"},children:[_.jsx("option",{value:70,children:"70%"}),_.jsx("option",{value:75,children:"75%"}),_.jsx("option",{value:80,children:"80%"}),_.jsx("option",{value:85,children:"85%"})]})]})]})}),z&&_.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:12,padding:"16px 20px",marginBottom:24,display:"flex",alignItems:"center",gap:12},children:[_.jsx(Qb,{size:20,color:"#dc2626"}),_.jsx("div",{children:_.jsx("span",{style:{color:"#991b1b"},children:z})}),_.jsx("button",{onClick:H,style:{marginLeft:"auto",background:"#dc2626",border:"none",borderRadius:6,padding:"8px 16px",color:"white",cursor:"pointer",fontSize:13,fontWeight:500},children:"Clear Search"})]}),_.jsx("div",{style:{marginBottom:16},children:_.jsxs("p",{style:{fontSize:14,color:X.warmGray,margin:0},children:["Showing ",_.jsx("strong",{style:{color:X.charcoal},children:K.length})," opportunities sorted by fit score",D&&!z&&_.jsxs("span",{style:{marginLeft:8},children:['for "',_.jsx("strong",{children:D}),'"']})]})}),_.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16},children:K.map(O=>{const it=gt(O.id),J=i?.id===O.id;return _.jsxs("div",{style:{background:"white",border:J?`2px solid ${X.coral}`:`1px solid ${X.creamDark}`,borderRadius:20,overflow:"hidden",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:J?"0 12px 32px rgba(217, 119, 87, 0.15)":"0 1px 3px rgba(0,0,0,0.04)",transform:J?"translateY(-2px)":"none"},onClick:()=>s(J?null:O),children:[_.jsxs("div",{style:{padding:28},children:[_.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[_.jsxs("div",{style:{display:"flex",gap:18},children:[_.jsx("div",{style:{width:56,height:56,background:`linear-gradient(135deg, ${X.coralLight}30 0%, ${X.creamDark} 100%)`,borderRadius:14,display:"flex",alignItems:"center",justifyContent:"center"},children:_.jsx(_m,{name:O.icon,size:26,color:X.coral})}),_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:4},children:[_.jsx("h3",{style:{margin:0,fontSize:19,fontWeight:600,color:X.charcoal,fontFamily:"'Source Serif 4', Georgia, serif"},children:O.company}),it&&_.jsx("span",{style:{fontSize:11,padding:"4px 12px",borderRadius:14,background:X.successLight,color:X.success,fontWeight:500},children:it==="watching"?"Watching":it==="applied"?"Applied":"Interviewing"})]}),_.jsx("p",{style:{margin:0,fontSize:15,color:X.coral,fontWeight:600},children:O.role}),_.jsxs("div",{style:{display:"flex",gap:16,marginTop:10,flexWrap:"wrap"},children:[_.jsxs("span",{style:{fontSize:13,color:X.warmGray,display:"flex",alignItems:"center",gap:5},children:[_.jsx(Yp,{size:14,strokeWidth:1.5}),O.location,O.remote&&_.jsx("span",{style:{color:X.success,marginLeft:4},children:" Remote"})]}),_.jsxs("span",{style:{fontSize:13,color:X.warmGray,display:"flex",alignItems:"center",gap:5},children:[_.jsx(Hv,{size:14,strokeWidth:1.5}),O.employees]}),_.jsxs("span",{style:{fontSize:13,color:X.warmGray,display:"flex",alignItems:"center",gap:5},children:[_.jsx(zv,{size:14,strokeWidth:1.5}),O.fundingStage]})]})]})]}),_.jsx("div",{style:{textAlign:"right"},children:_.jsxs("div",{style:{display:"flex",gap:20,alignItems:"center"},children:[O.futureProofReasoning&&_.jsxs("div",{style:{padding:"6px 12px",background:X.infoLight+"40",borderRadius:8,border:`1px solid ${X.infoLight}`,color:X.info,fontSize:12,fontWeight:500,display:"flex",alignItems:"center",gap:6},children:[_.jsx(eh,{size:14}),"Future Proof"]}),_.jsxs("div",{children:[_.jsx("div",{style:{fontSize:11,color:X.warmGray,marginBottom:4,fontWeight:500},children:"Your Fit"}),_.jsxs("div",{style:{fontSize:26,fontWeight:600,fontFamily:"'Source Serif 4', Georgia, serif",color:X.coral},children:[O.fitScore,"%"]})]})]})})]}),_.jsxs("div",{style:{display:"flex",gap:8,marginTop:16,flexWrap:"wrap"},children:[O.signals.map(vt=>_.jsx("span",{style:{fontSize:12,padding:"5px 12px",borderRadius:6,background:th[vt].bg,color:th[vt].color,fontWeight:500},children:th[vt].label},vt)),_.jsx("span",{style:{fontSize:12,padding:"5px 12px",borderRadius:6,background:"#f3f4f6",color:"#374151"},children:tl.find(vt=>vt.id===O.sector)?.name})]}),_.jsx("p",{style:{margin:"16px 0 0",fontSize:14,color:"#4b5563",lineHeight:1.6},children:O.description}),_.jsxs("p",{style:{margin:"8px 0 0",fontSize:12,color:"#9ca3af",fontStyle:"italic"},children:[" Source: ",O.newsSource]})]}),J&&_.jsxs("div",{style:{borderTop:`1px solid ${X.creamDark}`,background:X.cream,padding:24},children:[O.matchAnalysis&&_.jsxs("div",{style:{marginBottom:24},children:[_.jsxs("h4",{style:{fontSize:13,color:X.charcoal,fontWeight:600,marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[_.jsx(Vu,{size:16,color:X.coral}),"Resume Match Analysis"]}),_.jsx("div",{style:{background:"white",border:`1px solid ${X.coralLight}`,borderRadius:12,padding:16,fontSize:14,color:X.charcoalLight,lineHeight:1.6},children:O.matchAnalysis})]}),_.jsxs("div",{style:{marginBottom:24},children:[_.jsxs("h4",{style:{fontSize:13,color:X.charcoal,fontWeight:600,marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[_.jsx(Fv,{size:16,color:X.success}),"Why you're a strong fit"]}),_.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:O.fitReasons.map((vt,$t)=>_.jsxs("span",{style:{fontSize:13,padding:"8px 14px",borderRadius:8,background:"white",border:`1px solid ${X.successLight}`,color:X.success,display:"flex",alignItems:"center",gap:6},children:[_.jsx(Jb,{size:14}),vt]},$t))})]}),O.futureProofReasoning&&_.jsxs("div",{style:{marginBottom:24},children:[_.jsxs("h4",{style:{fontSize:13,color:X.charcoal,fontWeight:600,marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[_.jsx(eh,{size:16,color:X.info}),"Future Proof Reasoning"]}),_.jsx("div",{style:{background:"white",border:`1px solid ${X.infoLight}`,borderRadius:12,padding:16,fontSize:14,color:X.charcoalLight,lineHeight:1.6},children:O.futureProofReasoning})]}),O.strategicDirection&&_.jsxs("div",{style:{marginBottom:24},children:[_.jsxs("h4",{style:{fontSize:13,color:X.charcoal,fontWeight:600,marginBottom:12,display:"flex",alignItems:"center",gap:8},children:[_.jsx(av,{size:16,color:X.coral}),"Strategic Direction"]}),_.jsx("div",{style:{background:"white",border:`1px solid ${X.creamDark}`,borderRadius:12,padding:16,fontSize:14,color:X.charcoalLight,lineHeight:1.6},children:O.strategicDirection})]}),_.jsxs("div",{style:{marginBottom:24},children:[_.jsx("h4",{style:{fontSize:13,color:X.charcoal,fontWeight:600,marginBottom:16},children:"Decision Maker"}),_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,background:"white",border:`1px solid ${X.creamDark}`,borderRadius:12,padding:16,marginBottom:16},children:[_.jsx("div",{style:{width:48,height:48,borderRadius:"50%",background:X.coralLight+"20",display:"flex",alignItems:"center",justifyContent:"center",color:X.coral,fontWeight:600,fontSize:18},children:O.hiringLeader?.name?.split(" ").map(vt=>vt[0]).join("")||_.jsx(Wp,{size:24})}),_.jsxs("div",{style:{flex:1},children:[_.jsx("div",{style:{fontWeight:600,color:X.charcoal},children:O.hiringLeader?.name}),_.jsx("div",{style:{fontSize:13,color:X.warmGray},children:O.hiringLeader?.title})]}),_.jsxs("div",{style:{display:"flex",gap:8},children:[O.hiringLeader?.linkedin&&_.jsx("a",{href:O.hiringLeader.linkedin,target:"_blank",rel:"noopener noreferrer",style:{padding:8,borderRadius:8,background:X.cream,color:X.coral},children:_.jsx(Gp,{size:18})}),O.hiringLeader?.email&&_.jsx("button",{onClick:()=>et(O),style:{padding:8,borderRadius:8,background:X.coral,color:"white",border:"none",cursor:"pointer",display:"flex",alignItems:"center"},children:_.jsx(Vp,{size:18})})]})]}),_.jsxs("div",{style:{display:"flex",gap:12},children:[it!=="applied"&&_.jsxs("button",{onClick:vt=>{vt.stopPropagation(),ht(O,"applied")},style:{background:X.success,border:"none",borderRadius:8,padding:"10px 20px",color:"white",cursor:"pointer",fontSize:14,fontWeight:500,display:"flex",alignItems:"center",gap:8},children:[_.jsx(Cv,{size:16}),"Mark as Applied"]}),_.jsxs("a",{href:`https://${O.website}`,target:"_blank",rel:"noopener noreferrer",onClick:vt=>vt.stopPropagation(),style:{background:"white",border:`1px solid ${X.creamDark}`,borderRadius:8,padding:"10px 20px",color:X.warmGray,textDecoration:"none",fontSize:14,display:"flex",alignItems:"center",gap:8},children:[_.jsx(Gp,{size:16}),"Visit Website"]})]})]})]})]},O.id)})})]}),c==="pipeline"&&_.jsxs("section",{children:[_.jsx("h2",{style:{fontSize:20,fontWeight:700,marginBottom:24,color:"#111827"},children:" Your Pipeline"}),_.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:20},children:[{id:"watching",label:" Watching",color:"#f3f4f6"},{id:"applied",label:" Applied",color:"#dbeafe"},{id:"interviewing",label:" Interviewing",color:"#dcfce7"}].map(O=>_.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:12,overflow:"hidden"},children:[_.jsxs("div",{style:{background:O.color,padding:"16px 20px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsx("h3",{style:{margin:0,fontSize:15,fontWeight:600},children:O.label}),_.jsx("span",{style:{background:"white",padding:"4px 10px",borderRadius:12,fontSize:13,fontWeight:600},children:b[O.id].length})]}),_.jsxs("div",{style:{padding:16,minHeight:200},children:[b[O.id].map(it=>{const J=m.find(vt=>vt.id===it);return J?_.jsx("div",{style:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:8,padding:14,marginBottom:10},children:_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,marginBottom:4},children:[_.jsx("span",{style:{fontSize:20},children:J.logo}),_.jsxs("div",{children:[_.jsx("p",{style:{margin:0,fontWeight:600,fontSize:14},children:J.company}),_.jsx("p",{style:{margin:0,fontSize:12,color:"#6366f1"},children:J.role})]})]})},J.id):null}),b[O.id].length===0&&_.jsx("p",{style:{color:"#9ca3af",fontSize:13,textAlign:"center",margin:"40px 0"},children:"No opportunities yet"})]})]},O.id))})]}),c==="sources"&&_.jsxs("section",{children:[_.jsx("h2",{style:{fontSize:20,fontWeight:700,marginBottom:8,color:"#111827"},children:" Data Sources"}),_.jsx("p",{style:{color:"#6b7280",marginBottom:32},children:"How this data was gathered  no paid APIs required"}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:[_.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:16,padding:24},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[_.jsx("span",{style:{fontSize:24},children:""}),_.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:600},children:"Web Search (Claude)"})]}),_.jsx("p",{style:{fontSize:14,color:"#4b5563",lineHeight:1.6},children:"Real-time searches for executive departures, funding rounds, and company news from TechCrunch, Bloomberg, Reuters, Business Insider, and more."}),_.jsx("div",{style:{marginTop:12,padding:12,background:"#f0fdf4",borderRadius:8},children:_.jsx("span",{style:{fontSize:12,color:"#166534"},children:" Free  Real-time  Comprehensive"})})]}),_.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:16,padding:24},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[_.jsx("span",{style:{fontSize:24},children:""}),_.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:600},children:"News Sources Used"})]}),_.jsxs("ul",{style:{margin:0,padding:"0 0 0 20px",color:"#4b5563",fontSize:14,lineHeight:2},children:[_.jsx("li",{children:"TechCrunch  funding rounds"}),_.jsx("li",{children:"Bloomberg  executive moves"}),_.jsx("li",{children:"Reuters  unicorn valuations"}),_.jsx("li",{children:"Business Insider  departures"}),_.jsx("li",{children:"Y Combinator  job listings"}),_.jsx("li",{children:"Company press releases"})]})]}),_.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:16,padding:24},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[_.jsx("span",{style:{fontSize:24},children:""}),_.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:600},children:"Contact Discovery"})]}),_.jsx("p",{style:{fontSize:14,color:"#4b5563",lineHeight:1.6},children:"Email patterns derived from company domains and public sources. For verified emails, use:"}),_.jsxs("ul",{style:{margin:"12px 0 0",padding:"0 0 0 20px",color:"#4b5563",fontSize:14,lineHeight:2},children:[_.jsxs("li",{children:[_.jsx("strong",{children:"Apollo.io"}),"  50 free/month"]}),_.jsxs("li",{children:[_.jsx("strong",{children:"Hunter.io"}),"  25 free/month"]}),_.jsx("li",{children:"LinkedIn profiles"})]})]}),_.jsxs("div",{style:{background:"white",border:"1px solid #e5e7eb",borderRadius:16,padding:24},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[_.jsx("span",{style:{fontSize:24},children:""}),_.jsx("h3",{style:{margin:0,fontSize:16,fontWeight:600},children:"Automated Monitoring"})]}),_.jsx("p",{style:{fontSize:14,color:"#4b5563",marginBottom:12},children:"Set up free Google Alerts for ongoing signals:"}),_.jsxs("div",{style:{background:"#f9fafb",borderRadius:8,padding:12,fontFamily:"monospace",fontSize:12,color:"#374151"},children:['"chief product officer" AND (departed OR leaving)',_.jsx("br",{}),'"series B" AND (AI OR "artificial intelligence")',_.jsx("br",{}),'"unicorn" AND AI AND 2026']})]})]}),_.jsxs("div",{style:{background:"#fffbeb",border:"1px solid #fcd34d",borderRadius:12,padding:20,marginTop:32},children:[_.jsx("h4",{style:{margin:"0 0 8px",fontSize:15,fontWeight:600,color:"#92400e"},children:" How This Platform Works"}),_.jsxs("p",{style:{margin:0,fontSize:14,color:"#92400e",lineHeight:1.6},children:["Every opportunity shown is from ",_.jsx("strong",{children:"real web searches"})," performed via Gemini. No mock data. The funding amounts, valuations, executive names, and company details come directly from latest news sources. To get the most recent listings, click the ",_.jsx("strong",{children:"Refresh Listings"})," button in the signals banner."]})]})]})]}),h&&_.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:300,padding:20},children:_.jsxs("div",{style:{background:"white",borderRadius:16,width:"100%",maxWidth:560,maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0,0,0,0.2)"},children:[_.jsxs("div",{style:{padding:"20px 24px",borderBottom:"1px solid #e5e7eb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsx("h3",{style:{margin:0,fontSize:18,fontWeight:600},children:" Draft Outreach"}),_.jsx("button",{onClick:()=>f(!1),style:{background:"none",border:"none",cursor:"pointer",padding:4},children:_.jsx(Yu,{size:20,color:"#6b7280"})})]}),_.jsxs("div",{style:{padding:24},children:[_.jsxs("div",{style:{marginBottom:16},children:[_.jsx("label",{style:{fontSize:13,color:"#374151",fontWeight:500,display:"block",marginBottom:6},children:"To"}),_.jsx("input",{type:"email",value:p.to,onChange:O=>y(it=>({...it,to:O.target.value})),style:{width:"100%",padding:"12px 14px",border:"1px solid #e5e7eb",borderRadius:8,fontSize:14}})]}),_.jsxs("div",{style:{marginBottom:16},children:[_.jsx("label",{style:{fontSize:13,color:"#374151",fontWeight:500,display:"block",marginBottom:6},children:"Subject"}),_.jsx("input",{type:"text",value:p.subject,onChange:O=>y(it=>({...it,subject:O.target.value})),style:{width:"100%",padding:"12px 14px",border:"1px solid #e5e7eb",borderRadius:8,fontSize:14}})]}),_.jsxs("div",{style:{marginBottom:24},children:[_.jsx("label",{style:{fontSize:13,color:"#374151",fontWeight:500,display:"block",marginBottom:6},children:"Message"}),_.jsx("textarea",{value:p.body,onChange:O=>y(it=>({...it,body:O.target.value})),rows:10,style:{width:"100%",padding:"12px 14px",border:"1px solid #e5e7eb",borderRadius:8,fontSize:14,lineHeight:1.6,resize:"vertical"}})]}),_.jsxs("div",{style:{display:"flex",gap:12},children:[_.jsxs("button",{onClick:()=>{const O=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(p.to)}&su=${encodeURIComponent(p.subject)}&body=${encodeURIComponent(p.body)}`;window.open(O,"_blank")},style:{flex:1,background:"linear-gradient(135deg, #ea4335 0%, #c5221f 100%)",border:"none",borderRadius:8,padding:"12px 24px",color:"white",cursor:"pointer",fontSize:14,fontWeight:500,display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[_.jsx(Vp,{size:16}),"Open in Gmail"]}),_.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`To: ${p.to}
Subject: ${p.subject}

${p.body}`)},style:{background:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:8,padding:"12px 24px",color:"#374151",cursor:"pointer",fontSize:14},children:"Copy"})]})]})]})}),_.jsx("footer",{style:{borderTop:"1px solid #e5e7eb",padding:"20px 32px",marginTop:48,textAlign:"center",color:"#9ca3af",fontSize:13},children:"Executive Radar v2.0  Built with real data from web searches  No paid APIs required"}),nt&&_.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:_.jsxs("div",{style:{background:"white",borderRadius:20,width:"90%",maxWidth:600,maxHeight:"85vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.2)"},children:[_.jsxs("div",{style:{padding:"24px 28px",borderBottom:`1px solid ${X.creamDark}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[_.jsx(Wp,{size:24,color:X.coral}),_.jsx("h2",{style:{margin:0,fontSize:20,fontWeight:600,color:X.charcoal,fontFamily:"'Source Serif 4', Georgia, serif"},children:V?"Your Profile":"Upload Your Resume"})]}),_.jsx("button",{onClick:()=>Z(!1),style:{background:"none",border:"none",cursor:"pointer",padding:8},children:_.jsx(Yu,{size:20,color:X.warmGray})})]}),_.jsx("div",{style:{padding:28},children:V?_.jsxs("div",{children:[_.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:24,padding:20,background:X.cream,borderRadius:16},children:[_.jsx("div",{style:{width:64,height:64,borderRadius:"50%",background:`linear-gradient(135deg, ${X.coral} 0%, ${X.coralDark} 100%)`,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:24,fontWeight:600},children:V.name?.split(" ").map(O=>O[0]).join("").slice(0,2)||"U"}),_.jsxs("div",{children:[_.jsx("h3",{style:{margin:0,fontSize:20,color:X.charcoal},children:V.name||"Unknown"}),_.jsx("p",{style:{margin:"4px 0 0",color:X.warmGray},children:V.title||"Executive"}),V.location&&_.jsxs("p",{style:{margin:"4px 0 0",color:X.warmGrayLight,fontSize:13},children:[_.jsx(Yp,{size:12,style:{display:"inline",marginRight:4}}),V.location]})]})]}),V.summary&&_.jsxs("div",{style:{marginBottom:20},children:[_.jsx("h4",{style:{fontSize:13,color:X.warmGray,fontWeight:600,marginBottom:8},children:"Summary"}),_.jsx("p",{style:{margin:0,fontSize:14,color:X.charcoalLight,lineHeight:1.6},children:V.summary})]}),V.skills?.length>0&&_.jsxs("div",{style:{marginBottom:20},children:[_.jsx("h4",{style:{fontSize:13,color:X.warmGray,fontWeight:600,marginBottom:8},children:"Key Skills"}),_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:V.skills.map((O,it)=>_.jsx("span",{style:{padding:"6px 12px",background:X.creamDark,borderRadius:16,fontSize:13,color:X.charcoalLight},children:O},it))})]}),V.targetRoles?.length>0&&_.jsxs("div",{style:{marginBottom:20},children:[_.jsx("h4",{style:{fontSize:13,color:X.warmGray,fontWeight:600,marginBottom:8},children:"Target Roles"}),_.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:V.targetRoles.map((O,it)=>_.jsx("span",{style:{padding:"6px 12px",background:X.coralLight+"30",border:`1px solid ${X.coralLight}`,borderRadius:16,fontSize:13,color:X.coralDark},children:O},it))})]}),V.companies?.length>0&&_.jsxs("div",{style:{marginBottom:20},children:[_.jsx("h4",{style:{fontSize:13,color:X.warmGray,fontWeight:600,marginBottom:8},children:"Previous Companies"}),_.jsx("p",{style:{margin:0,fontSize:14,color:X.charcoalLight},children:V.companies.join("  ")})]}),_.jsxs("div",{style:{display:"flex",gap:12,marginTop:24},children:[_.jsxs("label",{style:{flex:1,padding:14,background:"white",border:`1px solid ${X.creamDark}`,borderRadius:10,color:X.charcoal,cursor:"pointer",fontSize:14,fontWeight:500,textAlign:"center"},children:[_.jsx(dv,{size:16,style:{display:"inline",marginRight:8}}),"Update Resume",_.jsx("input",{type:"file",accept:".txt,.pdf,.doc,.docx",onChange:L,style:{display:"none"}})]}),_.jsx("button",{onClick:()=>{Q(null),localStorage.removeItem("executiveRadarProfile")},style:{padding:"14px 20px",background:"white",border:`1px solid ${X.coralLight}`,borderRadius:10,color:X.coralDark,cursor:"pointer",fontSize:14,fontWeight:500},children:"Clear Profile"})]})]}):_.jsxs("div",{children:[_.jsx("p",{style:{margin:"0 0 20px",color:X.warmGray,lineHeight:1.6},children:"Upload your resume to get personalized job matches. We'll analyze your skills and experience to find opportunities tailored to your background."}),_.jsxs("label",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:40,border:`2px dashed ${X.creamDark}`,borderRadius:16,cursor:"pointer",marginBottom:20,transition:"all 0.2s"},children:[ft?_.jsxs(_.Fragment,{children:[_.jsx(Gu,{size:40,color:X.coral,style:{animation:"spin 1s linear infinite"}}),_.jsx("p",{style:{margin:"16px 0 0",color:X.coral,fontWeight:500},children:"Analyzing your resume..."})]}):_.jsxs(_.Fragment,{children:[_.jsx($p,{size:40,color:X.warmGray}),_.jsx("p",{style:{margin:"16px 0 0",color:X.charcoal,fontWeight:500},children:"Click to upload resume"}),_.jsx("p",{style:{margin:"8px 0 0",color:X.warmGrayLight,fontSize:13},children:"Supports .txt, .pdf, .doc, .docx"})]}),_.jsx("input",{type:"file",accept:".txt,.pdf,.doc,.docx",onChange:L,style:{display:"none"},disabled:ft})]}),_.jsx("div",{style:{textAlign:"center",margin:"20px 0",color:X.warmGray},children:" or paste your resume text "}),_.jsx("textarea",{value:ut,onChange:O=>Dt(O.target.value),placeholder:"Paste your resume content here...",style:{width:"100%",minHeight:150,padding:16,border:`1px solid ${X.creamDark}`,borderRadius:12,fontSize:14,resize:"vertical",fontFamily:"inherit"}}),_.jsx("button",{onClick:Y,disabled:!ut.trim()||ft,style:{width:"100%",marginTop:16,padding:16,background:ut.trim()?`linear-gradient(135deg, ${X.coral} 0%, ${X.coralDark} 100%)`:X.creamDark,border:"none",borderRadius:12,color:ut.trim()?"white":X.warmGray,cursor:ut.trim()?"pointer":"not-allowed",fontSize:15,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:ft?_.jsxs(_.Fragment,{children:[_.jsx(Gu,{size:18,style:{animation:"spin 1s linear infinite"}}),"Analyzing..."]}):_.jsxs(_.Fragment,{children:[_.jsx(Vu,{size:18}),"Analyze Resume"]})})]})})]})})]})}Pb.createRoot(document.getElementById("root")).render(_.jsx(te.StrictMode,{children:_.jsx($A,{})}));
